function e(e){this.items=[]}var t,o,l,n,r,a,s;function i(e,t){this.gMap=new n.maps.Map(e,t),this.markers=r.create()}t=window,e.prototype={add:function(e){this.items.push(e)},remove:function(e){var t=this.items.indexOf(e);-1!==t&&this.items.splice(t,1)},find:function(e,t){for(var o=this.items,l=o.length,n=[],r=0;r<l;r++)e(o[r],r)&&n.push(o[r]);return t&&t.call(this,n),n}},(o=e).create=function(e){return new o(e)},t.List=o,l=window,n=google,r=List,i.prototype={zoom:function(e){if(!e)return this.gMap.getZoom();this.gMap.setZoom(e)},_on:function(t){var o=this;n.maps.event.addListener(t.obj,t.event,function(e){t.callback.call(o,e)})},addMarker:function(t){var o,l;return t.position={lat:t.lat,lng:t.lng},o=this._createMarker(t),this.markers.add(o),t.event&&this._on({obj:o,event:t.event.name,callback:t.event.callback}),t.content&&this._on({obj:o,event:"click",callback:function(e){l||(l=new n.maps.InfoWindow({content:t.content})),l.getMap()?l.close():l.open(this.gMap,o)}}),o},findBy:function(e){return this.markers.find(e)},removeBy:function(e){this.markers.find(e,function(e){e.forEach(function(e){e.setMap(null)})})},_createMarker:function(e){return e.map=this.gMap,new n.maps.Marker(e)}},(a=i).create=function(e,t){return new a(e,t)},l.Mapster=a,window,s=google,(window.Mapster||(window.Mapster={})).MAP_OPTIONS={center:{lat:37.79135,lng:-122.435883},zoom:10,disableDefaultUI:!1,scrollwheel:!0,draggable:!0,mapTypeId:s.maps.MapTypeId.ROADMAP,zoomControlOptions:{position:s.maps.ControlPosition.BOTTOM_LEFT,style:s.maps.ZoomControlStyle.DEFAULT},panControlOptions:{position:s.maps.ControlPosition.LEFT_BOTTOM},styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]},function(e,t,o){var l=o.MAP_OPTIONS,n=document.getElementById("map-canvas"),r=new o.create(n,l);r.addMarker({lat:37.79135,lng:-122.435883,draggable:!1,id:1,content:"I like food",icon:"../img/icons/map-pin.png"}),r.addMarker({lat:37.89135,lng:-122.535883,draggable:!1,id:2,content:"I like food",icon:"../img/icons/map-pin.png"});r.removeBy(function(e){return 2===e.id}),console.log(r.markers)}(window,google,window.Mapster||(window.Mapster={}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxpc3QuanMiLCJNYXBzdGVyLmpzIiwibWFwLW9wdGlvbnMuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIkxpc3QiLCJwYXJhbXMiLCJ0aGlzIiwiaXRlbXMiLCJ3aW5kb3ciLCJnb29nbGUiLCJNYXBzdGVyIiwiZWxlbWVudCIsIm9wdHMiLCJnTWFwIiwibWFwcyIsIk1hcCIsIm1hcmtlcnMiLCJjcmVhdGUiLCJwcm90b3R5cGUiLCJhZGQiLCJpdGVtIiwicHVzaCIsInJlbW92ZSIsImluZGV4T2YiLCJzcGxpY2UiLCJmaW5kIiwiY2FsbGJhY2siLCJhY3Rpb24iLCJsZW5ndGgiLCJtYXRjaGVzIiwiaSIsImNhbGwiLCJ6b29tIiwibGV2ZWwiLCJnZXRab29tIiwic2V0Wm9vbSIsIl9vbiIsInNlbGYiLCJldmVudCIsImFkZExpc3RlbmVyIiwib2JqIiwiZSIsImFkZE1hcmtlciIsIm1hcmtlciIsImluZm9XaWRvdyIsInBvc2l0aW9uIiwibGF0IiwibG5nIiwiX2NyZWF0ZU1hcmtlciIsIm5hbWUiLCJjb250ZW50IiwiSW5mb1dpbmRvdyIsImdldE1hcCIsImNsb3NlIiwib3BlbiIsImZpbmRCeSIsInJlbW92ZUJ5IiwiZm9yRWFjaCIsInNldE1hcCIsIm1hcCIsIk1hcmtlciIsIk1BUF9PUFRJT05TIiwiY2VudGVyIiwiZGlzYWJsZURlZmF1bHRVSSIsInNjcm9sbHdoZWVsIiwiZHJhZ2dhYmxlIiwibWFwVHlwZUlkIiwiTWFwVHlwZUlkIiwiUk9BRE1BUCIsInpvb21Db250cm9sT3B0aW9ucyIsIkNvbnRyb2xQb3NpdGlvbiIsIkJPVFRPTV9MRUZUIiwic3R5bGUiLCJab29tQ29udHJvbFN0eWxlIiwiREVGQVVMVCIsInBhbkNvbnRyb2xPcHRpb25zIiwiTEVGVF9CT1RUT00iLCJzdHlsZXMiLCJlbGVtZW50VHlwZSIsInN0eWxlcnMiLCJjb2xvciIsInZpc2liaWxpdHkiLCJmZWF0dXJlVHlwZSIsIm1hcHN0ZXIiLCJvcHRpb25zIiwiZG9jdW1lbnQi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LGFBQ0FKLFlBQUEsbUJBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxlQUNBSixZQUFBLFdBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxNQUFBLGFBSUEsQ0FDQUUsWUFBQSxrQkFDQUosWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsUUFDQUosWUFBQSxXQUNBQyxRQUFBLENBQ0EsQ0FDQUMsTUFBQSxhQUlBLENBQ0FFLFlBQUEsUUFDQUosWUFBQSxtQkFDQUMsUUFBQSxDQUNBLENBQ0FDLE1BQUEsZUM1SkEsU0FBQXhFLEVBQUFDLEVBQUEwRSxHQUdBLElBQUFDLEVBQUFELEVBQUF0QixZQUNBbEQsRUFBQTBFLFNBQUFDLGVBQUEsY0FHQTNCLEVBQUEsSUFBQXdCLEVBQUFsRSxPQUFBTixFQUFBeUUsR0FDQXpCLEVBQUFqQixVQUFBLENBQ0FJLElBQUEsU0FDQUMsS0FBQSxXQUNBa0IsV0FBQSxFQUNBc0IsR0FBQSxFQUNBckMsUUFBQSxjQUNBc0MsS0FBQSw2QkFFQTdCLEVBQUFqQixVQUFBLENBQ0FJLElBQUEsU0FDQUMsS0FBQSxXQUNBa0IsV0FBQSxFQUNBc0IsR0FBQSxFQUNBckMsUUFBQSxjQUNBc0MsS0FBQSw2QkFPQTdCLEVBQUFILFNBQUEsU0FBQWIsR0FDQSxPQUFBLElBQUFBLEVBQUE0QyxLQUVBRSxRQUFBQyxJQUFBL0IsRUFBQTNDLFNBaENBLENBaUNBUixPQUFBQyxPQUFBRCxPQUFBRSxVQUFBRixPQUFBRSxRQUFBIiwiZmlsZSI6ImN1c3RvbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbih3aW5kb3cpe1xuICB2YXIgTGlzdCA9IChmdW5jdGlvbigpe1xuICAgIGZ1bmN0aW9uIExpc3QocGFyYW1zKXtcbiAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICB9O1xuICAgIExpc3QucHJvdG90eXBlID0ge1xuICAgICAgYWRkOiBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24oaXRlbSl7IFxuICAgICAgICB2YXIgaW5kZXhPZiA9IHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgaWYgKGluZGV4T2YgIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXhPZiwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmaW5kOiBmdW5jdGlvbihjYWxsYmFjaywgYWN0aW9uKXtcbiAgICAgICAgdmFyIGNhbGxiYWNrUmV0dXJuLFxuICAgICAgICAgICAgaXRlbXMgPSB0aGlzLml0ZW1zLFxuICAgICAgICAgICAgbGVuZ3RoID0gaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF0Y2hlcyA9IFtdLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IoOyBpIDwgbGVuZ3RoOyBpKyspe1xuICAgICAgICAgIGNhbGxiYWNrUmV0dXJuID0gY2FsbGJhY2soaXRlbXNbaV0sIGkpO1xuICAgICAgICAgIGlmKGNhbGxiYWNrUmV0dXJuKSB7XG4gICAgICAgICAgICBtYXRjaGVzLnB1c2goaXRlbXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgICBhY3Rpb24uY2FsbCh0aGlzLCBtYXRjaGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiBMaXN0O1xuICB9KCkpO1xuICBMaXN0LmNyZWF0ZSA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgTGlzdChwYXJhbXMpO1xuICB9XG4gIHdpbmRvdy5MaXN0ID0gTGlzdDtcbn0od2luZG93KSk7IiwiKGZ1bmN0aW9uKHdpbmRvdywgZ29vZ2xlLCBMaXN0KSB7XG5cbiAgdmFyIE1hcHN0ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTWFwc3RlcihlbGVtZW50LCBvcHRzKSB7XG4gICAgICB0aGlzLmdNYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsZW1lbnQsIG9wdHMpO1xuICAgICAgdGhpcy5tYXJrZXJzID0gTGlzdC5jcmVhdGUoKTtcbiAgICB9XG4gICAgTWFwc3Rlci5wcm90b3R5cGUgPSB7XG4gICAgICB6b29tOiBmdW5jdGlvbihsZXZlbCkge1xuICAgICAgICBpZihsZXZlbCkge1xuICAgICAgICAgIHRoaXMuZ01hcC5zZXRab29tKGxldmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5nTWFwLmdldFpvb20oKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vbjogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG9wdHMub2JqLCBvcHRzLmV2ZW50LCBmdW5jdGlvbihlKXtcbiAgICAgICAgICBvcHRzLmNhbGxiYWNrLmNhbGwoc2VsZiwgZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGFkZE1hcmtlcjogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB2YXIgbWFya2VyO1xuICAgICAgICB2YXIgaW5mb1dpZG93O1xuICAgICAgICBvcHRzLnBvc2l0aW9uID0ge1xuICAgICAgICAgIGxhdDogb3B0cy5sYXQsXG4gICAgICAgICAgbG5nOiBvcHRzLmxuZ1xuICAgICAgICB9XG4gICAgICAgIG1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihvcHRzKTtcbiAgICAgICAgdGhpcy5tYXJrZXJzLmFkZChtYXJrZXIpO1xuICAgICAgICBpZiAob3B0cy5ldmVudCkge1xuICAgICAgICAgIHRoaXMuX29uKHtcbiAgICAgICAgICAgIG9iajogbWFya2VyLFxuICAgICAgICAgICAgZXZlbnQ6IG9wdHMuZXZlbnQubmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBvcHRzLmV2ZW50LmNhbGxiYWNrXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5jb250ZW50KSB7XG4gICAgICAgICAgdGhpcy5fb24oe1xuICAgICAgICAgICAgb2JqOiBtYXJrZXIsXG4gICAgICAgICAgICBldmVudDogJ2NsaWNrJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihlKSB7ICAgICAgIFxuICAgICAgICAgICAgICBpZiAoIWluZm9XaWRvdyl7XG4gICAgICAgICAgICAgICAgaW5mb1dpZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgICAgICAgICAgICAgY29udGVudDogb3B0cy5jb250ZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgIGlmKCFpbmZvV2lkb3cuZ2V0TWFwKCkpe1xuICAgICAgICAgICAgICAgIGluZm9XaWRvdy5vcGVuKHRoaXMuZ01hcCwgbWFya2VyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvV2lkb3cuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgICB9LFxuICAgICAgZmluZEJ5OiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXJrZXJzLmZpbmQoY2FsbGJhY2spXG4gICAgICB9LFxuICAgICAgcmVtb3ZlQnk6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubWFya2Vycy5maW5kKGNhbGxiYWNrLCBmdW5jdGlvbihtYXJrZXJzKSB7XG4gICAgICAgICAgbWFya2Vycy5mb3JFYWNoKGZ1bmN0aW9uKG1hcmtlcil7XG4gICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIF9jcmVhdGVNYXJrZXI6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgb3B0cy5tYXAgPSB0aGlzLmdNYXA7XG4gICAgICAgIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gTWFwc3RlcjtcbiAgfSgpKTtcblxuICBNYXBzdGVyLmNyZWF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IE1hcHN0ZXIoZWxlbWVudCwgb3B0cyk7XG4gIH07XG5cbiAgd2luZG93Lk1hcHN0ZXIgPSBNYXBzdGVyO1xufSh3aW5kb3csIGdvb2dsZSwgTGlzdCkpOyIsIihmdW5jdGlvbih3aW5kb3csIGdvb2dsZSwgbWFwc3Rlcil7XG4gIHZhciBzdHlsZXMgPSBbXG4gICAge1xuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNmNWY1ZjVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLmljb25cIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNjE2MTYxXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZjVmNWY1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlLmxhbmRfcGFyY2VsXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjYmRiZGJkXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNlZWVlZWVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNzU3NTc1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaS5wYXJrXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2U1ZTVlNVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2kucGFya1wiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzllOWU5ZVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmZmZmZlwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNzU3NTc1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNkYWRhZGFcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5oaWdod2F5XCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNjE2MTYxXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQubG9jYWxcIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiM5ZTllOWVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdC5saW5lXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2U1ZTVlNVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0LnN0YXRpb25cIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZWVlZWVlXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcIndhdGVyXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2M5YzljOVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzllOWU5ZVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIF07XG4gIG1hcHN0ZXIuTUFQX09QVElPTlMgPSB7XG4gICAgY2VudGVyOiB7XG4gICAgICBsYXQ6IDM3Ljc5MTM1MCxcbiAgICAgIGxuZzogLTEyMi40MzU4ODMgIFxuICAgIH0sXG4gICAgem9vbTogMTAsXG4gICAgZGlzYWJsZURlZmF1bHRVSTogZmFsc2UsXG4gICAgc2Nyb2xsd2hlZWw6IHRydWUsXG4gICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXG4gICAgLy8gbWF4Wm9vbTogMTEsXG4gICAgLy8gbWluWm9vbTogOSxcbiAgICB6b29tQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0xFRlQsXG4gICAgICBzdHlsZTogZ29vZ2xlLm1hcHMuWm9vbUNvbnRyb2xTdHlsZS5ERUZBVUxUXG4gICAgfSxcbiAgICBwYW5Db250cm9sT3B0aW9uczoge1xuICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0JPVFRPTVxuICAgIH0sXG4gICAgc3R5bGVzOiBzdHlsZXNcbiAgfVxufSh3aW5kb3csIGdvb2dsZSwgd2luZG93Lk1hcHN0ZXIgfHwgKHdpbmRvdy5NYXBzdGVyID0ge30pKSk7IiwiKGZ1bmN0aW9uKHdpbmRvdywgZ29vZ2xlLCBtYXBzdGVyKXtcbiAgXG4gIC8vbWFwIG9wdGlvbnNcbiAgdmFyIG9wdGlvbnMgPSBtYXBzdGVyLk1BUF9PUFRJT05TO1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtY2FudmFzJyk7XG5cbiAgLy9tYXBcbiAgdmFyIG1hcCA9IG5ldyBtYXBzdGVyLmNyZWF0ZShlbGVtZW50LCBvcHRpb25zKTtcbiAgdmFyIG1hcmtlcjEgPSBtYXAuYWRkTWFya2VyKHtcbiAgICBsYXQ6IDM3Ljc5MTM1MCxcbiAgICBsbmc6IC0xMjIuNDM1ODgzLFxuICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgaWQ6MSxcbiAgICBjb250ZW50OidJIGxpa2UgZm9vZCcsXG4gICAgaWNvbjogJy4uL2ltZy9pY29ucy9tYXAtcGluLnBuZydcbiAgfSk7XG4gIHZhciBtYXJrZXIyID0gbWFwLmFkZE1hcmtlcih7XG4gICAgbGF0OiAzNy44OTEzNTAsXG4gICAgbG5nOiAtMTIyLjUzNTg4MyxcbiAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgIGlkOjIsXG4gICAgY29udGVudDonSSBsaWtlIGZvb2QnLFxuICAgIGljb246ICcuLi9pbWcvaWNvbnMvbWFwLXBpbi5wbmcnXG4gIH0pO1xuXG4gIC8vIHZhciBmb3VuZCA9IG1hcC5maW5kQnkoZnVuY3Rpb24obWFya2VyLCBpbmRleCl7XG4gIC8vICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAvLyAgIHJldHVybiBtYXJrZXIuaWQgPT09IDA7XG4gIC8vIH0pO1xuICBtYXAucmVtb3ZlQnkoZnVuY3Rpb24obWFya2VyKXtcbiAgICByZXR1cm4gbWFya2VyLmlkID09PSAyO1xuICB9KVxuICBjb25zb2xlLmxvZyhtYXAubWFya2Vycylcbn0od2luZG93LCBnb29nbGUsIHdpbmRvdy5NYXBzdGVyIHx8ICh3aW5kb3cuTWFwc3RlciA9IHt9KSkpOyAiXX0=
