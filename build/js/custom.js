function o(t,e,r){this.extend(o,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var i=r||{};this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.imagePath_=i.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=i.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,null!=i.averageCenter&&(this.averageCenter_=i.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=s.map_.getZoom(),e=s.map_.minZoom||0,r=Math.min(s.map_.maxZoom||100,s.map_.mapTypes[s.map_.getMapTypeId()].maxZoom);t=Math.min(Math.max(t,e),r),s.prevZoom_!=t&&(s.prevZoom_=t,s.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){s.redraw()}),e&&(e.length||Object.keys(e).length)&&this.addMarkers(e,!1)}function a(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new i(this,t.getStyles(),t.getGridSize())}function i(t,e,r){t.getMarkerClusterer().extend(i,google.maps.OverlayView),this.styles_=e,this.padding_=r||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}function t(t){this.items=[]}var e,r,s,n,h,l,p;function u(t,e){this.gMap=new n.maps.Map(t,e),this.markers=h.create(),e.cluster&&(this.markerClusterer=new o(this.gMap,[],e.cluster.options))}o.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",o.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",o.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},o.prototype.onAdd=function(){this.setReady_(!0)},o.prototype.draw=function(){},o.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},o.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),r=new google.maps.LatLngBounds,i=0;t=e[i];i++)r.extend(t.getPosition());this.map_.fitBounds(r)},o.prototype.setStyles=function(t){this.styles_=t},o.prototype.getStyles=function(){return this.styles_},o.prototype.isZoomOnClick=function(){return this.zoomOnClick_},o.prototype.isAverageCenter=function(){return this.averageCenter_},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getTotalMarkers=function(){return this.markers_.length},o.prototype.setMaxZoom=function(t){this.maxZoom_=t},o.prototype.getMaxZoom=function(){return this.maxZoom_},o.prototype.calculator_=function(t,e){for(var r=0,i=t.length,s=i;0!==s;)s=parseInt(s/10,10),r++;return{text:i,index:r=Math.min(r,e)}},o.prototype.setCalculator=function(t){this.calculator_=t},o.prototype.getCalculator=function(){return this.calculator_},o.prototype.addMarkers=function(t,e){if(t.length)for(var r=0;i=t[r];r++)this.pushMarkerTo_(i);else if(Object.keys(t).length)for(var i in t)this.pushMarkerTo_(t[i]);e||this.redraw()},o.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},o.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},o.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var r,i=0;r=this.markers_[i];i++)if(r==t){e=i;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},o.prototype.removeMarker=function(t,e){var r=this.removeMarker_(t);return!(e||!r)&&(this.resetViewport(),this.redraw(),!0)},o.prototype.removeMarkers=function(t,e){for(var r,i=!1,s=0;r=t[s];s++){var o=this.removeMarker_(r);i=i||o}if(!e&&i)return this.resetViewport(),this.redraw(),!0},o.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},o.prototype.getTotalClusters=function(){return this.clusters_.length},o.prototype.getMap=function(){return this.map_},o.prototype.setMap=function(t){this.map_=t},o.prototype.getGridSize=function(){return this.gridSize_},o.prototype.setGridSize=function(t){this.gridSize_=t},o.prototype.getMinClusterSize=function(){return this.minClusterSize_},o.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},o.prototype.getExtendedBounds=function(t){var e=this.getProjection(),r=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),i=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),s=e.fromLatLngToDivPixel(r);s.x+=this.gridSize_,s.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(i);o.x-=this.gridSize_,o.y+=this.gridSize_;var n=e.fromDivPixelToLatLng(s),a=e.fromDivPixelToLatLng(o);return t.extend(n),t.extend(a),t},o.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},o.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},o.prototype.resetViewport=function(t){for(var e,r=0;e=this.clusters_[r];r++)e.remove();var i;for(r=0;i=this.markers_[r];r++)i.isAdded=!1,t&&i.setMap(null);this.clusters_=[]},o.prototype.repaint=function(){var r=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,e=0;t=r[e];e++)t.remove()},0)},o.prototype.redraw=function(){this.createClusters_()},o.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var r=(e.lat()-t.lat())*Math.PI/180,i=(e.lng()-t.lng())*Math.PI/180,s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},o.prototype.addToClosestCluster_=function(t){for(var e,r=4e4,i=null,s=(t.getPosition(),0);e=this.clusters_[s];s++){var o=e.getCenter();if(o){var n=this.distanceBetweenPoints_(o,t.getPosition());n<r&&(r=n,i=e)}}i&&i.isMarkerInClusterBounds(t)?i.addMarker(t):((e=new a(this)).addMarker(t),this.clusters_.push(e))},o.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(e),i=0;t=this.markers_[i];i++)!t.isAdded&&this.isMarkerInBounds_(t,r)&&this.addToClosestCluster_(t)},a.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,r=0;e=this.markers_[r];r++)if(e==t)return!0;return!1},a.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,r=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,i=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(r,i),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var s=this.markers_.length;if(s<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),s==this.minClusterSize_)for(var o=0;o<s;o++)this.markers_[o].setMap(null);return s>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},a.prototype.getMarkerClusterer=function(){return this.markerClusterer_},a.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),i=0;t=r[i];i++)e.extend(t.getPosition());return e},a.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},a.prototype.getSize=function(){return this.markers_.length},a.prototype.getMarkers=function(){return this.markers_},a.prototype.getCenter=function(){return this.center_},a.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},a.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},a.prototype.getMap=function(){return this.map_},a.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&e<t)for(var r,i=0;r=this.markers_[i];i++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var s=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,s);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},i.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},i.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",function(){e.triggerClusterClick()})},i.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},i.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},i.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},i.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},i.prototype.remove=function(){this.setMap(null)},i.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},i.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},i.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition},i.prototype.setCenter=function(t){this.center_=t},i.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&0<this.anchor_[1]&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var i=this.textColor_?this.textColor_:"black",s=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+i+"; position:absolute; font-size:"+s+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},e=window,t.prototype={add:function(t){this.items.push(t)},remove:function(t){var e=this.items.indexOf(t);-1!==e&&this.items.splice(e,1)},find:function(t,e){for(var r=this.items,i=r.length,s=[],o=0;o<i;o++)t(r[o],o)&&s.push(r[o]);return e&&e.call(this,s),s}},(r=t).create=function(t){return new r(t)},e.List=r,s=window,n=google,h=List,u.prototype={zoom:function(t){if(!t)return this.gMap.getZoom();this.gMap.setZoom(t)},_on:function(e){var r=this;n.maps.event.addListener(e.obj,e.event,function(t){e.callback.call(r,t)})},addMarker:function(e){var r,i;return e.position={lat:e.lat,lng:e.lng},r=this._createMarker(e),this.markerClusterer&&this.markerClusterer.addMarker(r),this.markers.add(r),e.event&&this._on({obj:r,event:e.event.name,callback:e.event.callback}),e.content&&this._on({obj:r,event:"click",callback:function(t){i||(i=new n.maps.InfoWindow({content:e.content})),i.getMap()?i.close():i.open(this.gMap,r)}}),r},findBy:function(t){return this.markers.find(t)},removeBy:function(t){var e=this;this.markers.find(t,function(t){t.forEach(function(t){e.markerClusterer?e.markerClusterer.removeMarker(t):t.setMap(null)})})},_createMarker:function(t){return t.map=this.gMap,new n.maps.Marker(t)}},(l=u).create=function(t,e){return new l(t,e)},s.Mapster=l,window,p=google,(window.Mapster||(window.Mapster={})).MAP_OPTIONS={center:{lat:37.79135,lng:-122.435883},zoom:10,disableDefaultUI:!1,scrollwheel:!0,draggable:!0,mapTypeId:p.maps.MapTypeId.ROADMAP,zoomControlOptions:{position:p.maps.ControlPosition.BOTTOM_LEFT,style:p.maps.ZoomControlStyle.DEFAULT},panControlOptions:{position:p.maps.ControlPosition.LEFT_BOTTOM},styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],cluster:{options:{styles:[{url:"../img/icons/m1.png",height:55,width:55,textColor:"#333",textSize:18},{url:"../img/icons/m2.png",height:55,width:55,textColor:"#333",textSize:18}]}}},function(t,e,r){for(var i=r.MAP_OPTIONS,s=document.getElementById("map-canvas"),o=new r.create(s,i),n=0;n<40;n++)o.addMarker({lat:37.79135+Math.random(),lng:2*Math.random()-122.435883,draggable:!1,id:n,content:"I like food",icon:"../img/icons/map-pin.png"});o.removeBy(function(t){return 5===t.id})}(window,google,window.Mapster||(window.Mapster={}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcmtlcmNsdXN0ZXJlci5qcyIsIkxpc3QuanMiLCJNYXBzdGVyLmpzIiwibWFwLW9wdGlvbnMuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIk1hcmtlckNsdXN0ZXJlciIsIm1hcCIsIm9wdF9tYXJrZXJzIiwib3B0X29wdGlvbnMiLCJ0aGlzIiwiZXh0ZW5kIiwiZ29vZ2xlIiwibWFwcyIsIk92ZXJsYXlWaWV3IiwibWFwXyIsIm1hcmtlcnNfIiwiY2x1c3RlcnNfIiwic2l6ZXMiLCJzdHlsZXNfIiwicmVhZHlfIiwib3B0aW9ucyIsImdyaWRTaXplXyIsIm1pbkNsdXN0ZXJTaXplXyIsIm1heFpvb21fIiwiaW1hZ2VQYXRoXyIsIk1BUktFUl9DTFVTVEVSX0lNQUdFX1BBVEhfIiwiaW1hZ2VFeHRlbnNpb25fIiwiTUFSS0VSX0NMVVNURVJfSU1BR0VfRVhURU5TSU9OXyIsInpvb21PbkNsaWNrXyIsInVuZGVmaW5lZCIsImF2ZXJhZ2VDZW50ZXJfIiwic2V0dXBTdHlsZXNfIiwic2V0TWFwIiwicHJldlpvb21fIiwiZ2V0Wm9vbSIsInRoYXQiLCJldmVudCIsImFkZExpc3RlbmVyIiwiem9vbSIsIm1pblpvb20iLCJtYXhab29tIiwiTWF0aCIsIm1pbiIsIm1hcFR5cGVzIiwiZ2V0TWFwVHlwZUlkIiwibWF4IiwicmVzZXRWaWV3cG9ydCIsInJlZHJhdyIsImxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJhZGRNYXJrZXJzIiwiQ2x1c3RlciIsIm1hcmtlckNsdXN0ZXJlciIsIm1hcmtlckNsdXN0ZXJlcl8iLCJnZXRNYXAiLCJnZXRHcmlkU2l6ZSIsImdldE1pbkNsdXN0ZXJTaXplIiwiaXNBdmVyYWdlQ2VudGVyIiwiY2VudGVyXyIsImJvdW5kc18iLCJjbHVzdGVySWNvbl8iLCJDbHVzdGVySWNvbiIsImdldFN0eWxlcyIsImNsdXN0ZXIiLCJzdHlsZXMiLCJvcHRfcGFkZGluZyIsImdldE1hcmtlckNsdXN0ZXJlciIsInBhZGRpbmdfIiwiY2x1c3Rlcl8iLCJkaXZfIiwic3Vtc18iLCJ2aXNpYmxlXyIsIkxpc3QiLCJwYXJhbXMiLCJpdGVtcyIsIndpbmRvdyIsIk1hcHN0ZXIiLCJlbGVtZW50Iiwib3B0cyIsImdNYXAiLCJNYXAiLCJtYXJrZXJzIiwiY3JlYXRlIiwicHJvdG90eXBlIiwib2JqMSIsIm9iajIiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImFwcGx5Iiwib25BZGQiLCJzZXRSZWFkeV8iLCJkcmF3Iiwic2l6ZSIsImkiLCJwdXNoIiwidXJsIiwiaGVpZ2h0Iiwid2lkdGgiLCJmaXRNYXBUb01hcmtlcnMiLCJtYXJrZXIiLCJnZXRNYXJrZXJzIiwiYm91bmRzIiwiTGF0TG5nQm91bmRzIiwiZ2V0UG9zaXRpb24iLCJmaXRCb3VuZHMiLCJzZXRTdHlsZXMiLCJpc1pvb21PbkNsaWNrIiwiZ2V0VG90YWxNYXJrZXJzIiwic2V0TWF4Wm9vbSIsImdldE1heFpvb20iLCJjYWxjdWxhdG9yXyIsIm51bVN0eWxlcyIsImluZGV4IiwiY291bnQiLCJkdiIsInBhcnNlSW50IiwidGV4dCIsInNldENhbGN1bGF0b3IiLCJjYWxjdWxhdG9yIiwiZ2V0Q2FsY3VsYXRvciIsIm9wdF9ub2RyYXciLCJwdXNoTWFya2VyVG9fIiwiaXNBZGRlZCIsInJlcGFpbnQiLCJhZGRNYXJrZXIiLCJyZW1vdmVNYXJrZXJfIiwiaW5kZXhPZiIsIm0iLCJzcGxpY2UiLCJyZW1vdmVNYXJrZXIiLCJyZW1vdmVkIiwicmVtb3ZlTWFya2VycyIsInIiLCJyZWFkeSIsImNyZWF0ZUNsdXN0ZXJzXyIsImdldFRvdGFsQ2x1c3RlcnMiLCJzZXRHcmlkU2l6ZSIsInNldE1pbkNsdXN0ZXJTaXplIiwiZ2V0RXh0ZW5kZWRCb3VuZHMiLCJwcm9qZWN0aW9uIiwiZ2V0UHJvamVjdGlvbiIsInRyIiwiTGF0TG5nIiwiZ2V0Tm9ydGhFYXN0IiwibGF0IiwibG5nIiwiYmwiLCJnZXRTb3V0aFdlc3QiLCJ0clBpeCIsImZyb21MYXRMbmdUb0RpdlBpeGVsIiwieCIsInkiLCJibFBpeCIsIm5lIiwiZnJvbURpdlBpeGVsVG9MYXRMbmciLCJzdyIsImlzTWFya2VySW5Cb3VuZHNfIiwiY29udGFpbnMiLCJjbGVhck1hcmtlcnMiLCJvcHRfaGlkZSIsInJlbW92ZSIsIm9sZENsdXN0ZXJzIiwic2xpY2UiLCJzZXRUaW1lb3V0IiwiZGlzdGFuY2VCZXR3ZWVuUG9pbnRzXyIsInAxIiwicDIiLCJkTGF0IiwiUEkiLCJkTG9uIiwiYSIsInNpbiIsImNvcyIsImF0YW4yIiwic3FydCIsImFkZFRvQ2xvc2VzdENsdXN0ZXJfIiwiZGlzdGFuY2UiLCJjbHVzdGVyVG9BZGRUbyIsImNlbnRlciIsImdldENlbnRlciIsImQiLCJpc01hcmtlckluQ2x1c3RlckJvdW5kcyIsIm1hcEJvdW5kcyIsImdldEJvdW5kcyIsImlzTWFya2VyQWxyZWFkeUFkZGVkIiwibCIsImNhbGN1bGF0ZUJvdW5kc18iLCJsZW4iLCJ1cGRhdGVJY29uIiwiZ2V0U2l6ZSIsIm16IiwiaGlkZSIsInN1bXMiLCJzZXRDZW50ZXIiLCJzZXRTdW1zIiwic2hvdyIsInRyaWdnZXJDbHVzdGVyQ2xpY2siLCJ0cmlnZ2VyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicG9zIiwiZ2V0UG9zRnJvbUxhdExuZ18iLCJzdHlsZSIsImNzc1RleHQiLCJjcmVhdGVDc3MiLCJpbm5lckhUTUwiLCJnZXRQYW5lcyIsIm92ZXJsYXlNb3VzZVRhcmdldCIsImFwcGVuZENoaWxkIiwiYWRkRG9tTGlzdGVuZXIiLCJsYXRsbmciLCJ3aWR0aF8iLCJoZWlnaHRfIiwidG9wIiwibGVmdCIsImRpc3BsYXkiLCJvblJlbW92ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInRleHRfIiwiaW5kZXhfIiwidXNlU3R5bGUiLCJ1cmxfIiwidGV4dENvbG9yXyIsImFuY2hvcl8iLCJ0ZXh0U2l6ZV8iLCJiYWNrZ3JvdW5kUG9zaXRpb25fIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwidHh0Q29sb3IiLCJ0eHRTaXplIiwiam9pbiIsImFkZCIsIml0ZW0iLCJmaW5kIiwiY2FsbGJhY2siLCJhY3Rpb24iLCJtYXRjaGVzIiwiY2FsbCIsImxldmVsIiwic2V0Wm9vbSIsIl9vbiIsInNlbGYiLCJvYmoiLCJlIiwiaW5mb1dpZG93IiwicG9zaXRpb24iLCJfY3JlYXRlTWFya2VyIiwibmFtZSIsImNvbnRlbnQiLCJJbmZvV2luZG93IiwiY2xvc2UiLCJvcGVuIiwiZmluZEJ5IiwicmVtb3ZlQnkiLCJmb3JFYWNoIiwiTWFya2VyIiwiTUFQX09QVElPTlMiLCJkaXNhYmxlRGVmYXVsdFVJIiwic2Nyb2xsd2hlZWwiLCJkcmFnZ2FibGUiLCJtYXBUeXBlSWQiLCJNYXBUeXBlSWQiLCJST0FETUFQIiwiem9vbUNvbnRyb2xPcHRpb25zIiwiQ29udHJvbFBvc2l0aW9uIiwiQk9UVE9NX0xFRlQiLCJab29tQ29udHJvbFN0eWxlIiwiREVGQVVMVCIsInBhbkNvbnRyb2xPcHRpb25zIiwiTEVGVF9CT1RUT00iLCJlbGVtZW50VHlwZSIsInN0eWxlcnMiLCJjb2xvciIsInZpc2liaWxpdHkiLCJmZWF0dXJlVHlwZSIsInRleHRDb2xvciIsInRleHRTaXplIiwibWFwc3RlciIsImdldEVsZW1lbnRCeUlkIiwicmFuZG9tIiwiaWQiLCJpY29uIl0sIm1hcHBpbmdzIjoiQUF3REEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FNQUMsS0FBQUMsT0FBQUwsRUFBQU0sT0FBQUMsS0FBQUMsYUFDQUosS0FBQUssS0FBQVIsRUFNQUcsS0FBQU0sU0FBQSxHQUtBTixLQUFBTyxVQUFBLEdBRUFQLEtBQUFRLE1BQUEsQ0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBS0FSLEtBQUFTLFFBQUEsR0FNQVQsS0FBQVUsUUFBQSxFQUVBLElBQUFDLEVBQUFaLEdBQUEsR0FNQUMsS0FBQVksVUFBQUQsRUFBQSxVQUFBLEdBS0FYLEtBQUFhLGdCQUFBRixFQUFBLG9CQUFBLEVBT0FYLEtBQUFjLFNBQUFILEVBQUEsU0FBQSxLQUVBWCxLQUFBUyxRQUFBRSxFQUFBLFFBQUEsR0FNQVgsS0FBQWUs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QWtMLFVBQUEsT0FDQUMsU0FBQSxJQUNBLENBQ0FyTCxJQUFBLHNCQUNBQyxPQUFBLEdBQ0FDLE1BQUEsR0FDQWtMLFVBQUEsT0FDQUMsU0FBQSxRQ25NQSxTQUFBek0sRUFBQWpFLEVBQUEyUSxHQVFBLElBTEEsSUFBQWxRLEVBQUFrUSxFQUFBckIsWUFDQW5MLEVBQUF5SCxTQUFBZ0YsZUFBQSxjQUdBalIsRUFBQSxJQUFBZ1IsRUFBQW5NLE9BQUFMLEVBQUExRCxHQUNBMEUsRUFBQSxFQUFBQSxFQUFBLEdBQUFBLElBQ0F4RixFQUFBdUgsVUFBQSxDQUNBb0IsSUFBQSxTQUFBeEcsS0FBQStPLFNBQ0F0SSxJQUFBLEVBQUF6RyxLQUFBK08sU0FBQSxXQUNBcEIsV0FBQSxFQUNBcUIsR0FBQTNMLEVBQ0EySixRQUFBLGNBQ0FpQyxLQUFBLDZCQUdBcFIsRUFBQXdQLFNBQUEsU0FBQTFKLEdBQ0EsT0FBQSxJQUFBQSxFQUFBcUwsS0FuQkEsQ0FzQkE3TSxPQUFBakUsT0FBQWlFLE9BQUFDLFVBQUFELE9BQUFDLFFBQUEiLCJmaWxlIjoiY3VzdG9tLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbmFtZSBNYXJrZXJDbHVzdGVyZXIgZm9yIEdvb2dsZSBNYXBzIHYzXG4gKiBAdmVyc2lvbiB2ZXJzaW9uIDEuMC4xXG4gKiBAYXV0aG9yIEx1a2UgTWFoZVxuICogQGZpbGVvdmVydmlld1xuICogVGhlIGxpYnJhcnkgY3JlYXRlcyBhbmQgbWFuYWdlcyBwZXItem9vbS1sZXZlbCBjbHVzdGVycyBmb3IgbGFyZ2UgYW1vdW50cyBvZlxuICogbWFya2Vycy5cbiAqIDxici8+XG4gKiBUaGlzIGlzIGEgdjMgaW1wbGVtZW50YXRpb24gb2YgdGhlXG4gKiA8YSBocmVmPVwiaHR0cDovL2dtYXBzLXV0aWxpdHktbGlicmFyeS1kZXYuZ29vZ2xlY29kZS5jb20vc3ZuL3RhZ3MvbWFya2VyY2x1c3RlcmVyL1wiXG4gKiA+djIgTWFya2VyQ2x1c3RlcmVyPC9hPi5cbiAqL1xuXG4vKipcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQSBNYXJrZXIgQ2x1c3RlcmVyIHRoYXQgY2x1c3RlcnMgbWFya2Vycy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcH0gbWFwIFRoZSBHb29nbGUgbWFwIHRvIGF0dGFjaCB0by5cbiAqIEBwYXJhbSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj49fSBvcHRfbWFya2VycyBPcHRpb25hbCBtYXJrZXJzIHRvIGFkZCB0b1xuICogICB0aGUgY2x1c3Rlci5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X29wdGlvbnMgc3VwcG9ydCB0aGUgZm9sbG93aW5nIG9wdGlvbnM6XG4gKiAgICAgJ2dyaWRTaXplJzogKG51bWJlcikgVGhlIGdyaWQgc2l6ZSBvZiBhIGNsdXN0ZXIgaW4gcGl4ZWxzLlxuICogICAgICdtYXhab29tJzogKG51bWJlcikgVGhlIG1heGltdW0gem9vbSBsZXZlbCB0aGF0IGEgbWFya2VyIGNhbiBiZSBwYXJ0IG9mIGFcbiAqICAgICAgICAgICAgICAgIGNsdXN0ZXIuXG4gKiAgICAgJ3pvb21PbkNsaWNrJzogKGJvb2xlYW4pIFdoZXRoZXIgdGhlIGRlZmF1bHQgYmVoYXZpb3VyIG9mIGNsaWNraW5nIG9uIGFcbiAqICAgICAgICAgICAgICAgICAgICBjbHVzdGVyIGlzIHRvIHpvb20gaW50byBpdC5cbiAqICAgICAnYXZlcmFnZUNlbnRlcic6IChib29sZWFuKSBXaGV0aGVyIHRoZSBjZW50ZXIgb2YgZWFjaCBjbHVzdGVyIHNob3VsZCBiZVxuICogICAgICAgICAgICAgICAgICAgICAgdGhlIGF2ZXJhZ2Ugb2YgYWxsIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXIuXG4gKiAgICAgJ21pbmltdW1DbHVzdGVyU2l6ZSc6IChudW1iZXIpIFRoZSBtaW5pbXVtIG51bWJlciBvZiBtYXJrZXJzIHRvIGJlIGluIGFcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlciBiZWZvcmUgdGhlIG1hcmtlcnMgYXJlIGhpZGRlbiBhbmQgYSBjb3VudFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBzaG93bi5cbiAqICAgICAnc3R5bGVzJzogKG9iamVjdCkgQW4gb2JqZWN0IHRoYXQgaGFzIHN0eWxlIHByb3BlcnRpZXM6XG4gKiAgICAgICAndXJsJzogKHN0cmluZykgVGhlIGltYWdlIHVybC5cbiAqICAgICAgICdoZWlnaHQnOiAobnVtYmVyKSBUaGUgaW1hZ2UgaGVpZ2h0LlxuICogICAgICAgJ3dpZHRoJzogKG51bWJlcikgVGhlIGltYWdlIHdpZHRoLlxuICogICAgICAgJ2FuY2hvcic6IChBcnJheSkgVGhlIGFuY2hvciBwb3NpdGlvbiBvZiB0aGUgbGFiZWwgdGV4dC5cbiAqICAgICAgICd0ZXh0Q29sb3InOiAoc3RyaW5nKSBUaGUgdGV4dCBjb2xvci5cbiAqICAgICAgICd0ZXh0U2l6ZSc6IChudW1iZXIpIFRoZSB0ZXh0IHNpemUuXG4gKiAgICAgICAnYmFja2dyb3VuZFBvc2l0aW9uJzogKHN0cmluZykgVGhlIHBvc2l0aW9uIG9mIHRoZSBiYWNrZ291bmQgeCwgeS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXdcbiAqL1xuZnVuY3Rpb24gTWFya2VyQ2x1c3RlcmVyKG1hcCwgb3B0X21hcmtlcnMsIG9wdF9vcHRpb25zKSB7XG4gIC8vIE1hcmtlckNsdXN0ZXJlciBpbXBsZW1lbnRzIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3IGludGVyZmFjZS4gV2UgdXNlIHRoZVxuICAvLyBleHRlbmQgZnVuY3Rpb24gdG8gZXh0ZW5kIE1hcmtlckNsdXN0ZXJlciB3aXRoIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3XG4gIC8vIGJlY2F1c2UgaXQgbWlnaHQgbm90IGFsd2F5cyBiZSBhdmFpbGFibGUgd2hlbiB0aGUgY29kZSBpcyBkZWZpbmVkIHNvIHdlXG4gIC8vIGxvb2sgZm9yIGl0IGF0IHRoZSBsYXN0IHBvc3NpYmxlIG1vbWVudC4gSWYgaXQgZG9lc24ndCBleGlzdCBub3cgdGhlblxuICAvLyB0aGVyZSBpcyBubyBwb2ludCBnb2luZyBhaGVhZCA6KVxuICB0aGlzLmV4dGVuZChNYXJrZXJDbHVzdGVyZXIsIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3KTtcbiAgdGhpcy5tYXBfID0gbWFwO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLm1hcmtlcnNfID0gW107XG5cbiAgLyoqXG4gICAqICBAdHlwZSB7QXJyYXkuPENsdXN0ZXI+fVxuICAgKi9cbiAgdGhpcy5jbHVzdGVyc18gPSBbXTtcblxuICB0aGlzLnNpemVzID0gWzUzLCA1NiwgNjYsIDc4LCA5MF07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnN0eWxlc18gPSBbXTtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnJlYWR5XyA9IGZhbHNlO1xuXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmdyaWRTaXplXyA9IG9wdGlvbnNbJ2dyaWRTaXplJ10gfHwgNjA7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLm1pbkNsdXN0ZXJTaXplXyA9IG9wdGlvbnNbJ21pbmltdW1DbHVzdGVyU2l6ZSddIHx8IDI7XG5cblxuICAvKipcbiAgICogQHR5cGUgez9udW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLm1heFpvb21fID0gb3B0aW9uc1snbWF4Wm9vbSddIHx8IG51bGw7XG5cbiAgdGhpcy5zdHlsZXNfID0gb3B0aW9uc1snc3R5bGVzJ10gfHwgW107XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmltYWdlUGF0aF8gPSBvcHRpb25zWydpbWFnZVBhdGgnXSB8fFxuICAgICAgdGhpcy5NQVJLRVJfQ0xVU1RFUl9JTUFHRV9QQVRIXztcblxuICAvKipcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuaW1hZ2VFeHRlbnNpb25fID0gb3B0aW9uc1snaW1hZ2VFeHRlbnNpb24nXSB8fFxuICAgICAgdGhpcy5NQVJLRVJfQ0xVU1RFUl9JTUFHRV9FWFRFTlNJT05fO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuem9vbU9uQ2xpY2tfID0gdHJ1ZTtcblxuICBpZiAob3B0aW9uc1snem9vbU9uQ2xpY2snXSAhPSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnpvb21PbkNsaWNrXyA9IG9wdGlvbnNbJ3pvb21PbkNsaWNrJ107XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLmF2ZXJhZ2VDZW50ZXJfID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnNbJ2F2ZXJhZ2VDZW50ZXInXSAhPSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmF2ZXJhZ2VDZW50ZXJfID0gb3B0aW9uc1snYXZlcmFnZUNlbnRlciddO1xuICB9XG5cbiAgdGhpcy5zZXR1cFN0eWxlc18oKTtcblxuICB0aGlzLnNldE1hcChtYXApO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5wcmV2Wm9vbV8gPSB0aGlzLm1hcF8uZ2V0Wm9vbSgpO1xuXG4gIC8vIEFkZCB0aGUgbWFwIGV2ZW50IGxpc3RlbmVyc1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwXywgJ3pvb21fY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xuICAgIC8vIERldGVybWluZXMgbWFwIHR5cGUgYW5kIHByZXZlbnQgaWxsZWdhbCB6b29tIGxldmVsc1xuICAgIHZhciB6b29tID0gdGhhdC5tYXBfLmdldFpvb20oKTtcbiAgICB2YXIgbWluWm9vbSA9IHRoYXQubWFwXy5taW5ab29tIHx8IDA7XG4gICAgdmFyIG1heFpvb20gPSBNYXRoLm1pbih0aGF0Lm1hcF8ubWF4Wm9vbSB8fCAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBfLm1hcFR5cGVzW3RoYXQubWFwXy5nZXRNYXBUeXBlSWQoKV0ubWF4Wm9vbSk7XG4gICAgem9vbSA9IE1hdGgubWluKE1hdGgubWF4KHpvb20sbWluWm9vbSksbWF4Wm9vbSk7XG5cbiAgICBpZiAodGhhdC5wcmV2Wm9vbV8gIT0gem9vbSkge1xuICAgICAgdGhhdC5wcmV2Wm9vbV8gPSB6b29tO1xuICAgICAgdGhhdC5yZXNldFZpZXdwb3J0KCk7XG4gICAgfVxuICB9KTtcblxuICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcF8sICdpZGxlJywgZnVuY3Rpb24oKSB7XG4gICAgdGhhdC5yZWRyYXcoKTtcbiAgfSk7XG5cbiAgLy8gRmluYWxseSwgYWRkIHRoZSBtYXJrZXJzXG4gIGlmIChvcHRfbWFya2VycyAmJiAob3B0X21hcmtlcnMubGVuZ3RoIHx8IE9iamVjdC5rZXlzKG9wdF9tYXJrZXJzKS5sZW5ndGgpKSB7XG4gICAgdGhpcy5hZGRNYXJrZXJzKG9wdF9tYXJrZXJzLCBmYWxzZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFRoZSBtYXJrZXIgY2x1c3RlciBpbWFnZSBwYXRoLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLk1BUktFUl9DTFVTVEVSX0lNQUdFX1BBVEhfID0gJy4uL2ltYWdlcy9tJztcblxuXG4vKipcbiAqIFRoZSBtYXJrZXIgY2x1c3RlciBpbWFnZSBwYXRoLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLk1BUktFUl9DTFVTVEVSX0lNQUdFX0VYVEVOU0lPTl8gPSAncG5nJztcblxuXG4vKipcbiAqIEV4dGVuZHMgYSBvYmplY3RzIHByb3RvdHlwZSBieSBhbm90aGVycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkLlxuICogQHBhcmFtIHtPYmplY3R9IG9iajIgVGhlIG9iamVjdCB0byBleHRlbmQgd2l0aC5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIG5ldyBleHRlbmRlZCBvYmplY3QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ob2JqMSwgb2JqMikge1xuICByZXR1cm4gKGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnR5XSA9IG9iamVjdC5wcm90b3R5cGVbcHJvcGVydHldO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfSkuYXBwbHkob2JqMSwgW29iajJdKTtcbn07XG5cblxuLyoqXG4gKiBJbXBsZW1lbnRhaW9uIG9mIHRoZSBpbnRlcmZhY2UgbWV0aG9kLlxuICogQGlnbm9yZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc2V0UmVhZHlfKHRydWUpO1xufTtcblxuLyoqXG4gKiBJbXBsZW1lbnRhaW9uIG9mIHRoZSBpbnRlcmZhY2UgbWV0aG9kLlxuICogQGlnbm9yZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHt9O1xuXG4vKipcbiAqIFNldHMgdXAgdGhlIHN0eWxlcyBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXR1cFN0eWxlc18gPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuc3R5bGVzXy5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgc2l6ZTsgc2l6ZSA9IHRoaXMuc2l6ZXNbaV07IGkrKykge1xuICAgIHRoaXMuc3R5bGVzXy5wdXNoKHtcbiAgICAgIHVybDogdGhpcy5pbWFnZVBhdGhfICsgKGkgKyAxKSArICcuJyArIHRoaXMuaW1hZ2VFeHRlbnNpb25fLFxuICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgd2lkdGg6IHNpemVcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiAgRml0IHRoZSBtYXAgdG8gdGhlIGJvdW5kcyBvZiB0aGUgbWFya2VycyBpbiB0aGUgY2x1c3RlcmVyLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmZpdE1hcFRvTWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgbWFya2VycyA9IHRoaXMuZ2V0TWFya2VycygpO1xuICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgfVxuXG4gIHRoaXMubWFwXy5maXRCb3VuZHMoYm91bmRzKTtcbn07XG5cblxuLyoqXG4gKiAgU2V0cyB0aGUgc3R5bGVzLlxuICpcbiAqICBAcGFyYW0ge09iamVjdH0gc3R5bGVzIFRoZSBzdHlsZSB0byBzZXQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0U3R5bGVzID0gZnVuY3Rpb24oc3R5bGVzKSB7XG4gIHRoaXMuc3R5bGVzXyA9IHN0eWxlcztcbn07XG5cblxuLyoqXG4gKiAgR2V0cyB0aGUgc3R5bGVzLlxuICpcbiAqICBAcmV0dXJuIHtPYmplY3R9IFRoZSBzdHlsZXMgb2JqZWN0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFN0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5zdHlsZXNfO1xufTtcblxuXG4vKipcbiAqIFdoZXRoZXIgem9vbSBvbiBjbGljayBpcyBzZXQuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB6b29tT25DbGlja18gaXMgc2V0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmlzWm9vbU9uQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuem9vbU9uQ2xpY2tfO1xufTtcblxuLyoqXG4gKiBXaGV0aGVyIGF2ZXJhZ2UgY2VudGVyIGlzIHNldC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGF2ZXJhZ2VDZW50ZXJfIGlzIHNldC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5pc0F2ZXJhZ2VDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuYXZlcmFnZUNlbnRlcl87XG59O1xuXG5cbi8qKlxuICogIFJldHVybnMgdGhlIGFycmF5IG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiAgQHJldHVybiB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IFRoZSBtYXJrZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc187XG59O1xuXG5cbi8qKlxuICogIFJldHVybnMgdGhlIG51bWJlciBvZiBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXJcbiAqXG4gKiAgQHJldHVybiB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIG1hcmtlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxNYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcmtlcnNfLmxlbmd0aDtcbn07XG5cblxuLyoqXG4gKiAgU2V0cyB0aGUgbWF4IHpvb20gZm9yIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogIEBwYXJhbSB7bnVtYmVyfSBtYXhab29tIFRoZSBtYXggem9vbSBsZXZlbC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24obWF4Wm9vbSkge1xuICB0aGlzLm1heFpvb21fID0gbWF4Wm9vbTtcbn07XG5cblxuLyoqXG4gKiAgR2V0cyB0aGUgbWF4IHpvb20gZm9yIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogIEByZXR1cm4ge251bWJlcn0gVGhlIG1heCB6b29tIGxldmVsLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWF4Wm9vbV87XG59O1xuXG5cbi8qKlxuICogIFRoZSBmdW5jdGlvbiBmb3IgY2FsY3VsYXRpbmcgdGhlIGNsdXN0ZXIgaWNvbiBpbWFnZS5cbiAqXG4gKiAgQHBhcmFtIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn0gbWFya2VycyBUaGUgbWFya2VycyBpbiB0aGUgY2x1c3RlcmVyLlxuICogIEBwYXJhbSB7bnVtYmVyfSBudW1TdHlsZXMgVGhlIG51bWJlciBvZiBzdHlsZXMgYXZhaWxhYmxlLlxuICogIEByZXR1cm4ge09iamVjdH0gQSBvYmplY3QgcHJvcGVydGllczogJ3RleHQnIChzdHJpbmcpIGFuZCAnaW5kZXgnIChudW1iZXIpLlxuICogIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY2FsY3VsYXRvcl8gPSBmdW5jdGlvbihtYXJrZXJzLCBudW1TdHlsZXMpIHtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGNvdW50ID0gbWFya2Vycy5sZW5ndGg7XG4gIHZhciBkdiA9IGNvdW50O1xuICB3aGlsZSAoZHYgIT09IDApIHtcbiAgICBkdiA9IHBhcnNlSW50KGR2IC8gMTAsIDEwKTtcbiAgICBpbmRleCsrO1xuICB9XG5cbiAgaW5kZXggPSBNYXRoLm1pbihpbmRleCwgbnVtU3R5bGVzKTtcbiAgcmV0dXJuIHtcbiAgICB0ZXh0OiBjb3VudCxcbiAgICBpbmRleDogaW5kZXhcbiAgfTtcbn07XG5cblxuLyoqXG4gKiBTZXQgdGhlIGNhbGN1bGF0b3IgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihBcnJheSwgbnVtYmVyKX0gY2FsY3VsYXRvciBUaGUgZnVuY3Rpb24gdG8gc2V0IGFzIHRoZVxuICogICAgIGNhbGN1bGF0b3IuIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgb2JqZWN0IHByb3BlcnRpZXM6XG4gKiAgICAgJ3RleHQnIChzdHJpbmcpIGFuZCAnaW5kZXgnIChudW1iZXIpLlxuICpcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRDYWxjdWxhdG9yID0gZnVuY3Rpb24oY2FsY3VsYXRvcikge1xuICB0aGlzLmNhbGN1bGF0b3JfID0gY2FsY3VsYXRvcjtcbn07XG5cblxuLyoqXG4gKiBHZXQgdGhlIGNhbGN1bGF0b3IgZnVuY3Rpb24uXG4gKlxuICogQHJldHVybiB7ZnVuY3Rpb24oQXJyYXksIG51bWJlcil9IHRoZSBjYWxjdWxhdG9yIGZ1bmN0aW9uLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldENhbGN1bGF0b3IgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2FsY3VsYXRvcl87XG59O1xuXG5cbi8qKlxuICogQWRkIGFuIGFycmF5IG9mIG1hcmtlcnMgdG8gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIHRvIGFkZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgV2hldGhlciB0byByZWRyYXcgdGhlIGNsdXN0ZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlcnMgPSBmdW5jdGlvbihtYXJrZXJzLCBvcHRfbm9kcmF3KSB7XG4gIGlmIChtYXJrZXJzLmxlbmd0aCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgICAgdGhpcy5wdXNoTWFya2VyVG9fKG1hcmtlcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKG1hcmtlcnMpLmxlbmd0aCkge1xuICAgIGZvciAodmFyIG1hcmtlciBpbiBtYXJrZXJzKSB7XG4gICAgICB0aGlzLnB1c2hNYXJrZXJUb18obWFya2Vyc1ttYXJrZXJdKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFvcHRfbm9kcmF3KSB7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIFB1c2hlcyBhIG1hcmtlciB0byB0aGUgY2x1c3RlcmVyLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBhZGQuXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnB1c2hNYXJrZXJUb18gPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgaWYgKG1hcmtlclsnZHJhZ2dhYmxlJ10pIHtcbiAgICAvLyBJZiB0aGUgbWFya2VyIGlzIGRyYWdnYWJsZSBhZGQgYSBsaXN0ZW5lciBzbyB3ZSB1cGRhdGUgdGhlIGNsdXN0ZXJzIG9uXG4gICAgLy8gdGhlIGRyYWcgZW5kLlxuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdkcmFnZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBtYXJrZXIuaXNBZGRlZCA9IGZhbHNlO1xuICAgICAgdGhhdC5yZXBhaW50KCk7XG4gICAgfSk7XG4gIH1cbiAgdGhpcy5tYXJrZXJzXy5wdXNoKG1hcmtlcik7XG59O1xuXG5cbi8qKlxuICogQWRkcyBhIG1hcmtlciB0byB0aGUgY2x1c3RlcmVyIGFuZCByZWRyYXdzIGlmIG5lZWRlZC5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gYWRkLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBXaGV0aGVyIHRvIHJlZHJhdyB0aGUgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuYWRkTWFya2VyID0gZnVuY3Rpb24obWFya2VyLCBvcHRfbm9kcmF3KSB7XG4gIHRoaXMucHVzaE1hcmtlclRvXyhtYXJrZXIpO1xuICBpZiAoIW9wdF9ub2RyYXcpIHtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyBhIG1hcmtlciBhbmQgcmV0dXJucyB0cnVlIGlmIHJlbW92ZWQsIGZhbHNlIGlmIG5vdFxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byByZW1vdmVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIG1hcmtlciB3YXMgcmVtb3ZlZCBvciBub3RcbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2VyXyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICB2YXIgaW5kZXggPSAtMTtcbiAgaWYgKHRoaXMubWFya2Vyc18uaW5kZXhPZikge1xuICAgIGluZGV4ID0gdGhpcy5tYXJrZXJzXy5pbmRleE9mKG1hcmtlcik7XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIG07IG0gPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgIGlmIChtID09IG1hcmtlcikge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIC8vIE1hcmtlciBpcyBub3QgaW4gb3VyIGxpc3Qgb2YgbWFya2Vycy5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuXG4gIHRoaXMubWFya2Vyc18uc3BsaWNlKGluZGV4LCAxKTtcblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLyoqXG4gKiBSZW1vdmUgYSBtYXJrZXIgZnJvbSB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBPcHRpb25hbCBib29sZWFuIHRvIGZvcmNlIG5vIHJlZHJhdy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciB3YXMgcmVtb3ZlZC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXIsIG9wdF9ub2RyYXcpIHtcbiAgdmFyIHJlbW92ZWQgPSB0aGlzLnJlbW92ZU1hcmtlcl8obWFya2VyKTtcblxuICBpZiAoIW9wdF9ub2RyYXcgJiYgcmVtb3ZlZCkge1xuICAgIHRoaXMucmVzZXRWaWV3cG9ydCgpO1xuICAgIHRoaXMucmVkcmF3KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBSZW1vdmVzIGFuIGFycmF5IG9mIG1hcmtlcnMgZnJvbSB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIHRvIHJlbW92ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgT3B0aW9uYWwgYm9vbGVhbiB0byBmb3JjZSBubyByZWRyYXcuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2VycyA9IGZ1bmN0aW9uKG1hcmtlcnMsIG9wdF9ub2RyYXcpIHtcbiAgdmFyIHJlbW92ZWQgPSBmYWxzZTtcblxuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICB2YXIgciA9IHRoaXMucmVtb3ZlTWFya2VyXyhtYXJrZXIpO1xuICAgIHJlbW92ZWQgPSByZW1vdmVkIHx8IHI7XG4gIH1cblxuICBpZiAoIW9wdF9ub2RyYXcgJiYgcmVtb3ZlZCkge1xuICAgIHRoaXMucmVzZXRWaWV3cG9ydCgpO1xuICAgIHRoaXMucmVkcmF3KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBjbHVzdGVyZXIncyByZWFkeSBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJlYWR5IFRoZSBzdGF0ZS5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0UmVhZHlfID0gZnVuY3Rpb24ocmVhZHkpIHtcbiAgaWYgKCF0aGlzLnJlYWR5Xykge1xuICAgIHRoaXMucmVhZHlfID0gcmVhZHk7XG4gICAgdGhpcy5jcmVhdGVDbHVzdGVyc18oKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG51bWJlciBvZiBjbHVzdGVycyBpbiB0aGUgY2x1c3RlcmVyLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBjbHVzdGVycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRUb3RhbENsdXN0ZXJzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmNsdXN0ZXJzXy5sZW5ndGg7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgZ29vZ2xlIG1hcCB0aGF0IHRoZSBjbHVzdGVyZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLk1hcH0gVGhlIG1hcC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFwXztcbn07XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBnb29nbGUgbWFwIHRoYXQgdGhlIGNsdXN0ZXJlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXB9IG1hcCBUaGUgbWFwLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uKG1hcCkge1xuICB0aGlzLm1hcF8gPSBtYXA7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgZ3JpZC5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmlkIHNpemUuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0R3JpZFNpemUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZ3JpZFNpemVfO1xufTtcblxuXG4vKipcbiAqIFNldHMgdGhlIHNpemUgb2YgdGhlIGdyaWQuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHNpemUgVGhlIGdyaWQgc2l6ZS5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRHcmlkU2l6ZSA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgdGhpcy5ncmlkU2l6ZV8gPSBzaXplO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG1pbiBjbHVzdGVyIHNpemUuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1pbkNsdXN0ZXJTaXplID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1pbkNsdXN0ZXJTaXplXztcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgbWluIGNsdXN0ZXIgc2l6ZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldE1pbkNsdXN0ZXJTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xuICB0aGlzLm1pbkNsdXN0ZXJTaXplXyA9IHNpemU7XG59O1xuXG5cbi8qKlxuICogRXh0ZW5kcyBhIGJvdW5kcyBvYmplY3QgYnkgdGhlIGdyaWQgc2l6ZS5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ0JvdW5kc30gYm91bmRzIFRoZSBib3VuZHMgdG8gZXh0ZW5kLlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSBUaGUgZXh0ZW5kZWQgYm91bmRzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldEV4dGVuZGVkQm91bmRzID0gZnVuY3Rpb24oYm91bmRzKSB7XG4gIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG5cbiAgLy8gVHVybiB0aGUgYm91bmRzIGludG8gbGF0bG5nLlxuICB2YXIgdHIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGJvdW5kcy5nZXROb3J0aEVhc3QoKS5sYXQoKSxcbiAgICAgIGJvdW5kcy5nZXROb3J0aEVhc3QoKS5sbmcoKSk7XG4gIHZhciBibCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLmdldFNvdXRoV2VzdCgpLmxhdCgpLFxuICAgICAgYm91bmRzLmdldFNvdXRoV2VzdCgpLmxuZygpKTtcblxuICAvLyBDb252ZXJ0IHRoZSBwb2ludHMgdG8gcGl4ZWxzIGFuZCB0aGUgZXh0ZW5kIG91dCBieSB0aGUgZ3JpZCBzaXplLlxuICB2YXIgdHJQaXggPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRyKTtcbiAgdHJQaXgueCArPSB0aGlzLmdyaWRTaXplXztcbiAgdHJQaXgueSAtPSB0aGlzLmdyaWRTaXplXztcblxuICB2YXIgYmxQaXggPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKGJsKTtcbiAgYmxQaXgueCAtPSB0aGlzLmdyaWRTaXplXztcbiAgYmxQaXgueSArPSB0aGlzLmdyaWRTaXplXztcblxuICAvLyBDb252ZXJ0IHRoZSBwaXhlbCBwb2ludHMgYmFjayB0byBMYXRMbmdcbiAgdmFyIG5lID0gcHJvamVjdGlvbi5mcm9tRGl2UGl4ZWxUb0xhdExuZyh0clBpeCk7XG4gIHZhciBzdyA9IHByb2plY3Rpb24uZnJvbURpdlBpeGVsVG9MYXRMbmcoYmxQaXgpO1xuXG4gIC8vIEV4dGVuZCB0aGUgYm91bmRzIHRvIGNvbnRhaW4gdGhlIG5ldyBib3VuZHMuXG4gIGJvdW5kcy5leHRlbmQobmUpO1xuICBib3VuZHMuZXh0ZW5kKHN3KTtcblxuICByZXR1cm4gYm91bmRzO1xufTtcblxuXG4vKipcbiAqIERldGVybWlucyBpZiBhIG1hcmtlciBpcyBjb250YWluZWQgaW4gYSBib3VuZHMuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGNoZWNrLlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IGJvdW5kcyBUaGUgYm91bmRzIHRvIGNoZWNrIGFnYWluc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgaXMgaW4gdGhlIGJvdW5kcy5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuaXNNYXJrZXJJbkJvdW5kc18gPSBmdW5jdGlvbihtYXJrZXIsIGJvdW5kcykge1xuICByZXR1cm4gYm91bmRzLmNvbnRhaW5zKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGNsdXN0ZXJzIGFuZCBtYXJrZXJzIGZyb20gdGhlIGNsdXN0ZXJlci5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5jbGVhck1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5yZXNldFZpZXdwb3J0KHRydWUpO1xuXG4gIC8vIFNldCB0aGUgbWFya2VycyBhIGVtcHR5IGFycmF5LlxuICB0aGlzLm1hcmtlcnNfID0gW107XG59O1xuXG5cbi8qKlxuICogQ2xlYXJzIGFsbCBleGlzdGluZyBjbHVzdGVycyBhbmQgcmVjcmVhdGVzIHRoZW0uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdF9oaWRlIFRvIGFsc28gaGlkZSB0aGUgbWFya2VyLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlc2V0Vmlld3BvcnQgPSBmdW5jdGlvbihvcHRfaGlkZSkge1xuICAvLyBSZW1vdmUgYWxsIHRoZSBjbHVzdGVyc1xuICBmb3IgKHZhciBpID0gMCwgY2x1c3RlcjsgY2x1c3RlciA9IHRoaXMuY2x1c3RlcnNfW2ldOyBpKyspIHtcbiAgICBjbHVzdGVyLnJlbW92ZSgpO1xuICB9XG5cbiAgLy8gUmVzZXQgdGhlIG1hcmtlcnMgdG8gbm90IGJlIGFkZGVkIGFuZCB0byBiZSBpbnZpc2libGUuXG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgIG1hcmtlci5pc0FkZGVkID0gZmFsc2U7XG4gICAgaWYgKG9wdF9oaWRlKSB7XG4gICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuY2x1c3RlcnNfID0gW107XG59O1xuXG4vKipcbiAqXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVwYWludCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgb2xkQ2x1c3RlcnMgPSB0aGlzLmNsdXN0ZXJzXy5zbGljZSgpO1xuICB0aGlzLmNsdXN0ZXJzXy5sZW5ndGggPSAwO1xuICB0aGlzLnJlc2V0Vmlld3BvcnQoKTtcbiAgdGhpcy5yZWRyYXcoKTtcblxuICAvLyBSZW1vdmUgdGhlIG9sZCBjbHVzdGVycy5cbiAgLy8gRG8gaXQgaW4gYSB0aW1lb3V0IHNvIHRoZSBvdGhlciBjbHVzdGVycyBoYXZlIGJlZW4gZHJhd24gZmlyc3QuXG4gIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBjbHVzdGVyOyBjbHVzdGVyID0gb2xkQ2x1c3RlcnNbaV07IGkrKykge1xuICAgICAgY2x1c3Rlci5yZW1vdmUoKTtcbiAgICB9XG4gIH0sIDApO1xufTtcblxuXG4vKipcbiAqIFJlZHJhd3MgdGhlIGNsdXN0ZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlZHJhdyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNyZWF0ZUNsdXN0ZXJzXygpO1xufTtcblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIGxhdGxuZyBsb2NhdGlvbnMgaW4ga20uXG4gKiBAc2VlIGh0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvbGF0bG9uZy5odG1sXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IHAxIFRoZSBmaXJzdCBsYXQgbG5nIHBvaW50LlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IHAyIFRoZSBzZWNvbmQgbGF0IGxuZyBwb2ludC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byBwb2ludHMgaW4ga20uXG4gKiBAcHJpdmF0ZVxuKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZGlzdGFuY2VCZXR3ZWVuUG9pbnRzXyA9IGZ1bmN0aW9uKHAxLCBwMikge1xuICBpZiAoIXAxIHx8ICFwMikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIFIgPSA2MzcxOyAvLyBSYWRpdXMgb2YgdGhlIEVhcnRoIGluIGttXG4gIHZhciBkTGF0ID0gKHAyLmxhdCgpIC0gcDEubGF0KCkpICogTWF0aC5QSSAvIDE4MDtcbiAgdmFyIGRMb24gPSAocDIubG5nKCkgLSBwMS5sbmcoKSkgKiBNYXRoLlBJIC8gMTgwO1xuICB2YXIgYSA9IE1hdGguc2luKGRMYXQgLyAyKSAqIE1hdGguc2luKGRMYXQgLyAyKSArXG4gICAgTWF0aC5jb3MocDEubGF0KCkgKiBNYXRoLlBJIC8gMTgwKSAqIE1hdGguY29zKHAyLmxhdCgpICogTWF0aC5QSSAvIDE4MCkgKlxuICAgIE1hdGguc2luKGRMb24gLyAyKSAqIE1hdGguc2luKGRMb24gLyAyKTtcbiAgdmFyIGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpO1xuICB2YXIgZCA9IFIgKiBjO1xuICByZXR1cm4gZDtcbn07XG5cblxuLyoqXG4gKiBBZGQgYSBtYXJrZXIgdG8gYSBjbHVzdGVyLCBvciBjcmVhdGVzIGEgbmV3IGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuYWRkVG9DbG9zZXN0Q2x1c3Rlcl8gPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgdmFyIGRpc3RhbmNlID0gNDAwMDA7IC8vIFNvbWUgbGFyZ2UgbnVtYmVyXG4gIHZhciBjbHVzdGVyVG9BZGRUbyA9IG51bGw7XG4gIHZhciBwb3MgPSBtYXJrZXIuZ2V0UG9zaXRpb24oKTtcbiAgZm9yICh2YXIgaSA9IDAsIGNsdXN0ZXI7IGNsdXN0ZXIgPSB0aGlzLmNsdXN0ZXJzX1tpXTsgaSsrKSB7XG4gICAgdmFyIGNlbnRlciA9IGNsdXN0ZXIuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGNlbnRlcikge1xuICAgICAgdmFyIGQgPSB0aGlzLmRpc3RhbmNlQmV0d2VlblBvaW50c18oY2VudGVyLCBtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG4gICAgICBpZiAoZCA8IGRpc3RhbmNlKSB7XG4gICAgICAgIGRpc3RhbmNlID0gZDtcbiAgICAgICAgY2x1c3RlclRvQWRkVG8gPSBjbHVzdGVyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChjbHVzdGVyVG9BZGRUbyAmJiBjbHVzdGVyVG9BZGRUby5pc01hcmtlckluQ2x1c3RlckJvdW5kcyhtYXJrZXIpKSB7XG4gICAgY2x1c3RlclRvQWRkVG8uYWRkTWFya2VyKG1hcmtlcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNsdXN0ZXIgPSBuZXcgQ2x1c3Rlcih0aGlzKTtcbiAgICBjbHVzdGVyLmFkZE1hcmtlcihtYXJrZXIpO1xuICAgIHRoaXMuY2x1c3RlcnNfLnB1c2goY2x1c3Rlcik7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBjbHVzdGVycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmNyZWF0ZUNsdXN0ZXJzXyA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIXRoaXMucmVhZHlfKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gR2V0IG91ciBjdXJyZW50IG1hcCB2aWV3IGJvdW5kcy5cbiAgLy8gQ3JlYXRlIGEgbmV3IGJvdW5kcyBvYmplY3Qgc28gd2UgZG9uJ3QgYWZmZWN0IHRoZSBtYXAuXG4gIHZhciBtYXBCb3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHRoaXMubWFwXy5nZXRCb3VuZHMoKS5nZXRTb3V0aFdlc3QoKSxcbiAgICAgIHRoaXMubWFwXy5nZXRCb3VuZHMoKS5nZXROb3J0aEVhc3QoKSk7XG4gIHZhciBib3VuZHMgPSB0aGlzLmdldEV4dGVuZGVkQm91bmRzKG1hcEJvdW5kcyk7XG5cbiAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgaWYgKCFtYXJrZXIuaXNBZGRlZCAmJiB0aGlzLmlzTWFya2VySW5Cb3VuZHNfKG1hcmtlciwgYm91bmRzKSkge1xuICAgICAgdGhpcy5hZGRUb0Nsb3Nlc3RDbHVzdGVyXyhtYXJrZXIpO1xuICAgIH1cbiAgfVxufTtcblxuXG4vKipcbiAqIEEgY2x1c3RlciB0aGF0IGNvbnRhaW5zIG1hcmtlcnMuXG4gKlxuICogQHBhcmFtIHtNYXJrZXJDbHVzdGVyZXJ9IG1hcmtlckNsdXN0ZXJlciBUaGUgbWFya2VyY2x1c3RlcmVyIHRoYXQgdGhpc1xuICogICAgIGNsdXN0ZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIENsdXN0ZXIobWFya2VyQ2x1c3RlcmVyKSB7XG4gIHRoaXMubWFya2VyQ2x1c3RlcmVyXyA9IG1hcmtlckNsdXN0ZXJlcjtcbiAgdGhpcy5tYXBfID0gbWFya2VyQ2x1c3RlcmVyLmdldE1hcCgpO1xuICB0aGlzLmdyaWRTaXplXyA9IG1hcmtlckNsdXN0ZXJlci5nZXRHcmlkU2l6ZSgpO1xuICB0aGlzLm1pbkNsdXN0ZXJTaXplXyA9IG1hcmtlckNsdXN0ZXJlci5nZXRNaW5DbHVzdGVyU2l6ZSgpO1xuICB0aGlzLmF2ZXJhZ2VDZW50ZXJfID0gbWFya2VyQ2x1c3RlcmVyLmlzQXZlcmFnZUNlbnRlcigpO1xuICB0aGlzLmNlbnRlcl8gPSBudWxsO1xuICB0aGlzLm1hcmtlcnNfID0gW107XG4gIHRoaXMuYm91bmRzXyA9IG51bGw7XG4gIHRoaXMuY2x1c3Rlckljb25fID0gbmV3IENsdXN0ZXJJY29uKHRoaXMsIG1hcmtlckNsdXN0ZXJlci5nZXRTdHlsZXMoKSxcbiAgICAgIG1hcmtlckNsdXN0ZXJlci5nZXRHcmlkU2l6ZSgpKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbnMgaWYgYSBtYXJrZXIgaXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgaXMgYWxyZWFkeSBhZGRlZC5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuaXNNYXJrZXJBbHJlYWR5QWRkZWQgPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgaWYgKHRoaXMubWFya2Vyc18uaW5kZXhPZikge1xuICAgIHJldHVybiB0aGlzLm1hcmtlcnNfLmluZGV4T2YobWFya2VyKSAhPSAtMTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbTsgbSA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgICAgaWYgKG0gPT0gbWFya2VyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5cbi8qKlxuICogQWRkIGEgbWFya2VyIHRoZSBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBhZGQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgd2FzIGFkZGVkLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5hZGRNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgaWYgKHRoaXMuaXNNYXJrZXJBbHJlYWR5QWRkZWQobWFya2VyKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICghdGhpcy5jZW50ZXJfKSB7XG4gICAgdGhpcy5jZW50ZXJfID0gbWFya2VyLmdldFBvc2l0aW9uKCk7XG4gICAgdGhpcy5jYWxjdWxhdGVCb3VuZHNfKCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoaXMuYXZlcmFnZUNlbnRlcl8pIHtcbiAgICAgIHZhciBsID0gdGhpcy5tYXJrZXJzXy5sZW5ndGggKyAxO1xuICAgICAgdmFyIGxhdCA9ICh0aGlzLmNlbnRlcl8ubGF0KCkgKiAobC0xKSArIG1hcmtlci5nZXRQb3NpdGlvbigpLmxhdCgpKSAvIGw7XG4gICAgICB2YXIgbG5nID0gKHRoaXMuY2VudGVyXy5sbmcoKSAqIChsLTEpICsgbWFya2VyLmdldFBvc2l0aW9uKCkubG5nKCkpIC8gbDtcbiAgICAgIHRoaXMuY2VudGVyXyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LCBsbmcpO1xuICAgICAgdGhpcy5jYWxjdWxhdGVCb3VuZHNfKCk7XG4gICAgfVxuICB9XG5cbiAgbWFya2VyLmlzQWRkZWQgPSB0cnVlO1xuICB0aGlzLm1hcmtlcnNfLnB1c2gobWFya2VyKTtcblxuICB2YXIgbGVuID0gdGhpcy5tYXJrZXJzXy5sZW5ndGg7XG4gIGlmIChsZW4gPCB0aGlzLm1pbkNsdXN0ZXJTaXplXyAmJiBtYXJrZXIuZ2V0TWFwKCkgIT0gdGhpcy5tYXBfKSB7XG4gICAgLy8gTWluIGNsdXN0ZXIgc2l6ZSBub3QgcmVhY2hlZCBzbyBzaG93IHRoZSBtYXJrZXIuXG4gICAgbWFya2VyLnNldE1hcCh0aGlzLm1hcF8pO1xuICB9XG5cbiAgaWYgKGxlbiA9PSB0aGlzLm1pbkNsdXN0ZXJTaXplXykge1xuICAgIC8vIEhpZGUgdGhlIG1hcmtlcnMgdGhhdCB3ZXJlIHNob3dpbmcuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdGhpcy5tYXJrZXJzX1tpXS5zZXRNYXAobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGxlbiA+PSB0aGlzLm1pbkNsdXN0ZXJTaXplXykge1xuICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gIH1cblxuICB0aGlzLnVwZGF0ZUljb24oKTtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWFya2VyIGNsdXN0ZXJlciB0aGF0IHRoZSBjbHVzdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcmV0dXJuIHtNYXJrZXJDbHVzdGVyZXJ9IFRoZSBhc3NvY2lhdGVkIG1hcmtlciBjbHVzdGVyZXIuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldE1hcmtlckNsdXN0ZXJlciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJDbHVzdGVyZXJfO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGJvdW5kcyBvZiB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IHRoZSBjbHVzdGVyIGJvdW5kcy5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0Qm91bmRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHRoaXMuY2VudGVyXywgdGhpcy5jZW50ZXJfKTtcbiAgdmFyIG1hcmtlcnMgPSB0aGlzLmdldE1hcmtlcnMoKTtcbiAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gbWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgYm91bmRzLmV4dGVuZChtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG4gIH1cbiAgcmV0dXJuIGJvdW5kcztcbn07XG5cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBjbHVzdGVyXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNsdXN0ZXJJY29uXy5yZW1vdmUoKTtcbiAgdGhpcy5tYXJrZXJzXy5sZW5ndGggPSAwO1xuICBkZWxldGUgdGhpcy5tYXJrZXJzXztcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjZW50ZXIgb2YgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgY2x1c3RlciBjZW50ZXIuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc18ubGVuZ3RoO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGNlbnRlciBvZiB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn0gVGhlIGNsdXN0ZXIgY2VudGVyLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRNYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcmtlcnNfO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGNlbnRlciBvZiB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5MYXRMbmd9IFRoZSBjbHVzdGVyIGNlbnRlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmNlbnRlcl87XG59O1xuXG5cbi8qKlxuICogQ2FsY3VsYXRlZCB0aGUgZXh0ZW5kZWQgYm91bmRzIG9mIHRoZSBjbHVzdGVyIHdpdGggdGhlIGdyaWQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuY2FsY3VsYXRlQm91bmRzXyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLmNlbnRlcl8sIHRoaXMuY2VudGVyXyk7XG4gIHRoaXMuYm91bmRzXyA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRFeHRlbmRlZEJvdW5kcyhib3VuZHMpO1xufTtcblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSBtYXJrZXIgbGllcyBpbiB0aGUgY2x1c3RlcnMgYm91bmRzLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciBsaWVzIGluIHRoZSBib3VuZHMuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmlzTWFya2VySW5DbHVzdGVyQm91bmRzID0gZnVuY3Rpb24obWFya2VyKSB7XG4gIHJldHVybiB0aGlzLmJvdW5kc18uY29udGFpbnMobWFya2VyLmdldFBvc2l0aW9uKCkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG1hcCB0aGF0IHRoZSBjbHVzdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5NYXB9IFRoZSBtYXAuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXBfO1xufTtcblxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGNsdXN0ZXIgaWNvblxuICovXG5DbHVzdGVyLnByb3RvdHlwZS51cGRhdGVJY29uID0gZnVuY3Rpb24oKSB7XG4gIHZhciB6b29tID0gdGhpcy5tYXBfLmdldFpvb20oKTtcbiAgdmFyIG16ID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldE1heFpvb20oKTtcblxuICBpZiAobXogJiYgem9vbSA+IG16KSB7XG4gICAgLy8gVGhlIHpvb20gaXMgZ3JlYXRlciB0aGFuIG91ciBtYXggem9vbSBzbyBzaG93IGFsbCB0aGUgbWFya2VycyBpbiBjbHVzdGVyLlxuICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgICAgbWFya2VyLnNldE1hcCh0aGlzLm1hcF8pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodGhpcy5tYXJrZXJzXy5sZW5ndGggPCB0aGlzLm1pbkNsdXN0ZXJTaXplXykge1xuICAgIC8vIE1pbiBjbHVzdGVyIHNpemUgbm90IHlldCByZWFjaGVkLlxuICAgIHRoaXMuY2x1c3Rlckljb25fLmhpZGUoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbnVtU3R5bGVzID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldFN0eWxlcygpLmxlbmd0aDtcbiAgdmFyIHN1bXMgPSB0aGlzLm1hcmtlckNsdXN0ZXJlcl8uZ2V0Q2FsY3VsYXRvcigpKHRoaXMubWFya2Vyc18sIG51bVN0eWxlcyk7XG4gIHRoaXMuY2x1c3Rlckljb25fLnNldENlbnRlcih0aGlzLmNlbnRlcl8pO1xuICB0aGlzLmNsdXN0ZXJJY29uXy5zZXRTdW1zKHN1bXMpO1xuICB0aGlzLmNsdXN0ZXJJY29uXy5zaG93KCk7XG59O1xuXG5cbi8qKlxuICogQSBjbHVzdGVyIGljb25cbiAqXG4gKiBAcGFyYW0ge0NsdXN0ZXJ9IGNsdXN0ZXIgVGhlIGNsdXN0ZXIgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLlxuICogQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBBbiBvYmplY3QgdGhhdCBoYXMgc3R5bGUgcHJvcGVydGllczpcbiAqICAgICAndXJsJzogKHN0cmluZykgVGhlIGltYWdlIHVybC5cbiAqICAgICAnaGVpZ2h0JzogKG51bWJlcikgVGhlIGltYWdlIGhlaWdodC5cbiAqICAgICAnd2lkdGgnOiAobnVtYmVyKSBUaGUgaW1hZ2Ugd2lkdGguXG4gKiAgICAgJ2FuY2hvcic6IChBcnJheSkgVGhlIGFuY2hvciBwb3NpdGlvbiBvZiB0aGUgbGFiZWwgdGV4dC5cbiAqICAgICAndGV4dENvbG9yJzogKHN0cmluZykgVGhlIHRleHQgY29sb3IuXG4gKiAgICAgJ3RleHRTaXplJzogKG51bWJlcikgVGhlIHRleHQgc2l6ZS5cbiAqICAgICAnYmFja2dyb3VuZFBvc2l0aW9uOiAoc3RyaW5nKSBUaGUgYmFja2dyb3VuZCBwb3N0aXRpb24geCwgeS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3BhZGRpbmcgT3B0aW9uYWwgcGFkZGluZyB0byBhcHBseSB0byB0aGUgY2x1c3RlciBpY29uLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBnb29nbGUubWFwcy5PdmVybGF5Vmlld1xuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBDbHVzdGVySWNvbihjbHVzdGVyLCBzdHlsZXMsIG9wdF9wYWRkaW5nKSB7XG4gIGNsdXN0ZXIuZ2V0TWFya2VyQ2x1c3RlcmVyKCkuZXh0ZW5kKENsdXN0ZXJJY29uLCBnb29nbGUubWFwcy5PdmVybGF5Vmlldyk7XG5cbiAgdGhpcy5zdHlsZXNfID0gc3R5bGVzO1xuICB0aGlzLnBhZGRpbmdfID0gb3B0X3BhZGRpbmcgfHwgMDtcbiAgdGhpcy5jbHVzdGVyXyA9IGNsdXN0ZXI7XG4gIHRoaXMuY2VudGVyXyA9IG51bGw7XG4gIHRoaXMubWFwXyA9IGNsdXN0ZXIuZ2V0TWFwKCk7XG4gIHRoaXMuZGl2XyA9IG51bGw7XG4gIHRoaXMuc3Vtc18gPSBudWxsO1xuICB0aGlzLnZpc2libGVfID0gZmFsc2U7XG5cbiAgdGhpcy5zZXRNYXAodGhpcy5tYXBfKTtcbn1cblxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjbHVzdGVyY2xpY2sgZXZlbnQgYW5kIHpvb20ncyBpZiB0aGUgb3B0aW9uIGlzIHNldC5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnRyaWdnZXJDbHVzdGVyQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgdmFyIG1hcmtlckNsdXN0ZXJlciA9IHRoaXMuY2x1c3Rlcl8uZ2V0TWFya2VyQ2x1c3RlcmVyKCk7XG5cbiAgLy8gVHJpZ2dlciB0aGUgY2x1c3RlcmNsaWNrIGV2ZW50LlxuICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKG1hcmtlckNsdXN0ZXJlciwgJ2NsdXN0ZXJjbGljaycsIHRoaXMuY2x1c3Rlcl8pO1xuXG4gIGlmIChtYXJrZXJDbHVzdGVyZXIuaXNab29tT25DbGljaygpKSB7XG4gICAgLy8gWm9vbSBpbnRvIHRoZSBjbHVzdGVyLlxuICAgIHRoaXMubWFwXy5maXRCb3VuZHModGhpcy5jbHVzdGVyXy5nZXRCb3VuZHMoKSk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBBZGRpbmcgdGhlIGNsdXN0ZXIgaWNvbiB0byB0aGUgZG9tLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUub25BZGQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5kaXZfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gIGlmICh0aGlzLnZpc2libGVfKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuZ2V0UG9zRnJvbUxhdExuZ18odGhpcy5jZW50ZXJfKTtcbiAgICB0aGlzLmRpdl8uc3R5bGUuY3NzVGV4dCA9IHRoaXMuY3JlYXRlQ3NzKHBvcyk7XG4gICAgdGhpcy5kaXZfLmlubmVySFRNTCA9IHRoaXMuc3Vtc18udGV4dDtcbiAgfVxuXG4gIHZhciBwYW5lcyA9IHRoaXMuZ2V0UGFuZXMoKTtcbiAgcGFuZXMub3ZlcmxheU1vdXNlVGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZGl2Xyk7XG5cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih0aGlzLmRpdl8sICdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIHRoYXQudHJpZ2dlckNsdXN0ZXJDbGljaygpO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiB0byBwbGFjZSB0aGUgZGl2IGRlbmRpbmcgb24gdGhlIGxhdGxuZy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ30gbGF0bG5nIFRoZSBwb3NpdGlvbiBpbiBsYXRsbmcuXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5Qb2ludH0gVGhlIHBvc2l0aW9uIGluIHBpeGVscy5cbiAqIEBwcml2YXRlXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5nZXRQb3NGcm9tTGF0TG5nXyA9IGZ1bmN0aW9uKGxhdGxuZykge1xuICB2YXIgcG9zID0gdGhpcy5nZXRQcm9qZWN0aW9uKCkuZnJvbUxhdExuZ1RvRGl2UGl4ZWwobGF0bG5nKTtcbiAgcG9zLnggLT0gcGFyc2VJbnQodGhpcy53aWR0aF8gLyAyLCAxMCk7XG4gIHBvcy55IC09IHBhcnNlSW50KHRoaXMuaGVpZ2h0XyAvIDIsIDEwKTtcbiAgcmV0dXJuIHBvcztcbn07XG5cblxuLyoqXG4gKiBEcmF3IHRoZSBpY29uLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy52aXNpYmxlXykge1xuICAgIHZhciBwb3MgPSB0aGlzLmdldFBvc0Zyb21MYXRMbmdfKHRoaXMuY2VudGVyXyk7XG4gICAgdGhpcy5kaXZfLnN0eWxlLnRvcCA9IHBvcy55ICsgJ3B4JztcbiAgICB0aGlzLmRpdl8uc3R5bGUubGVmdCA9IHBvcy54ICsgJ3B4JztcbiAgfVxufTtcblxuXG4vKipcbiAqIEhpZGUgdGhlIGljb24uXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB0aGlzLmRpdl8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuICB0aGlzLnZpc2libGVfID0gZmFsc2U7XG59O1xuXG5cbi8qKlxuICogUG9zaXRpb24gYW5kIHNob3cgdGhlIGljb24uXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5jc3NUZXh0ID0gdGhpcy5jcmVhdGVDc3MocG9zKTtcbiAgICB0aGlzLmRpdl8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9XG4gIHRoaXMudmlzaWJsZV8gPSB0cnVlO1xufTtcblxuXG4vKipcbiAqIFJlbW92ZSB0aGUgaWNvbiBmcm9tIHRoZSBtYXBcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNldE1hcChudWxsKTtcbn07XG5cblxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgb25SZW1vdmUgaW50ZXJmYWNlLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUub25SZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuZGl2XyAmJiB0aGlzLmRpdl8ucGFyZW50Tm9kZSkge1xuICAgIHRoaXMuaGlkZSgpO1xuICAgIHRoaXMuZGl2Xy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGl2Xyk7XG4gICAgdGhpcy5kaXZfID0gbnVsbDtcbiAgfVxufTtcblxuXG4vKipcbiAqIFNldCB0aGUgc3VtcyBvZiB0aGUgaWNvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3VtcyBUaGUgc3VtcyBjb250YWluaW5nOlxuICogICAndGV4dCc6IChzdHJpbmcpIFRoZSB0ZXh0IHRvIGRpc3BsYXkgaW4gdGhlIGljb24uXG4gKiAgICdpbmRleCc6IChudW1iZXIpIFRoZSBzdHlsZSBpbmRleCBvZiB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnNldFN1bXMgPSBmdW5jdGlvbihzdW1zKSB7XG4gIHRoaXMuc3Vtc18gPSBzdW1zO1xuICB0aGlzLnRleHRfID0gc3Vtcy50ZXh0O1xuICB0aGlzLmluZGV4XyA9IHN1bXMuaW5kZXg7XG4gIGlmICh0aGlzLmRpdl8pIHtcbiAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gc3Vtcy50ZXh0O1xuICB9XG5cbiAgdGhpcy51c2VTdHlsZSgpO1xufTtcblxuXG4vKipcbiAqIFNldHMgdGhlIGljb24gdG8gdGhlIHRoZSBzdHlsZXMuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS51c2VTdHlsZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLnN1bXNfLmluZGV4IC0gMSk7XG4gIGluZGV4ID0gTWF0aC5taW4odGhpcy5zdHlsZXNfLmxlbmd0aCAtIDEsIGluZGV4KTtcbiAgdmFyIHN0eWxlID0gdGhpcy5zdHlsZXNfW2luZGV4XTtcbiAgdGhpcy51cmxfID0gc3R5bGVbJ3VybCddO1xuICB0aGlzLmhlaWdodF8gPSBzdHlsZVsnaGVpZ2h0J107XG4gIHRoaXMud2lkdGhfID0gc3R5bGVbJ3dpZHRoJ107XG4gIHRoaXMudGV4dENvbG9yXyA9IHN0eWxlWyd0ZXh0Q29sb3InXTtcbiAgdGhpcy5hbmNob3JfID0gc3R5bGVbJ2FuY2hvciddO1xuICB0aGlzLnRleHRTaXplXyA9IHN0eWxlWyd0ZXh0U2l6ZSddO1xuICB0aGlzLmJhY2tncm91bmRQb3NpdGlvbl8gPSBzdHlsZVsnYmFja2dyb3VuZFBvc2l0aW9uJ107XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgY2VudGVyIG9mIHRoZSBpY29uLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBjZW50ZXIgVGhlIGxhdGxuZyB0byBzZXQgYXMgdGhlIGNlbnRlci5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnNldENlbnRlciA9IGZ1bmN0aW9uKGNlbnRlcikge1xuICB0aGlzLmNlbnRlcl8gPSBjZW50ZXI7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlIHRoZSBjc3MgdGV4dCBiYXNlZCBvbiB0aGUgcG9zaXRpb24gb2YgdGhlIGljb24uXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5Qb2ludH0gcG9zIFRoZSBwb3NpdGlvbi5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNzcyBzdHlsZSB0ZXh0LlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuY3JlYXRlQ3NzID0gZnVuY3Rpb24ocG9zKSB7XG4gIHZhciBzdHlsZSA9IFtdO1xuICBzdHlsZS5wdXNoKCdiYWNrZ3JvdW5kLWltYWdlOnVybCgnICsgdGhpcy51cmxfICsgJyk7Jyk7XG4gIHZhciBiYWNrZ3JvdW5kUG9zaXRpb24gPSB0aGlzLmJhY2tncm91bmRQb3NpdGlvbl8gPyB0aGlzLmJhY2tncm91bmRQb3NpdGlvbl8gOiAnMCAwJztcbiAgc3R5bGUucHVzaCgnYmFja2dyb3VuZC1wb3NpdGlvbjonICsgYmFja2dyb3VuZFBvc2l0aW9uICsgJzsnKTtcblxuICBpZiAodHlwZW9mIHRoaXMuYW5jaG9yXyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuYW5jaG9yX1swXSA9PT0gJ251bWJlcicgJiYgdGhpcy5hbmNob3JfWzBdID4gMCAmJlxuICAgICAgICB0aGlzLmFuY2hvcl9bMF0gPCB0aGlzLmhlaWdodF8pIHtcbiAgICAgIHN0eWxlLnB1c2goJ2hlaWdodDonICsgKHRoaXMuaGVpZ2h0XyAtIHRoaXMuYW5jaG9yX1swXSkgK1xuICAgICAgICAgICdweDsgcGFkZGluZy10b3A6JyArIHRoaXMuYW5jaG9yX1swXSArICdweDsnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUucHVzaCgnaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gKyAncHg7IGxpbmUtaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gK1xuICAgICAgICAgICdweDsnKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl9bMV0gPT09ICdudW1iZXInICYmIHRoaXMuYW5jaG9yX1sxXSA+IDAgJiZcbiAgICAgICAgdGhpcy5hbmNob3JfWzFdIDwgdGhpcy53aWR0aF8pIHtcbiAgICAgIHN0eWxlLnB1c2goJ3dpZHRoOicgKyAodGhpcy53aWR0aF8gLSB0aGlzLmFuY2hvcl9bMV0pICtcbiAgICAgICAgICAncHg7IHBhZGRpbmctbGVmdDonICsgdGhpcy5hbmNob3JfWzFdICsgJ3B4OycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5wdXNoKCd3aWR0aDonICsgdGhpcy53aWR0aF8gKyAncHg7IHRleHQtYWxpZ246Y2VudGVyOycpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5wdXNoKCdoZWlnaHQ6JyArIHRoaXMuaGVpZ2h0XyArICdweDsgbGluZS1oZWlnaHQ6JyArXG4gICAgICAgIHRoaXMuaGVpZ2h0XyArICdweDsgd2lkdGg6JyArIHRoaXMud2lkdGhfICsgJ3B4OyB0ZXh0LWFsaWduOmNlbnRlcjsnKTtcbiAgfVxuXG4gIHZhciB0eHRDb2xvciA9IHRoaXMudGV4dENvbG9yXyA/IHRoaXMudGV4dENvbG9yXyA6ICdibGFjayc7XG4gIHZhciB0eHRTaXplID0gdGhpcy50ZXh0U2l6ZV8gPyB0aGlzLnRleHRTaXplXyA6IDExO1xuXG4gIHN0eWxlLnB1c2goJ2N1cnNvcjpwb2ludGVyOyB0b3A6JyArIHBvcy55ICsgJ3B4OyBsZWZ0OicgK1xuICAgICAgcG9zLnggKyAncHg7IGNvbG9yOicgKyB0eHRDb2xvciArICc7IHBvc2l0aW9uOmFic29sdXRlOyBmb250LXNpemU6JyArXG4gICAgICB0eHRTaXplICsgJ3B4OyBmb250LWZhbWlseTpBcmlhbCxzYW5zLXNlcmlmOyBmb250LXdlaWdodDpib2xkJyk7XG4gIHJldHVybiBzdHlsZS5qb2luKCcnKTtcbn07XG4iLCIoZnVuY3Rpb24od2luZG93KXtcbiAgdmFyIExpc3QgPSAoZnVuY3Rpb24oKXtcbiAgICBmdW5jdGlvbiBMaXN0KHBhcmFtcyl7XG4gICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgfTtcbiAgICBMaXN0LnByb3RvdHlwZSA9IHtcbiAgICAgIGFkZDogZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uKGl0ZW0peyBcbiAgICAgICAgdmFyIGluZGV4T2YgPSB0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSk7XG4gICAgICAgIGlmIChpbmRleE9mICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4T2YsIDEpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmluZDogZnVuY3Rpb24oY2FsbGJhY2ssIGFjdGlvbil7XG4gICAgICAgIHZhciBjYWxsYmFja1JldHVybixcbiAgICAgICAgICAgIGl0ZW1zID0gdGhpcy5pdGVtcyxcbiAgICAgICAgICAgIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIG1hdGNoZXMgPSBbXSxcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICBcbiAgICAgICAgZm9yKDsgaSA8IGxlbmd0aDsgaSsrKXtcbiAgICAgICAgICBjYWxsYmFja1JldHVybiA9IGNhbGxiYWNrKGl0ZW1zW2ldLCBpKTtcbiAgICAgICAgICBpZihjYWxsYmFja1JldHVybikge1xuICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGl0ZW1zW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgYWN0aW9uLmNhbGwodGhpcywgbWF0Y2hlcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gTGlzdDtcbiAgfSgpKTtcbiAgTGlzdC5jcmVhdGUgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IExpc3QocGFyYW1zKTtcbiAgfVxuICB3aW5kb3cuTGlzdCA9IExpc3Q7XG59KHdpbmRvdykpOyIsIihmdW5jdGlvbih3aW5kb3csIGdvb2dsZSwgTGlzdCkge1xuXG4gIHZhciBNYXBzdGVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIE1hcHN0ZXIoZWxlbWVudCwgb3B0cykge1xuICAgICAgdGhpcy5nTWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtZW50LCBvcHRzKTtcbiAgICAgIHRoaXMubWFya2VycyA9IExpc3QuY3JlYXRlKCk7XG4gICAgICBpZiAob3B0cy5jbHVzdGVyKSB7XG4gICAgICAgIHRoaXMubWFya2VyQ2x1c3RlcmVyID0gbmV3IE1hcmtlckNsdXN0ZXJlcih0aGlzLmdNYXAsIFtdLCBvcHRzLmNsdXN0ZXIub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICAgIE1hcHN0ZXIucHJvdG90eXBlID0ge1xuICAgICAgem9vbTogZnVuY3Rpb24obGV2ZWwpIHtcbiAgICAgICAgaWYobGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLmdNYXAuc2V0Wm9vbShsZXZlbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ01hcC5nZXRab29tKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBfb246IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihvcHRzLm9iaiwgb3B0cy5ldmVudCwgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgb3B0cy5jYWxsYmFjay5jYWxsKHNlbGYsIGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBhZGRNYXJrZXI6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgdmFyIG1hcmtlcjtcbiAgICAgICAgdmFyIGluZm9XaWRvdztcbiAgICAgICAgb3B0cy5wb3NpdGlvbiA9IHtcbiAgICAgICAgICBsYXQ6IG9wdHMubGF0LFxuICAgICAgICAgIGxuZzogb3B0cy5sbmdcbiAgICAgICAgfVxuICAgICAgICBtYXJrZXIgPSB0aGlzLl9jcmVhdGVNYXJrZXIob3B0cyk7XG4gICAgICAgIGlmKHRoaXMubWFya2VyQ2x1c3RlcmVyKSB7XG4gICAgICAgICAgdGhpcy5tYXJrZXJDbHVzdGVyZXIuYWRkTWFya2VyKG1hcmtlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXJrZXJzLmFkZChtYXJrZXIpO1xuICAgICAgICBpZiAob3B0cy5ldmVudCkge1xuICAgICAgICAgIHRoaXMuX29uKHtcbiAgICAgICAgICAgIG9iajogbWFya2VyLFxuICAgICAgICAgICAgZXZlbnQ6IG9wdHMuZXZlbnQubmFtZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBvcHRzLmV2ZW50LmNhbGxiYWNrXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5jb250ZW50KSB7XG4gICAgICAgICAgdGhpcy5fb24oe1xuICAgICAgICAgICAgb2JqOiBtYXJrZXIsXG4gICAgICAgICAgICBldmVudDogJ2NsaWNrJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihlKSB7ICAgICAgIFxuICAgICAgICAgICAgICBpZiAoIWluZm9XaWRvdyl7XG4gICAgICAgICAgICAgICAgaW5mb1dpZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgICAgICAgICAgICAgY29udGVudDogb3B0cy5jb250ZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgIGlmKCFpbmZvV2lkb3cuZ2V0TWFwKCkpe1xuICAgICAgICAgICAgICAgIGluZm9XaWRvdy5vcGVuKHRoaXMuZ01hcCwgbWFya2VyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvV2lkb3cuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgICB9LFxuICAgICAgZmluZEJ5OiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXJrZXJzLmZpbmQoY2FsbGJhY2spXG4gICAgICB9LFxuICAgICAgcmVtb3ZlQnk6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5tYXJrZXJzLmZpbmQoY2FsbGJhY2ssIGZ1bmN0aW9uKG1hcmtlcnMpIHtcbiAgICAgICAgICBtYXJrZXJzLmZvckVhY2goZnVuY3Rpb24obWFya2VyKXtcbiAgICAgICAgICAgIGlmKHNlbGYubWFya2VyQ2x1c3RlcmVyKXtcbiAgICAgICAgICAgICAgc2VsZi5tYXJrZXJDbHVzdGVyZXIucmVtb3ZlTWFya2VyKG1hcmtlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIF9jcmVhdGVNYXJrZXI6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgb3B0cy5tYXAgPSB0aGlzLmdNYXA7XG4gICAgICAgIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gTWFwc3RlcjtcbiAgfSgpKTtcblxuICBNYXBzdGVyLmNyZWF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IE1hcHN0ZXIoZWxlbWVudCwgb3B0cyk7XG4gIH07XG5cbiAgd2luZG93Lk1hcHN0ZXIgPSBNYXBzdGVyO1xufSh3aW5kb3csIGdvb2dsZSwgTGlzdCkpOyIsIihmdW5jdGlvbih3aW5kb3csIGdvb2dsZSwgbWFwc3Rlcil7XG4gIHZhciBzdHlsZXMgPSBbXG4gICAge1xuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNmNWY1ZjVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLmljb25cIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNjE2MTYxXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LnN0cm9rZVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZjVmNWY1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlLmxhbmRfcGFyY2VsXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjYmRiZGJkXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNlZWVlZWVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNzU3NTc1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaS5wYXJrXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2U1ZTVlNVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2kucGFya1wiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzllOWU5ZVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmZmZmZlwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNzU3NTc1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNkYWRhZGFcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5oaWdod2F5XCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjNjE2MTYxXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQubG9jYWxcIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiM5ZTllOWVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdC5saW5lXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2U1ZTVlNVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0LnN0YXRpb25cIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZWVlZWVlXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcIndhdGVyXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2M5YzljOVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzllOWU5ZVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIF07XG4gIG1hcHN0ZXIuTUFQX09QVElPTlMgPSB7XG4gICAgY2VudGVyOiB7XG4gICAgICBsYXQ6IDM3Ljc5MTM1MCxcbiAgICAgIGxuZzogLTEyMi40MzU4ODMgIFxuICAgIH0sXG4gICAgem9vbTogMTAsXG4gICAgZGlzYWJsZURlZmF1bHRVSTogZmFsc2UsXG4gICAgc2Nyb2xsd2hlZWw6IHRydWUsXG4gICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXG4gICAgLy8gbWF4Wm9vbTogMTEsXG4gICAgLy8gbWluWm9vbTogOSxcbiAgICB6b29tQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0xFRlQsXG4gICAgICBzdHlsZTogZ29vZ2xlLm1hcHMuWm9vbUNvbnRyb2xTdHlsZS5ERUZBVUxUXG4gICAgfSxcbiAgICBwYW5Db250cm9sT3B0aW9uczoge1xuICAgICAgcG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0JPVFRPTVxuICAgIH0sXG4gICAgc3R5bGVzOiBzdHlsZXMsXG4gICAgY2x1c3Rlcjoge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICAvLyBpbWFnZVBhdGg6ICcuLi9pbWcvaWNvbnMvbWFwLXBpbi5wbmcnLFxuICAgICAgICBzdHlsZXM6W3tcbiAgICAgICAgICB1cmw6Jy4uL2ltZy9pY29ucy9tMS5wbmcnLFxuICAgICAgICAgIGhlaWdodDogNTUsXG4gICAgICAgICAgd2lkdGg6IDU1LFxuICAgICAgICAgIHRleHRDb2xvcjogJyMzMzMnLFxuICAgICAgICAgIHRleHRTaXplOiAxOFxuICAgICAgICB9LHtcbiAgICAgICAgICB1cmw6Jy4uL2ltZy9pY29ucy9tMi5wbmcnLFxuICAgICAgICAgIGhlaWdodDogNTUsXG4gICAgICAgICAgd2lkdGg6IDU1LFxuICAgICAgICAgIHRleHRDb2xvcjogJyMzMzMnLFxuICAgICAgICAgIHRleHRTaXplOiAxOFxuICAgICAgICB9XVxuICAgICAgfVxuICAgIH1cbiAgfVxufSh3aW5kb3csIGdvb2dsZSwgd2luZG93Lk1hcHN0ZXIgfHwgKHdpbmRvdy5NYXBzdGVyID0ge30pKSk7IiwiKGZ1bmN0aW9uKHdpbmRvdywgZ29vZ2xlLCBtYXBzdGVyKXtcbiAgXG4gIC8vbWFwIG9wdGlvbnNcbiAgdmFyIG9wdGlvbnMgPSBtYXBzdGVyLk1BUF9PUFRJT05TO1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtY2FudmFzJyk7XG5cbiAgLy9tYXBcbiAgdmFyIG1hcCA9IG5ldyBtYXBzdGVyLmNyZWF0ZShlbGVtZW50LCBvcHRpb25zKTtcbiAgZm9yKHZhciBpID0gMDsgaSA8IDQwOyBpKyspe1xuICAgIHZhciBtYXJrZXIxID0gbWFwLmFkZE1hcmtlcih7XG4gICAgICBsYXQ6IDM3Ljc5MTM1MCArIE1hdGgucmFuZG9tKCksXG4gICAgICBsbmc6IC0xMjIuNDM1ODgzICsgTWF0aC5yYW5kb20oKSAqIDIsXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgaWQ6aSxcbiAgICAgIGNvbnRlbnQ6J0kgbGlrZSBmb29kJyxcbiAgICAgIGljb246ICcuLi9pbWcvaWNvbnMvbWFwLXBpbi5wbmcnXG4gICAgfSk7XG4gIH1cbiAgbWFwLnJlbW92ZUJ5KGZ1bmN0aW9uKG1hcmtlcil7XG4gICAgcmV0dXJuIG1hcmtlci5pZCA9PT0gNTtcbiAgfSlcblxufSh3aW5kb3csIGdvb2dsZSwgd2luZG93Lk1hcHN0ZXIgfHwgKHdpbmRvdy5NYXBzdGVyID0ge30pKSk7ICJdfQ==
