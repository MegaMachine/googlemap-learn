function o(t,e,r){this.extend(o,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=r||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,null!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var i=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=i.map_.getZoom(),e=i.map_.minZoom||0,r=Math.min(i.map_.maxZoom||100,i.map_.mapTypes[i.map_.getMapTypeId()].maxZoom);t=Math.min(Math.max(t,e),r),i.prevZoom_!=t&&(i.prevZoom_=t,i.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){i.redraw()}),e&&(e.length||Object.keys(e).length)&&this.addMarkers(e,!1)}function a(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new s(this,t.getStyles(),t.getGridSize())}function s(t,e,r){t.getMarkerClusterer().extend(s,google.maps.OverlayView),this.styles_=e,this.padding_=r||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}function t(t){this.items=[]}var e,r,i,n,h,l,p,c,u;function _(t,e){this.gMap=new n.maps.Map(t,e),this.markers=h.create(),e.cluster&&(this.markerClusterer=new o(this.gMap,[],e.cluster.options)),e.geocoder&&(this.geocoder=new n.maps.Geocoder)}o.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",o.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",o.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},o.prototype.onAdd=function(){this.setReady_(!0)},o.prototype.draw=function(){},o.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},o.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),r=new google.maps.LatLngBounds,s=0;t=e[s];s++)r.extend(t.getPosition());this.map_.fitBounds(r)},o.prototype.setStyles=function(t){this.styles_=t},o.prototype.getStyles=function(){return this.styles_},o.prototype.isZoomOnClick=function(){return this.zoomOnClick_},o.prototype.isAverageCenter=function(){return this.averageCenter_},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getTotalMarkers=function(){return this.markers_.length},o.prototype.setMaxZoom=function(t){this.maxZoom_=t},o.prototype.getMaxZoom=function(){return this.maxZoom_},o.prototype.calculator_=function(t,e){for(var r=0,s=t.length,i=s;0!==i;)i=parseInt(i/10,10),r++;return{text:s,index:r=Math.min(r,e)}},o.prototype.setCalculator=function(t){this.calculator_=t},o.prototype.getCalculator=function(){return this.calculator_},o.prototype.addMarkers=function(t,e){if(t.length)for(var r=0;s=t[r];r++)this.pushMarkerTo_(s);else if(Object.keys(t).length)for(var s in t)this.pushMarkerTo_(t[s]);e||this.redraw()},o.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},o.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},o.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var r,s=0;r=this.markers_[s];s++)if(r==t){e=s;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},o.prototype.removeMarker=function(t,e){var r=this.removeMarker_(t);return!(e||!r)&&(this.resetViewport(),this.redraw(),!0)},o.prototype.removeMarkers=function(t,e){for(var r,s=!1,i=0;r=t[i];i++){var o=this.removeMarker_(r);s=s||o}if(!e&&s)return this.resetViewport(),this.redraw(),!0},o.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},o.prototype.getTotalClusters=function(){return this.clusters_.length},o.prototype.getMap=function(){return this.map_},o.prototype.setMap=function(t){this.map_=t},o.prototype.getGridSize=function(){return this.gridSize_},o.prototype.setGridSize=function(t){this.gridSize_=t},o.prototype.getMinClusterSize=function(){return this.minClusterSize_},o.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},o.prototype.getExtendedBounds=function(t){var e=this.getProjection(),r=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),s=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=e.fromLatLngToDivPixel(r);i.x+=this.gridSize_,i.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(s);o.x-=this.gridSize_,o.y+=this.gridSize_;var n=e.fromDivPixelToLatLng(i),a=e.fromDivPixelToLatLng(o);return t.extend(n),t.extend(a),t},o.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},o.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},o.prototype.resetViewport=function(t){for(var e,r=0;e=this.clusters_[r];r++)e.remove();var s;for(r=0;s=this.markers_[r];r++)s.isAdded=!1,t&&s.setMap(null);this.clusters_=[]},o.prototype.repaint=function(){var r=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,e=0;t=r[e];e++)t.remove()},0)},o.prototype.redraw=function(){this.createClusters_()},o.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var r=(e.lat()-t.lat())*Math.PI/180,s=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},o.prototype.addToClosestCluster_=function(t){for(var e,r=4e4,s=null,i=(t.getPosition(),0);e=this.clusters_[i];i++){var o=e.getCenter();if(o){var n=this.distanceBetweenPoints_(o,t.getPosition());n<r&&(r=n,s=e)}}s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((e=new a(this)).addMarker(t),this.clusters_.push(e))},o.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(e),s=0;t=this.markers_[s];s++)!t.isAdded&&this.isMarkerInBounds_(t,r)&&this.addToClosestCluster_(t)},a.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,r=0;e=this.markers_[r];r++)if(e==t)return!0;return!1},a.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,r=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,s=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var i=this.markers_.length;if(i<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),i==this.minClusterSize_)for(var o=0;o<i;o++)this.markers_[o].setMap(null);return i>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},a.prototype.getMarkerClusterer=function(){return this.markerClusterer_},a.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),s=0;t=r[s];s++)e.extend(t.getPosition());return e},a.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},a.prototype.getSize=function(){return this.markers_.length},a.prototype.getMarkers=function(){return this.markers_},a.prototype.getCenter=function(){return this.center_},a.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},a.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},a.prototype.getMap=function(){return this.map_},a.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&e<t)for(var r,s=0;r=this.markers_[s];s++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var i=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},s.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},s.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",function(){e.triggerClusterClick()})},s.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},s.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},s.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},s.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},s.prototype.remove=function(){this.setMap(null)},s.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},s.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},s.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition},s.prototype.setCenter=function(t){this.center_=t},s.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&0<this.anchor_[1]&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var s=this.textColor_?this.textColor_:"black",i=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+s+"; position:absolute; font-size:"+i+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},e=window,t.prototype={add:function(t){this.items.push(t)},remove:function(t){var e=this.items.indexOf(t);-1!==e&&this.items.splice(e,1)},find:function(t,e){for(var r=this.items,s=r.length,i=[],o=0;o<s;o++)t(r[o],o)&&i.push(r[o]);return e&&e.call(this,i),i}},(r=t).create=function(t){return new r(t)},e.List=r,i=window,n=google,h=List,_.prototype={zoom:function(t){if(!t)return this.gMap.getZoom();this.gMap.setZoom(t)},addMarker:function(e){var r,s;return e.position={lat:e.lat,lng:e.lng},r=this._createMarker(e),this.markerClusterer&&this.markerClusterer.addMarker(r),this.markers.add(r),e.events&&this._attachEvents(r,e.events),e.content&&this._on({obj:r,event:"click",callback:function(t){s||(s=new n.maps.InfoWindow({content:e.content})),s.getMap()?s.close():s.open(this.gMap,r)}}),r},setPano:function(t,e){var r=new n.maps.StreetViewPanorama(t,e);this.gMap.setStreetView(r),e.events&&this._attachEvents(r,e.events)},findBy:function(t){return this.markers.find(t)},removeBy:function(t){var e=this;this.markers.find(t,function(t){t.forEach(function(t){e.markerClusterer?e.markerClusterer.removeMarker(t):t.setMap(null)})})},geocode:function(r){this.geocoder.geocode({address:r.address},function(t,e){e===n.maps.GeocoderStatus.OK?r.success.call(this,t,e):r.error.call(this,e)})},_attachEvents:function(e,t){var r=this;t.forEach(function(t){r._on({obj:e,event:t.name,callback:t.callback})})},_on:function(e){var r=this;n.maps.event.addListener(e.obj,e.event,function(t){e.callback.call(r,t,e.obj)})},_createMarker:function(t){return t.map=this.gMap,new n.maps.Marker(t)}},(l=_).create=function(t,e){return new l(t,e)},i.Mapster=l,window,p=google,(window.Mapster||(window.Mapster={})).MAP_OPTIONS={center:{lat:37.79135,lng:-122.435883},zoom:10,disableDefaultUI:!1,scrollwheel:!0,draggable:!0,mapTypeId:p.maps.MapTypeId.ROADMAP,zoomControlOptions:{position:p.maps.ControlPosition.BOTTOM_LEFT,style:p.maps.ZoomControlStyle.DEFAULT},panControlOptions:{position:p.maps.ControlPosition.LEFT_BOTTOM},styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],cluster:!1,geocoder:!0},window,google,c=Mapster,$.widget("mapster.mapster",{options:{},_create:function(){var t=this.element[0],e=this.options;this.map=c.create(t,e)},_refresh:function(){},addMarker:function(e){var r=this;e.location?this.map.geocode({address:e.location,success:function(t){t.forEach(function(t){e.lat=t.geometry.location.lat(),e.lng=t.geometry.location.lng(),r.map.addMarker(e)})},error:function(t){console.error(t)}}):this.map.addMarker(e)},findMarker:function(t){return this.map.findBy(t)},removeMarker:function(t){this.map.removeBy(t)},getMarkers:function(){return this.map.markers.items},setPano:function(t,r){var e=$(t),s=this;$.each(e,function(t,e){s.map.setPano(e,r)})},_destroy:function(){},_setOptions:function(){this._superApply(arguments),this._refresh()},_setOption:function(t,e){this._super(t,e)}}),window,google,(u=jQuery("#map-canvas").mapster(Mapster.MAP_OPTIONS)).mapster("addMarker",{lat:37.79135,lng:-122.435883,draggable:!0,id:1,events:[{name:"click",callback:function(t,e){console.log(t),console.log(e),console.log(this)}},{name:"dragend",callback:function(){alert("dragged")}}],icon:"../img/icons/map-pin.png"}),u.mapster("setPano","#pip-pano",{position:{lat:37.79135,lng:-122.435883},pov:{heading:200,pitch:0},events:[{name:"position_changed",callback:function(){console.log("changed position")}},{name:"pov_changed",callback:function(){console.log("changed pov")}},{name:"links_changed",callback:function(t,e){console.log(e.getLinks())}}]}),u.mapster("addMarker",{location:"Golden Gate Bridge, San Jrancisco, CA"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcmtlcmNsdXN0ZXJlci5qcyIsIkxpc3QuanMiLCJNYXBzdGVyLmpzIiwibWFwLW9wdGlvbnMuanMiLCJqcXVlcnl1aS5tYXBzdGVyLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJNYXJrZXJDbHVzdGVyZXIiLCJtYXAiLCJvcHRfbWFya2VycyIsIm9wdF9vcHRpb25zIiwidGhpcyIsImV4dGVuZCIsImdvb2dsZSIsIm1hcHMiLCJPdmVybGF5VmlldyIsIm1hcF8iLCJtYXJrZXJzXyIsImNsdXN0ZXJzXyIsInNpemVzIiwic3R5bGVzXyIsInJlYWR5XyIsIm9wdGlvbnMiLCJncmlkU2l6ZV8iLCJtaW5DbHVzdGVyU2l6ZV8iLCJtYXhab29tXyIsImltYWdlUGF0aF8iLCJNQVJLRVJfQ0xVU1RFUl9JTUFHRV9QQVRIXyIsImltYWdlRXh0ZW5zaW9uXyIsIk1BUktFUl9DTFVTVEVSX0lNQUdFX0VYVEVOU0lPTl8iLCJ6b29tT25DbGlja18iLCJ1bmRlZmluZWQiLCJhdmVyYWdlQ2VudGVyXyIsInNldHVwU3R5bGVzXyIsInNldE1hcCIsInByZXZab29tXyIsImdldFpvb20iLCJ0aGF0IiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsInpvb20iLCJtaW5ab29tIiwibWF4Wm9vbSIsIk1hdGgiLCJtaW4iLCJtYXBUeXBlcyIsImdldE1hcFR5cGVJZCIsIm1heCIsInJlc2V0Vmlld3BvcnQiLCJyZWRyYXciLCJsZW5ndGgiLCJPYmplY3QiLCJrZXlzIiwiYWRkTWFya2VycyIsIkNsdXN0ZXIiLCJtYXJrZXJDbHVzdGVyZXIiLCJtYXJrZXJDbHVzdGVyZXJfIiwiZ2V0TWFwIiwiZ2V0R3JpZFNpemUiLCJnZXRNaW5DbHVzdGVyU2l6ZSIsImlzQXZlcmFnZUNlbnRlciIsImNlbnRlcl8iLCJib3VuZHNfIiwiY2x1c3Rlckljb25fIiwiQ2x1c3Rlckljb24iLCJnZXRTdHlsZXMiLCJjbHVzdGVyIiwic3R5bGVzIiwib3B0X3BhZGRpbmciLCJnZXRNYXJrZXJDbHVzdGVyZXIiLCJwYWRkaW5nXyIsImNsdXN0ZXJfIiwiZGl2XyIsInN1bXNfIiwidmlzaWJsZV8iLCJMaXN0IiwicGFyYW1zIiwiaXRlbXMiLCJ3aW5kb3ciLCJNYXBzdGVyIiwiJG1hcHN0ZXIiLCJlbGVtZW50Iiwib3B0cyIsImdNYXAiLCJNYXAiLCJtYXJrZXJzIiwiY3JlYXRlIiwiZ2VvY29kZXIiLCJHZW9jb2RlciIsInByb3RvdHlwZSIsIm9iajEiLCJvYmoyIiwib2JqZWN0IiwicHJvcGVydHkiLCJhcHBseSIsIm9uQWRkIiwic2V0UmVhZHlfIiwiZHJhdyIsInNpemUiLCJpIiwicHVzaCIsInVybCIsImhlaWdodCIsIndpZHRoIiwiZml0TWFwVG9NYXJrZXJzIiwibWFya2VyIiwiZ2V0TWFya2VycyIsImJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImdldFBvc2l0aW9uIiwiZml0Qm91bmRzIiwic2V0U3R5bGVzIiwiaXNab29tT25DbGljayIsImdldFRvdGFsTWFya2VycyIsInNldE1heFpvb20iLCJnZXRNYXhab29tIiwiY2FsY3VsYXRvcl8iLCJudW1TdHlsZXMiLCJpbmRleCIsImNvdW50IiwiZHYiLCJwYXJzZUludCIsInRleHQiLCJzZXRDYWxjdWxhdG9yIiwiY2FsY3VsYXRvciIsImdldENhbGN1bGF0b3IiLCJvcHRfbm9kcmF3IiwicHVzaE1hcmtlclRvXyIsImlzQWRkZWQiLCJyZXBhaW50IiwiYWRkTWFya2VyIiwicmVtb3ZlTWFya2VyXyIsImluZGV4T2YiLCJtIiwic3BsaWNlIiwicmVtb3ZlTWFya2VyIiwicmVtb3ZlZCIsInJlbW92ZU1hcmtlcnMiLCJyIiwicmVhZHkiLCJjcmVhdGVDbHVzdGVyc18iLCJnZXRUb3RhbENsdXN0ZXJzIiwic2V0R3JpZFNpemUiLCJzZXRNaW5DbHVzdGVyU2l6ZSIsImdldEV4dGVuZGVkQm91bmRzIiwicHJvamVjdGlvbiIsImdldFByb2plY3Rpb24iLCJ0ciIsIkxhdExuZyIsImdldE5vcnRoRWFzdCIsImxhdCIsImxuZyIsImJsIiwiZ2V0U291dGhXZXN0IiwidHJQaXgiLCJmcm9tTGF0TG5nVG9EaXZQaXhlbCIsIngiLCJ5IiwiYmxQaXgiLCJuZSIsImZyb21EaXZQaXhlbFRvTGF0TG5nIiwic3ciLCJpc01hcmtlckluQm91bmRzXyIsImNvbnRhaW5zIiwiY2xlYXJNYXJrZXJzIiwib3B0X2hpZGUiLCJyZW1vdmUiLCJvbGRDbHVzdGVycyIsInNsaWNlIiwic2V0VGltZW91dCIsImRpc3RhbmNlQmV0d2VlblBvaW50c18iLCJwMSIsInAyIiwiZExhdCIsIlBJIiwiZExvbiIsImEiLCJzaW4iLCJjb3MiLCJhdGFuMiIsInNxcnQiLCJhZGRUb0Nsb3Nlc3RDbHVzdGVyXyIsImRpc3RhbmNlIiwiY2x1c3RlclRvQWRkVG8iLCJjZW50ZXIiLCJnZXRDZW50ZXIiLCJkIiwiaXNNYXJrZXJJbkNsdXN0ZXJCb3VuZHMiLCJtYXBCb3VuZHMiLCJnZXRCb3VuZHMiLCJpc01hcmtlckFscmVhZHlBZGRlZCIsImwiLCJjYWxjdWxhdGVCb3VuZHNfIiwibGVuIiwidXBkYXRlSWNvbiIsImdldFNpemUiLCJteiIsImhpZGUiLCJzdW1zIiwic2V0Q2VudGVyIiwic2V0U3VtcyIsInNob3ciLCJ0cmlnZ2VyQ2x1c3RlckNsaWNrIiwidHJpZ2dlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBvcyIsImdldFBvc0Zyb21MYXRMbmdfIiwic3R5bGUiLCJjc3NUZXh0IiwiY3JlYXRlQ3NzIiwiaW5uZXJIVE1MIiwiZ2V0UGFuZXMiLCJvdmVybGF5TW91c2VUYXJnZXQiLCJhcHBlbmRDaGlsZCIsImFkZERvbUxpc3RlbmVyIiwibGF0bG5nIiwid2lkdGhfIiwiaGVpZ2h0XyIsInRvcCIsImxlZnQiLCJkaXNwbGF5Iiwib25SZW1vdmUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJ0ZXh0XyIsImluZGV4XyIsInVzZVN0eWxlIiwidXJsXyIsInRleHRDb2xvcl8iLCJhbmNob3JfIiwidGV4dFNpemVfIiwiYmFja2dyb3VuZFBvc2l0aW9uXyIsImJhY2tncm91bmRQb3NpdGlvbiIsInR4dENvbG9yIiwidHh0U2l6ZSIsImpvaW4iLCJhZGQiLCJpdGVtIiwiZmluZCIsImNhbGxiYWNrIiwiYWN0aW9uIiwibWF0Y2hlcyIsImNhbGwiLCJsZXZlbCIsInNldFpvb20iLCJpbmZvV2lkb3ciLCJwb3NpdGlvbiIsIl9jcmVhdGVNYXJrZXIiLCJldmVudHMiLCJfYXR0YWNoRXZlbnRzIiwiY29udGVudCIsIl9vbiIsIm9iaiIsImUiLCJJbmZvV2luZG93IiwiY2xvc2UiLCJvcGVuIiwic2V0UGFubyIsInBhbm9yYW1hIiwiU3RyZWV0Vmlld1Bhbm9yYW1hIiwic2V0U3RyZWV0VmlldyIsImZpbmRCeSIsInJlbW92ZUJ5Iiwic2VsZiIsImZvckVhY2giLCJnZW9jb2RlIiwiYWRkcmVzcyIsInJlc3VsdHMiLCJzdGF0dXMiLCJHZW9jb2RlclN0YXR1cyIsIk9LIiwic3VjY2VzcyIsImVycm9yIiwibmFtZSIsIk1hcmtlciIsIk1BUF9PUFRJT05TIiwiZGlzYWJsZURlZmF1bHRVSSIsInNjcm9sbHdoZWVsIiwiZHJhZ2dhYmxlIiwibWFwVHlwZUlkIiwiTWFwVHlwZUlkIiwiUk9BRE1BUCIsInpvb21Db250cm9sT3B0aW9ucyIsIkNvbnRyb2xQb3NpdGlvbiIsIkJPVFRPTV9MRUZUIiwiWm9vbUNvbnRyb2xTdHlsZSIsIkRFRkFVTFQiLCJwYW5Db250cm9sT3B0aW9ucyIsIkxFRlRfQk9UVE9NIiwiZWxlbWVudFR5cGUiLCJzdHlsZXJzIiwiY29sb3IiLCJ2aXNpYmlsaXR5IiwiZmVhdHVyZVR5cGUiLCIkIiwid2lkZ2V0IiwiX2NyZWF0ZSIsIl9yZWZyZXNoIiwibG9jYXRpb24iLCJyZXN1bHQiLCJnZW9tZXRyeSIsImNvbnNvbGUiLCJmaW5kTWFya2VyIiwic2VsZWN0b3IiLCJlbGVtZW50cyIsImVhY2giLCJrZXkiLCJfZGVzdHJveSIsIl9zZXRPcHRpb25zIiwiX3N1cGVyQXBwbHkiLCJhcmd1bWVudHMiLCJfc2V0T3B0aW9uIiwidmFsdWUiLCJfc3VwZXIiLCJqUXVlcnkiLCJtYXBzdGVyIiwiaWQiLCJsb2ciLCJhbGVydCIsImljb24iLCJwb3YiLCJoZWFkaW5nIiwicGl0Y2giLCJnZXRMaW5rcyJdLCJtYXBwaW5ncyI6IkFBd0RBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBTUFDLEtBQUFDLE9BQUFMLEVBQUFNLE9BQUFDLEtBQUFDLGFBQ0FKLEtBQUFLLEtBQUFSLEVBTUFHLEtBQUFNLFNBQUEsR0FLQU4sS0FBQU8sVUFBQSxHQUVBUCxLQUFBUSxNQUFBLENBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUtBUixLQUFBUyxRQUFBLEdBTUFULEtBQUFVLFFBQUEsRUFFQSxJQUFBQyxFQUFBWixHQUFBLEdBTUFDLEtBQUFZLFVBQUFELEVBQUEsVUFBQSxHQUtBWCxLQUFBYSxnQkFBQUYsRUFBQSxvQkFBQSxFQU9BWCxLQUFBYyxTQUFBSCxFQUFBLFNBQUEsS0FFQVgsS0FBQVMsUUFBQUUsRUFBQSxRQUFBLEdBTUFYLEtBQUFlLFdBQUFKLEVBQUEsV0FDQVgsS0FBQWdCLDJCQU1BaEIsS0FBQWlCLGdCQUFBTixFQUFBLGdCQUNBWCxLQUFBa0IsZ0NBTUFsQixLQUFBbUIsY0FBQSxFQUVBQyxNQUFBVCxFQUFBLGNBQ0FYLEtBQUFtQixhQUFBUixFQUFBLGFBT0FYLEtBQUFxQixnQkFBQSxFQUVBRCxNQUFBVCxFQUFBLGdCQUNBWCxLQUFBcUIsZUFBQVYsRUFBQSxlQUdBWCxLQUFBc0IsZUFFQXRCLEtBQUF1QixPQUFBMUIsR0FNQUcsS0FBQXdCLFVBQUF4QixLQUFBSyxLQUFBb0IsVUFHQSxJQUFBQyxFQUFBMUIsS0FDQUUsT0FBQUMsS0FBQXdCLE1BQUFDLFlBQUE1QixLQUFBSyxLQUFBLGVBQUEsV0FFQSxJQUFBd0IsRUFBQUgsRUFBQXJCLEtBQUFvQixVQUNBSyxFQUFBSixFQUFBckIsS0FBQXlCLFNBQUEsRUFDQUMsRUFBQUMsS0FBQUMsSUFBQVAsRUFBQXJCLEtBQUEwQixTQUFBLElBQ0FMLEVBQUFyQixLQUFBNkIsU0FBQVIsRUFBQXJCLEtBQUE4QixnQkFB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N08sUUFBQXFNLGNBQ0F3QyxRQUFBLFlBQUEsQ0FDQXRLLElBQUEsU0FDQUMsS0FBQSxXQUNBZ0ksV0FBQSxFQUNBc0MsR0FBQSxFQUNBcEUsT0FBQSxDQUNBLENBQ0F5QixLQUFBLFFBQ0FsQyxTQUFBLFNBQUFjLEVBQUFySixHQUNBcU0sUUFBQWdCLElBQUFoRSxHQUNBZ0QsUUFBQWdCLElBQUFyTixHQUNBcU0sUUFBQWdCLElBQUFuVCxRQUVBLENBQ0F1USxLQUFBLFVBQ0FsQyxTQUFBLFdBQ0ErRSxNQUFBLGNBSUFDLEtBQUEsNkJBRUFoUCxFQUFBNE8sUUFBQSxVQUFBLFlBQUEsQ0FDQXJFLFNBQUEsQ0FDQWpHLElBQUEsU0FDQUMsS0FBQSxZQUVBMEssSUFBQSxDQUNBQyxRQUFBLElBQ0FDLE1BQUEsR0FFQTFFLE9BQUEsQ0FDQSxDQUNBeUIsS0FBQSxtQkFDQWxDLFNBQUEsV0FDQThELFFBQUFnQixJQUFBLHNCQUdBLENBQ0E1QyxLQUFBLGNBQ0FsQyxTQUFBLFdBQ0E4RCxRQUFBZ0IsSUFBQSxpQkFHQSxDQUNBNUMsS0FBQSxnQkFDQWxDLFNBQUEsU0FBQWMsRUFBQUssR0FDQTJDLFFBQUFnQixJQUFBM0QsRUFBQWlFLGlCQUtBcFAsRUFBQTRPLFFBQUEsWUFBQSxDQUNBakIsU0FBQSIsImZpbGUiOiJjdXN0b20uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBuYW1lIE1hcmtlckNsdXN0ZXJlciBmb3IgR29vZ2xlIE1hcHMgdjNcbiAqIEB2ZXJzaW9uIHZlcnNpb24gMS4wLjFcbiAqIEBhdXRob3IgTHVrZSBNYWhlXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBUaGUgbGlicmFyeSBjcmVhdGVzIGFuZCBtYW5hZ2VzIHBlci16b29tLWxldmVsIGNsdXN0ZXJzIGZvciBsYXJnZSBhbW91bnRzIG9mXG4gKiBtYXJrZXJzLlxuICogPGJyLz5cbiAqIFRoaXMgaXMgYSB2MyBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIDxhIGhyZWY9XCJodHRwOi8vZ21hcHMtdXRpbGl0eS1saWJyYXJ5LWRldi5nb29nbGVjb2RlLmNvbS9zdm4vdGFncy9tYXJrZXJjbHVzdGVyZXIvXCJcbiAqID52MiBNYXJrZXJDbHVzdGVyZXI8L2E+LlxuICovXG5cbi8qKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBBIE1hcmtlciBDbHVzdGVyZXIgdGhhdCBjbHVzdGVycyBtYXJrZXJzLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFwfSBtYXAgVGhlIEdvb2dsZSBtYXAgdG8gYXR0YWNoIHRvLlxuICogQHBhcmFtIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPj19IG9wdF9tYXJrZXJzIE9wdGlvbmFsIG1hcmtlcnMgdG8gYWRkIHRvXG4gKiAgIHRoZSBjbHVzdGVyLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfb3B0aW9ucyBzdXBwb3J0IHRoZSBmb2xsb3dpbmcgb3B0aW9uczpcbiAqICAgICAnZ3JpZFNpemUnOiAobnVtYmVyKSBUaGUgZ3JpZCBzaXplIG9mIGEgY2x1c3RlciBpbiBwaXhlbHMuXG4gKiAgICAgJ21heFpvb20nOiAobnVtYmVyKSBUaGUgbWF4aW11bSB6b29tIGxldmVsIHRoYXQgYSBtYXJrZXIgY2FuIGJlIHBhcnQgb2YgYVxuICogICAgICAgICAgICAgICAgY2x1c3Rlci5cbiAqICAgICAnem9vbU9uQ2xpY2snOiAoYm9vbGVhbikgV2hldGhlciB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgb2YgY2xpY2tpbmcgb24gYVxuICogICAgICAgICAgICAgICAgICAgIGNsdXN0ZXIgaXMgdG8gem9vbSBpbnRvIGl0LlxuICogICAgICdhdmVyYWdlQ2VudGVyJzogKGJvb2xlYW4pIFdoZXRoZXIgdGhlIGNlbnRlciBvZiBlYWNoIGNsdXN0ZXIgc2hvdWxkIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICB0aGUgYXZlcmFnZSBvZiBhbGwgbWFya2VycyBpbiB0aGUgY2x1c3Rlci5cbiAqICAgICAnbWluaW11bUNsdXN0ZXJTaXplJzogKG51bWJlcikgVGhlIG1pbmltdW0gbnVtYmVyIG9mIG1hcmtlcnMgdG8gYmUgaW4gYVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVyIGJlZm9yZSB0aGUgbWFya2VycyBhcmUgaGlkZGVuIGFuZCBhIGNvdW50XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIHNob3duLlxuICogICAgICdzdHlsZXMnOiAob2JqZWN0KSBBbiBvYmplY3QgdGhhdCBoYXMgc3R5bGUgcHJvcGVydGllczpcbiAqICAgICAgICd1cmwnOiAoc3RyaW5nKSBUaGUgaW1hZ2UgdXJsLlxuICogICAgICAgJ2hlaWdodCc6IChudW1iZXIpIFRoZSBpbWFnZSBoZWlnaHQuXG4gKiAgICAgICAnd2lkdGgnOiAobnVtYmVyKSBUaGUgaW1hZ2Ugd2lkdGguXG4gKiAgICAgICAnYW5jaG9yJzogKEFycmF5KSBUaGUgYW5jaG9yIHBvc2l0aW9uIG9mIHRoZSBsYWJlbCB0ZXh0LlxuICogICAgICAgJ3RleHRDb2xvcic6IChzdHJpbmcpIFRoZSB0ZXh0IGNvbG9yLlxuICogICAgICAgJ3RleHRTaXplJzogKG51bWJlcikgVGhlIHRleHQgc2l6ZS5cbiAqICAgICAgICdiYWNrZ3JvdW5kUG9zaXRpb24nOiAoc3RyaW5nKSBUaGUgcG9zaXRpb24gb2YgdGhlIGJhY2tnb3VuZCB4LCB5LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBnb29nbGUubWFwcy5PdmVybGF5Vmlld1xuICovXG5mdW5jdGlvbiBNYXJrZXJDbHVzdGVyZXIobWFwLCBvcHRfbWFya2Vycywgb3B0X29wdGlvbnMpIHtcbiAgLy8gTWFya2VyQ2x1c3RlcmVyIGltcGxlbWVudHMgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcgaW50ZXJmYWNlLiBXZSB1c2UgdGhlXG4gIC8vIGV4dGVuZCBmdW5jdGlvbiB0byBleHRlbmQgTWFya2VyQ2x1c3RlcmVyIHdpdGggZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXdcbiAgLy8gYmVjYXVzZSBpdCBtaWdodCBub3QgYWx3YXlzIGJlIGF2YWlsYWJsZSB3aGVuIHRoZSBjb2RlIGlzIGRlZmluZWQgc28gd2VcbiAgLy8gbG9vayBmb3IgaXQgYXQgdGhlIGxhc3QgcG9zc2libGUgbW9tZW50LiBJZiBpdCBkb2Vzbid0IGV4aXN0IG5vdyB0aGVuXG4gIC8vIHRoZXJlIGlzIG5vIHBvaW50IGdvaW5nIGFoZWFkIDopXG4gIHRoaXMuZXh0ZW5kKE1hcmtlckNsdXN0ZXJlciwgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xuICB0aGlzLm1hcF8gPSBtYXA7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMubWFya2Vyc18gPSBbXTtcblxuICAvKipcbiAgICogIEB0eXBlIHtBcnJheS48Q2x1c3Rlcj59XG4gICAqL1xuICB0aGlzLmNsdXN0ZXJzXyA9IFtdO1xuXG4gIHRoaXMuc2l6ZXMgPSBbNTMsIDU2LCA2NiwgNzgsIDkwXTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuc3R5bGVzXyA9IFtdO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMucmVhZHlfID0gZmFsc2U7XG5cbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICAvKipcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuZ3JpZFNpemVfID0gb3B0aW9uc1snZ3JpZFNpemUnXSB8fCA2MDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMubWluQ2x1c3RlclNpemVfID0gb3B0aW9uc1snbWluaW11bUNsdXN0ZXJTaXplJ10gfHwgMjtcblxuXG4gIC8qKlxuICAgKiBAdHlwZSB7P251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMubWF4Wm9vbV8gPSBvcHRpb25zWydtYXhab29tJ10gfHwgbnVsbDtcblxuICB0aGlzLnN0eWxlc18gPSBvcHRpb25zWydzdHlsZXMnXSB8fCBbXTtcblxuICAvKipcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuaW1hZ2VQYXRoXyA9IG9wdGlvbnNbJ2ltYWdlUGF0aCddIHx8XG4gICAgICB0aGlzLk1BUktFUl9DTFVTVEVSX0lNQUdFX1BBVEhfO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5pbWFnZUV4dGVuc2lvbl8gPSBvcHRpb25zWydpbWFnZUV4dGVuc2lvbiddIHx8XG4gICAgICB0aGlzLk1BUktFUl9DTFVTVEVSX0lNQUdFX0VYVEVOU0lPTl87XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy56b29tT25DbGlja18gPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zWyd6b29tT25DbGljayddICE9IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuem9vbU9uQ2xpY2tfID0gb3B0aW9uc1snem9vbU9uQ2xpY2snXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuYXZlcmFnZUNlbnRlcl8gPSBmYWxzZTtcblxuICBpZiAob3B0aW9uc1snYXZlcmFnZUNlbnRlciddICE9IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuYXZlcmFnZUNlbnRlcl8gPSBvcHRpb25zWydhdmVyYWdlQ2VudGVyJ107XG4gIH1cblxuICB0aGlzLnNldHVwU3R5bGVzXygpO1xuXG4gIHRoaXMuc2V0TWFwKG1hcCk7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLnByZXZab29tXyA9IHRoaXMubWFwXy5nZXRab29tKCk7XG5cbiAgLy8gQWRkIHRoZSBtYXAgZXZlbnQgbGlzdGVuZXJzXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5tYXBfLCAnem9vbV9jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XG4gICAgLy8gRGV0ZXJtaW5lcyBtYXAgdHlwZSBhbmQgcHJldmVudCBpbGxlZ2FsIHpvb20gbGV2ZWxzXG4gICAgdmFyIHpvb20gPSB0aGF0Lm1hcF8uZ2V0Wm9vbSgpO1xuICAgIHZhciBtaW5ab29tID0gdGhhdC5tYXBfLm1pblpvb20gfHwgMDtcbiAgICB2YXIgbWF4Wm9vbSA9IE1hdGgubWluKHRoYXQubWFwXy5tYXhab29tIHx8IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcF8ubWFwVHlwZXNbdGhhdC5tYXBfLmdldE1hcFR5cGVJZCgpXS5tYXhab29tKTtcbiAgICB6b29tID0gTWF0aC5taW4oTWF0aC5tYXgoem9vbSxtaW5ab29tKSxtYXhab29tKTtcblxuICAgIGlmICh0aGF0LnByZXZab29tXyAhPSB6b29tKSB7XG4gICAgICB0aGF0LnByZXZab29tXyA9IHpvb207XG4gICAgICB0aGF0LnJlc2V0Vmlld3BvcnQoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwXywgJ2lkbGUnLCBmdW5jdGlvbigpIHtcbiAgICB0aGF0LnJlZHJhdygpO1xuICB9KTtcblxuICAvLyBGaW5hbGx5LCBhZGQgdGhlIG1hcmtlcnNcbiAgaWYgKG9wdF9tYXJrZXJzICYmIChvcHRfbWFya2Vycy5sZW5ndGggfHwgT2JqZWN0LmtleXMob3B0X21hcmtlcnMpLmxlbmd0aCkpIHtcbiAgICB0aGlzLmFkZE1hcmtlcnMob3B0X21hcmtlcnMsIGZhbHNlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIG1hcmtlciBjbHVzdGVyIGltYWdlIHBhdGguXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuTUFSS0VSX0NMVVNURVJfSU1BR0VfUEFUSF8gPSAnLi4vaW1hZ2VzL20nO1xuXG5cbi8qKlxuICogVGhlIG1hcmtlciBjbHVzdGVyIGltYWdlIHBhdGguXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuTUFSS0VSX0NMVVNURVJfSU1BR0VfRVhURU5TSU9OXyA9ICdwbmcnO1xuXG5cbi8qKlxuICogRXh0ZW5kcyBhIG9iamVjdHMgcHJvdG90eXBlIGJ5IGFub3RoZXJzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWQuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMiBUaGUgb2JqZWN0IHRvIGV4dGVuZCB3aXRoLlxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgbmV3IGV4dGVuZGVkIG9iamVjdC5cbiAqIEBpZ25vcmVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihvYmoxLCBvYmoyKSB7XG4gIHJldHVybiAoZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgdGhpcy5wcm90b3R5cGVbcHJvcGVydHldID0gb2JqZWN0LnByb3RvdHlwZVtwcm9wZXJ0eV07XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9KS5hcHBseShvYmoxLCBbb2JqMl0pO1xufTtcblxuXG4vKipcbiAqIEltcGxlbWVudGFpb24gb2YgdGhlIGludGVyZmFjZSBtZXRob2QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUub25BZGQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zZXRSZWFkeV8odHJ1ZSk7XG59O1xuXG4vKipcbiAqIEltcGxlbWVudGFpb24gb2YgdGhlIGludGVyZmFjZSBtZXRob2QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge307XG5cbi8qKlxuICogU2V0cyB1cCB0aGUgc3R5bGVzIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldHVwU3R5bGVzXyA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5zdHlsZXNfLmxlbmd0aCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBzaXplOyBzaXplID0gdGhpcy5zaXplc1tpXTsgaSsrKSB7XG4gICAgdGhpcy5zdHlsZXNfLnB1c2goe1xuICAgICAgdXJsOiB0aGlzLmltYWdlUGF0aF8gKyAoaSArIDEpICsgJy4nICsgdGhpcy5pbWFnZUV4dGVuc2lvbl8sXG4gICAgICBoZWlnaHQ6IHNpemUsXG4gICAgICB3aWR0aDogc2l6ZVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqICBGaXQgdGhlIG1hcCB0byB0aGUgYm91bmRzIG9mIHRoZSBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXIuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZml0TWFwVG9NYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBtYXJrZXJzID0gdGhpcy5nZXRNYXJrZXJzKCk7XG4gIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgIGJvdW5kcy5leHRlbmQobWFya2VyLmdldFBvc2l0aW9uKCkpO1xuICB9XG5cbiAgdGhpcy5tYXBfLmZpdEJvdW5kcyhib3VuZHMpO1xufTtcblxuXG4vKipcbiAqICBTZXRzIHRoZSBzdHlsZXMuXG4gKlxuICogIEBwYXJhbSB7T2JqZWN0fSBzdHlsZXMgVGhlIHN0eWxlIHRvIHNldC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRTdHlsZXMgPSBmdW5jdGlvbihzdHlsZXMpIHtcbiAgdGhpcy5zdHlsZXNfID0gc3R5bGVzO1xufTtcblxuXG4vKipcbiAqICBHZXRzIHRoZSBzdHlsZXMuXG4gKlxuICogIEByZXR1cm4ge09iamVjdH0gVGhlIHN0eWxlcyBvYmplY3QuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0U3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLnN0eWxlc187XG59O1xuXG5cbi8qKlxuICogV2hldGhlciB6b29tIG9uIGNsaWNrIGlzIHNldC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHpvb21PbkNsaWNrXyBpcyBzZXQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuaXNab29tT25DbGljayA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy56b29tT25DbGlja187XG59O1xuXG4vKipcbiAqIFdoZXRoZXIgYXZlcmFnZSBjZW50ZXIgaXMgc2V0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYXZlcmFnZUNlbnRlcl8gaXMgc2V0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmlzQXZlcmFnZUNlbnRlciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5hdmVyYWdlQ2VudGVyXztcbn07XG5cblxuLyoqXG4gKiAgUmV0dXJucyB0aGUgYXJyYXkgb2YgbWFya2VycyBpbiB0aGUgY2x1c3RlcmVyLlxuICpcbiAqICBAcmV0dXJuIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn0gVGhlIG1hcmtlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJzXztcbn07XG5cblxuLyoqXG4gKiAgUmV0dXJucyB0aGUgbnVtYmVyIG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXJlclxuICpcbiAqICBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbWFya2Vycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRUb3RhbE1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc18ubGVuZ3RoO1xufTtcblxuXG4vKipcbiAqICBTZXRzIHRoZSBtYXggem9vbSBmb3IgdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiAgQHBhcmFtIHtudW1iZXJ9IG1heFpvb20gVGhlIG1heCB6b29tIGxldmVsLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbihtYXhab29tKSB7XG4gIHRoaXMubWF4Wm9vbV8gPSBtYXhab29tO1xufTtcblxuXG4vKipcbiAqICBHZXRzIHRoZSBtYXggem9vbSBmb3IgdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiAgQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4IHpvb20gbGV2ZWwuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXhab29tXztcbn07XG5cblxuLyoqXG4gKiAgVGhlIGZ1bmN0aW9uIGZvciBjYWxjdWxhdGluZyB0aGUgY2x1c3RlciBpY29uIGltYWdlLlxuICpcbiAqICBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXIuXG4gKiAgQHBhcmFtIHtudW1iZXJ9IG51bVN0eWxlcyBUaGUgbnVtYmVyIG9mIHN0eWxlcyBhdmFpbGFibGUuXG4gKiAgQHJldHVybiB7T2JqZWN0fSBBIG9iamVjdCBwcm9wZXJ0aWVzOiAndGV4dCcgKHN0cmluZykgYW5kICdpbmRleCcgKG51bWJlcikuXG4gKiAgQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5jYWxjdWxhdG9yXyA9IGZ1bmN0aW9uKG1hcmtlcnMsIG51bVN0eWxlcykge1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgY291bnQgPSBtYXJrZXJzLmxlbmd0aDtcbiAgdmFyIGR2ID0gY291bnQ7XG4gIHdoaWxlIChkdiAhPT0gMCkge1xuICAgIGR2ID0gcGFyc2VJbnQoZHYgLyAxMCwgMTApO1xuICAgIGluZGV4Kys7XG4gIH1cblxuICBpbmRleCA9IE1hdGgubWluKGluZGV4LCBudW1TdHlsZXMpO1xuICByZXR1cm4ge1xuICAgIHRleHQ6IGNvdW50LFxuICAgIGluZGV4OiBpbmRleFxuICB9O1xufTtcblxuXG4vKipcbiAqIFNldCB0aGUgY2FsY3VsYXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKEFycmF5LCBudW1iZXIpfSBjYWxjdWxhdG9yIFRoZSBmdW5jdGlvbiB0byBzZXQgYXMgdGhlXG4gKiAgICAgY2FsY3VsYXRvci4gVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBvYmplY3QgcHJvcGVydGllczpcbiAqICAgICAndGV4dCcgKHN0cmluZykgYW5kICdpbmRleCcgKG51bWJlcikuXG4gKlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldENhbGN1bGF0b3IgPSBmdW5jdGlvbihjYWxjdWxhdG9yKSB7XG4gIHRoaXMuY2FsY3VsYXRvcl8gPSBjYWxjdWxhdG9yO1xufTtcblxuXG4vKipcbiAqIEdldCB0aGUgY2FsY3VsYXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihBcnJheSwgbnVtYmVyKX0gdGhlIGNhbGN1bGF0b3IgZnVuY3Rpb24uXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRvciA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5jYWxjdWxhdG9yXztcbn07XG5cblxuLyoqXG4gKiBBZGQgYW4gYXJyYXkgb2YgbWFya2VycyB0byB0aGUgY2x1c3RlcmVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IG1hcmtlcnMgVGhlIG1hcmtlcnMgdG8gYWRkLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBXaGV0aGVyIHRvIHJlZHJhdyB0aGUgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuYWRkTWFya2VycyA9IGZ1bmN0aW9uKG1hcmtlcnMsIG9wdF9ub2RyYXcpIHtcbiAgaWYgKG1hcmtlcnMubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gbWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICB0aGlzLnB1c2hNYXJrZXJUb18obWFya2VyKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoT2JqZWN0LmtleXMobWFya2VycykubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgbWFya2VyIGluIG1hcmtlcnMpIHtcbiAgICAgIHRoaXMucHVzaE1hcmtlclRvXyhtYXJrZXJzW21hcmtlcl0pO1xuICAgIH1cbiAgfVxuICBpZiAoIW9wdF9ub2RyYXcpIHtcbiAgICB0aGlzLnJlZHJhdygpO1xuICB9XG59O1xuXG5cbi8qKlxuICogUHVzaGVzIGEgbWFya2VyIHRvIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucHVzaE1hcmtlclRvXyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICBtYXJrZXIuaXNBZGRlZCA9IGZhbHNlO1xuICBpZiAobWFya2VyWydkcmFnZ2FibGUnXSkge1xuICAgIC8vIElmIHRoZSBtYXJrZXIgaXMgZHJhZ2dhYmxlIGFkZCBhIGxpc3RlbmVyIHNvIHdlIHVwZGF0ZSB0aGUgY2x1c3RlcnMgb25cbiAgICAvLyB0aGUgZHJhZyBlbmQuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2RyYWdlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgIG1hcmtlci5pc0FkZGVkID0gZmFsc2U7XG4gICAgICB0aGF0LnJlcGFpbnQoKTtcbiAgICB9KTtcbiAgfVxuICB0aGlzLm1hcmtlcnNfLnB1c2gobWFya2VyKTtcbn07XG5cblxuLyoqXG4gKiBBZGRzIGEgbWFya2VyIHRvIHRoZSBjbHVzdGVyZXIgYW5kIHJlZHJhd3MgaWYgbmVlZGVkLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBhZGQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9kcmF3IFdoZXRoZXIgdG8gcmVkcmF3IHRoZSBjbHVzdGVycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5hZGRNYXJrZXIgPSBmdW5jdGlvbihtYXJrZXIsIG9wdF9ub2RyYXcpIHtcbiAgdGhpcy5wdXNoTWFya2VyVG9fKG1hcmtlcik7XG4gIGlmICghb3B0X25vZHJhdykge1xuICAgIHRoaXMucmVkcmF3KCk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBSZW1vdmVzIGEgbWFya2VyIGFuZCByZXR1cm5zIHRydWUgaWYgcmVtb3ZlZCwgZmFsc2UgaWYgbm90XG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIHJlbW92ZVxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgbWFya2VyIHdhcyByZW1vdmVkIG9yIG5vdFxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXJfID0gZnVuY3Rpb24obWFya2VyKSB7XG4gIHZhciBpbmRleCA9IC0xO1xuICBpZiAodGhpcy5tYXJrZXJzXy5pbmRleE9mKSB7XG4gICAgaW5kZXggPSB0aGlzLm1hcmtlcnNfLmluZGV4T2YobWFya2VyKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbTsgbSA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgICAgaWYgKG0gPT0gbWFya2VyKSB7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgLy8gTWFya2VyIGlzIG5vdCBpbiBvdXIgbGlzdCBvZiBtYXJrZXJzLlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIG1hcmtlci5zZXRNYXAobnVsbCk7XG5cbiAgdGhpcy5tYXJrZXJzXy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIFJlbW92ZSBhIG1hcmtlciBmcm9tIHRoZSBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byByZW1vdmUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9kcmF3IE9wdGlvbmFsIGJvb2xlYW4gdG8gZm9yY2Ugbm8gcmVkcmF3LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIHdhcyByZW1vdmVkLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlciwgb3B0X25vZHJhdykge1xuICB2YXIgcmVtb3ZlZCA9IHRoaXMucmVtb3ZlTWFya2VyXyhtYXJrZXIpO1xuXG4gIGlmICghb3B0X25vZHJhdyAmJiByZW1vdmVkKSB7XG4gICAgdGhpcy5yZXNldFZpZXdwb3J0KCk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuXG4vKipcbiAqIFJlbW92ZXMgYW4gYXJyYXkgb2YgbWFya2VycyBmcm9tIHRoZSBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IG1hcmtlcnMgVGhlIG1hcmtlcnMgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBPcHRpb25hbCBib29sZWFuIHRvIGZvcmNlIG5vIHJlZHJhdy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXJzID0gZnVuY3Rpb24obWFya2Vycywgb3B0X25vZHJhdykge1xuICB2YXIgcmVtb3ZlZCA9IGZhbHNlO1xuXG4gIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgIHZhciByID0gdGhpcy5yZW1vdmVNYXJrZXJfKG1hcmtlcik7XG4gICAgcmVtb3ZlZCA9IHJlbW92ZWQgfHwgcjtcbiAgfVxuXG4gIGlmICghb3B0X25vZHJhdyAmJiByZW1vdmVkKSB7XG4gICAgdGhpcy5yZXNldFZpZXdwb3J0KCk7XG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuXG4vKipcbiAqIFNldHMgdGhlIGNsdXN0ZXJlcidzIHJlYWR5IHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVhZHkgVGhlIHN0YXRlLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRSZWFkeV8gPSBmdW5jdGlvbihyZWFkeSkge1xuICBpZiAoIXRoaXMucmVhZHlfKSB7XG4gICAgdGhpcy5yZWFkeV8gPSByZWFkeTtcbiAgICB0aGlzLmNyZWF0ZUNsdXN0ZXJzXygpO1xuICB9XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNsdXN0ZXJzIGluIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNsdXN0ZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFRvdGFsQ2x1c3RlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2x1c3RlcnNfLmxlbmd0aDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBnb29nbGUgbWFwIHRoYXQgdGhlIGNsdXN0ZXJlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTWFwfSBUaGUgbWFwLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXBfO1xufTtcblxuXG4vKipcbiAqIFNldHMgdGhlIGdvb2dsZSBtYXAgdGhhdCB0aGUgY2x1c3RlcmVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcH0gbWFwIFRoZSBtYXAuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24obWFwKSB7XG4gIHRoaXMubWFwXyA9IG1hcDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSBncmlkLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGdyaWQgc2l6ZS5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRHcmlkU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5ncmlkU2l6ZV87XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgc2l6ZSBvZiB0aGUgZ3JpZC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldEdyaWRTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xuICB0aGlzLmdyaWRTaXplXyA9IHNpemU7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWluIGNsdXN0ZXIgc2l6ZS5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmlkIHNpemUuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWluQ2x1c3RlclNpemUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWluQ2x1c3RlclNpemVfO1xufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBtaW4gY2x1c3RlciBzaXplLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIFRoZSBncmlkIHNpemUuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0TWluQ2x1c3RlclNpemUgPSBmdW5jdGlvbihzaXplKSB7XG4gIHRoaXMubWluQ2x1c3RlclNpemVfID0gc2l6ZTtcbn07XG5cblxuLyoqXG4gKiBFeHRlbmRzIGEgYm91bmRzIG9iamVjdCBieSB0aGUgZ3JpZCBzaXplLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSBib3VuZHMgVGhlIGJvdW5kcyB0byBleHRlbmQuXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IFRoZSBleHRlbmRlZCBib3VuZHMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0RXh0ZW5kZWRCb3VuZHMgPSBmdW5jdGlvbihib3VuZHMpIHtcbiAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcblxuICAvLyBUdXJuIHRoZSBib3VuZHMgaW50byBsYXRsbmcuXG4gIHZhciB0ciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLmdldE5vcnRoRWFzdCgpLmxhdCgpLFxuICAgICAgYm91bmRzLmdldE5vcnRoRWFzdCgpLmxuZygpKTtcbiAgdmFyIGJsID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhib3VuZHMuZ2V0U291dGhXZXN0KCkubGF0KCksXG4gICAgICBib3VuZHMuZ2V0U291dGhXZXN0KCkubG5nKCkpO1xuXG4gIC8vIENvbnZlcnQgdGhlIHBvaW50cyB0byBwaXhlbHMgYW5kIHRoZSBleHRlbmQgb3V0IGJ5IHRoZSBncmlkIHNpemUuXG4gIHZhciB0clBpeCA9IHByb2plY3Rpb24uZnJvbUxhdExuZ1RvRGl2UGl4ZWwodHIpO1xuICB0clBpeC54ICs9IHRoaXMuZ3JpZFNpemVfO1xuICB0clBpeC55IC09IHRoaXMuZ3JpZFNpemVfO1xuXG4gIHZhciBibFBpeCA9IHByb2plY3Rpb24uZnJvbUxhdExuZ1RvRGl2UGl4ZWwoYmwpO1xuICBibFBpeC54IC09IHRoaXMuZ3JpZFNpemVfO1xuICBibFBpeC55ICs9IHRoaXMuZ3JpZFNpemVfO1xuXG4gIC8vIENvbnZlcnQgdGhlIHBpeGVsIHBvaW50cyBiYWNrIHRvIExhdExuZ1xuICB2YXIgbmUgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKHRyUGl4KTtcbiAgdmFyIHN3ID0gcHJvamVjdGlvbi5mcm9tRGl2UGl4ZWxUb0xhdExuZyhibFBpeCk7XG5cbiAgLy8gRXh0ZW5kIHRoZSBib3VuZHMgdG8gY29udGFpbiB0aGUgbmV3IGJvdW5kcy5cbiAgYm91bmRzLmV4dGVuZChuZSk7XG4gIGJvdW5kcy5leHRlbmQoc3cpO1xuXG4gIHJldHVybiBib3VuZHM7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5zIGlmIGEgbWFya2VyIGlzIGNvbnRhaW5lZCBpbiBhIGJvdW5kcy5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gY2hlY2suXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ0JvdW5kc30gYm91bmRzIFRoZSBib3VuZHMgdG8gY2hlY2sgYWdhaW5zdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciBpcyBpbiB0aGUgYm91bmRzLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5pc01hcmtlckluQm91bmRzXyA9IGZ1bmN0aW9uKG1hcmtlciwgYm91bmRzKSB7XG4gIHJldHVybiBib3VuZHMuY29udGFpbnMobWFya2VyLmdldFBvc2l0aW9uKCkpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyBhbGwgY2x1c3RlcnMgYW5kIG1hcmtlcnMgZnJvbSB0aGUgY2x1c3RlcmVyLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmNsZWFyTWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnJlc2V0Vmlld3BvcnQodHJ1ZSk7XG5cbiAgLy8gU2V0IHRoZSBtYXJrZXJzIGEgZW1wdHkgYXJyYXkuXG4gIHRoaXMubWFya2Vyc18gPSBbXTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGV4aXN0aW5nIGNsdXN0ZXJzIGFuZCByZWNyZWF0ZXMgdGhlbS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2hpZGUgVG8gYWxzbyBoaWRlIHRoZSBtYXJrZXIuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVzZXRWaWV3cG9ydCA9IGZ1bmN0aW9uKG9wdF9oaWRlKSB7XG4gIC8vIFJlbW92ZSBhbGwgdGhlIGNsdXN0ZXJzXG4gIGZvciAodmFyIGkgPSAwLCBjbHVzdGVyOyBjbHVzdGVyID0gdGhpcy5jbHVzdGVyc19baV07IGkrKykge1xuICAgIGNsdXN0ZXIucmVtb3ZlKCk7XG4gIH1cblxuICAvLyBSZXNldCB0aGUgbWFya2VycyB0byBub3QgYmUgYWRkZWQgYW5kIHRvIGJlIGludmlzaWJsZS5cbiAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgICBpZiAob3B0X2hpZGUpIHtcbiAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5jbHVzdGVyc18gPSBbXTtcbn07XG5cbi8qKlxuICpcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZXBhaW50ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBvbGRDbHVzdGVycyA9IHRoaXMuY2x1c3RlcnNfLnNsaWNlKCk7XG4gIHRoaXMuY2x1c3RlcnNfLmxlbmd0aCA9IDA7XG4gIHRoaXMucmVzZXRWaWV3cG9ydCgpO1xuICB0aGlzLnJlZHJhdygpO1xuXG4gIC8vIFJlbW92ZSB0aGUgb2xkIGNsdXN0ZXJzLlxuICAvLyBEbyBpdCBpbiBhIHRpbWVvdXQgc28gdGhlIG90aGVyIGNsdXN0ZXJzIGhhdmUgYmVlbiBkcmF3biBmaXJzdC5cbiAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGNsdXN0ZXI7IGNsdXN0ZXIgPSBvbGRDbHVzdGVyc1tpXTsgaSsrKSB7XG4gICAgICBjbHVzdGVyLnJlbW92ZSgpO1xuICAgIH1cbiAgfSwgMCk7XG59O1xuXG5cbi8qKlxuICogUmVkcmF3cyB0aGUgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY3JlYXRlQ2x1c3RlcnNfKCk7XG59O1xuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gbGF0bG5nIGxvY2F0aW9ucyBpbiBrbS5cbiAqIEBzZWUgaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ30gcDEgVGhlIGZpcnN0IGxhdCBsbmcgcG9pbnQuXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLkxhdExuZ30gcDIgVGhlIHNlY29uZCBsYXQgbG5nIHBvaW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIHBvaW50cyBpbiBrbS5cbiAqIEBwcml2YXRlXG4qL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5kaXN0YW5jZUJldHdlZW5Qb2ludHNfID0gZnVuY3Rpb24ocDEsIHAyKSB7XG4gIGlmICghcDEgfHwgIXAyKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICB2YXIgUiA9IDYzNzE7IC8vIFJhZGl1cyBvZiB0aGUgRWFydGggaW4ga21cbiAgdmFyIGRMYXQgPSAocDIubGF0KCkgLSBwMS5sYXQoKSkgKiBNYXRoLlBJIC8gMTgwO1xuICB2YXIgZExvbiA9IChwMi5sbmcoKSAtIHAxLmxuZygpKSAqIE1hdGguUEkgLyAxODA7XG4gIHZhciBhID0gTWF0aC5zaW4oZExhdCAvIDIpICogTWF0aC5zaW4oZExhdCAvIDIpICtcbiAgICBNYXRoLmNvcyhwMS5sYXQoKSAqIE1hdGguUEkgLyAxODApICogTWF0aC5jb3MocDIubGF0KCkgKiBNYXRoLlBJIC8gMTgwKSAqXG4gICAgTWF0aC5zaW4oZExvbiAvIDIpICogTWF0aC5zaW4oZExvbiAvIDIpO1xuICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG4gIHZhciBkID0gUiAqIGM7XG4gIHJldHVybiBkO1xufTtcblxuXG4vKipcbiAqIEFkZCBhIG1hcmtlciB0byBhIGNsdXN0ZXIsIG9yIGNyZWF0ZXMgYSBuZXcgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gYWRkLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5hZGRUb0Nsb3Nlc3RDbHVzdGVyXyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICB2YXIgZGlzdGFuY2UgPSA0MDAwMDsgLy8gU29tZSBsYXJnZSBudW1iZXJcbiAgdmFyIGNsdXN0ZXJUb0FkZFRvID0gbnVsbDtcbiAgdmFyIHBvcyA9IG1hcmtlci5nZXRQb3NpdGlvbigpO1xuICBmb3IgKHZhciBpID0gMCwgY2x1c3RlcjsgY2x1c3RlciA9IHRoaXMuY2x1c3RlcnNfW2ldOyBpKyspIHtcbiAgICB2YXIgY2VudGVyID0gY2x1c3Rlci5nZXRDZW50ZXIoKTtcbiAgICBpZiAoY2VudGVyKSB7XG4gICAgICB2YXIgZCA9IHRoaXMuZGlzdGFuY2VCZXR3ZWVuUG9pbnRzXyhjZW50ZXIsIG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgICAgIGlmIChkIDwgZGlzdGFuY2UpIHtcbiAgICAgICAgZGlzdGFuY2UgPSBkO1xuICAgICAgICBjbHVzdGVyVG9BZGRUbyA9IGNsdXN0ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGNsdXN0ZXJUb0FkZFRvICYmIGNsdXN0ZXJUb0FkZFRvLmlzTWFya2VySW5DbHVzdGVyQm91bmRzKG1hcmtlcikpIHtcbiAgICBjbHVzdGVyVG9BZGRUby5hZGRNYXJrZXIobWFya2VyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY2x1c3RlciA9IG5ldyBDbHVzdGVyKHRoaXMpO1xuICAgIGNsdXN0ZXIuYWRkTWFya2VyKG1hcmtlcik7XG4gICAgdGhpcy5jbHVzdGVyc18ucHVzaChjbHVzdGVyKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGNsdXN0ZXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY3JlYXRlQ2x1c3RlcnNfID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5yZWFkeV8pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBHZXQgb3VyIGN1cnJlbnQgbWFwIHZpZXcgYm91bmRzLlxuICAvLyBDcmVhdGUgYSBuZXcgYm91bmRzIG9iamVjdCBzbyB3ZSBkb24ndCBhZmZlY3QgdGhlIG1hcC5cbiAgdmFyIG1hcEJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHModGhpcy5tYXBfLmdldEJvdW5kcygpLmdldFNvdXRoV2VzdCgpLFxuICAgICAgdGhpcy5tYXBfLmdldEJvdW5kcygpLmdldE5vcnRoRWFzdCgpKTtcbiAgdmFyIGJvdW5kcyA9IHRoaXMuZ2V0RXh0ZW5kZWRCb3VuZHMobWFwQm91bmRzKTtcblxuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICBpZiAoIW1hcmtlci5pc0FkZGVkICYmIHRoaXMuaXNNYXJrZXJJbkJvdW5kc18obWFya2VyLCBib3VuZHMpKSB7XG4gICAgICB0aGlzLmFkZFRvQ2xvc2VzdENsdXN0ZXJfKG1hcmtlcik7XG4gICAgfVxuICB9XG59O1xuXG5cbi8qKlxuICogQSBjbHVzdGVyIHRoYXQgY29udGFpbnMgbWFya2Vycy5cbiAqXG4gKiBAcGFyYW0ge01hcmtlckNsdXN0ZXJlcn0gbWFya2VyQ2x1c3RlcmVyIFRoZSBtYXJrZXJjbHVzdGVyZXIgdGhhdCB0aGlzXG4gKiAgICAgY2x1c3RlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gQ2x1c3RlcihtYXJrZXJDbHVzdGVyZXIpIHtcbiAgdGhpcy5tYXJrZXJDbHVzdGVyZXJfID0gbWFya2VyQ2x1c3RlcmVyO1xuICB0aGlzLm1hcF8gPSBtYXJrZXJDbHVzdGVyZXIuZ2V0TWFwKCk7XG4gIHRoaXMuZ3JpZFNpemVfID0gbWFya2VyQ2x1c3RlcmVyLmdldEdyaWRTaXplKCk7XG4gIHRoaXMubWluQ2x1c3RlclNpemVfID0gbWFya2VyQ2x1c3RlcmVyLmdldE1pbkNsdXN0ZXJTaXplKCk7XG4gIHRoaXMuYXZlcmFnZUNlbnRlcl8gPSBtYXJrZXJDbHVzdGVyZXIuaXNBdmVyYWdlQ2VudGVyKCk7XG4gIHRoaXMuY2VudGVyXyA9IG51bGw7XG4gIHRoaXMubWFya2Vyc18gPSBbXTtcbiAgdGhpcy5ib3VuZHNfID0gbnVsbDtcbiAgdGhpcy5jbHVzdGVySWNvbl8gPSBuZXcgQ2x1c3Rlckljb24odGhpcywgbWFya2VyQ2x1c3RlcmVyLmdldFN0eWxlcygpLFxuICAgICAgbWFya2VyQ2x1c3RlcmVyLmdldEdyaWRTaXplKCkpO1xufVxuXG4vKipcbiAqIERldGVybWlucyBpZiBhIG1hcmtlciBpcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFya2VyfSBtYXJrZXIgVGhlIG1hcmtlciB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciBpcyBhbHJlYWR5IGFkZGVkLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5pc01hcmtlckFscmVhZHlBZGRlZCA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICBpZiAodGhpcy5tYXJrZXJzXy5pbmRleE9mKSB7XG4gICAgcmV0dXJuIHRoaXMubWFya2Vyc18uaW5kZXhPZihtYXJrZXIpICE9IC0xO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwLCBtOyBtID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgICBpZiAobSA9PSBtYXJrZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblxuLyoqXG4gKiBBZGQgYSBtYXJrZXIgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciB3YXMgYWRkZWQuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmFkZE1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICBpZiAodGhpcy5pc01hcmtlckFscmVhZHlBZGRlZChtYXJrZXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKCF0aGlzLmNlbnRlcl8pIHtcbiAgICB0aGlzLmNlbnRlcl8gPSBtYXJrZXIuZ2V0UG9zaXRpb24oKTtcbiAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kc18oKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhpcy5hdmVyYWdlQ2VudGVyXykge1xuICAgICAgdmFyIGwgPSB0aGlzLm1hcmtlcnNfLmxlbmd0aCArIDE7XG4gICAgICB2YXIgbGF0ID0gKHRoaXMuY2VudGVyXy5sYXQoKSAqIChsLTEpICsgbWFya2VyLmdldFBvc2l0aW9uKCkubGF0KCkpIC8gbDtcbiAgICAgIHZhciBsbmcgPSAodGhpcy5jZW50ZXJfLmxuZygpICogKGwtMSkgKyBtYXJrZXIuZ2V0UG9zaXRpb24oKS5sbmcoKSkgLyBsO1xuICAgICAgdGhpcy5jZW50ZXJfID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXQsIGxuZyk7XG4gICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kc18oKTtcbiAgICB9XG4gIH1cblxuICBtYXJrZXIuaXNBZGRlZCA9IHRydWU7XG4gIHRoaXMubWFya2Vyc18ucHVzaChtYXJrZXIpO1xuXG4gIHZhciBsZW4gPSB0aGlzLm1hcmtlcnNfLmxlbmd0aDtcbiAgaWYgKGxlbiA8IHRoaXMubWluQ2x1c3RlclNpemVfICYmIG1hcmtlci5nZXRNYXAoKSAhPSB0aGlzLm1hcF8pIHtcbiAgICAvLyBNaW4gY2x1c3RlciBzaXplIG5vdCByZWFjaGVkIHNvIHNob3cgdGhlIG1hcmtlci5cbiAgICBtYXJrZXIuc2V0TWFwKHRoaXMubWFwXyk7XG4gIH1cblxuICBpZiAobGVuID09IHRoaXMubWluQ2x1c3RlclNpemVfKSB7XG4gICAgLy8gSGlkZSB0aGUgbWFya2VycyB0aGF0IHdlcmUgc2hvd2luZy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0aGlzLm1hcmtlcnNfW2ldLnNldE1hcChudWxsKTtcbiAgICB9XG4gIH1cblxuICBpZiAobGVuID49IHRoaXMubWluQ2x1c3RlclNpemVfKSB7XG4gICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgfVxuXG4gIHRoaXMudXBkYXRlSWNvbigpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXJrZXIgY2x1c3RlcmVyIHRoYXQgdGhlIGNsdXN0ZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEByZXR1cm4ge01hcmtlckNsdXN0ZXJlcn0gVGhlIGFzc29jaWF0ZWQgbWFya2VyIGNsdXN0ZXJlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0TWFya2VyQ2x1c3RlcmVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcmtlckNsdXN0ZXJlcl87XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgYm91bmRzIG9mIHRoZSBjbHVzdGVyLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLkxhdExuZ0JvdW5kc30gdGhlIGNsdXN0ZXIgYm91bmRzLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHModGhpcy5jZW50ZXJfLCB0aGlzLmNlbnRlcl8pO1xuICB2YXIgbWFya2VycyA9IHRoaXMuZ2V0TWFya2VycygpO1xuICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgfVxuICByZXR1cm4gYm91bmRzO1xufTtcblxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGNsdXN0ZXJcbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY2x1c3Rlckljb25fLnJlbW92ZSgpO1xuICB0aGlzLm1hcmtlcnNfLmxlbmd0aCA9IDA7XG4gIGRlbGV0ZSB0aGlzLm1hcmtlcnNfO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGNlbnRlciBvZiB0aGUgY2x1c3Rlci5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBjbHVzdGVyIGNlbnRlci5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5tYXJrZXJzXy5sZW5ndGg7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2VudGVyIG9mIHRoZSBjbHVzdGVyLlxuICpcbiAqIEByZXR1cm4ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBUaGUgY2x1c3RlciBjZW50ZXIuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldE1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMubWFya2Vyc187XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2VudGVyIG9mIHRoZSBjbHVzdGVyLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLkxhdExuZ30gVGhlIGNsdXN0ZXIgY2VudGVyLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuY2VudGVyXztcbn07XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVkIHRoZSBleHRlbmRlZCBib3VuZHMgb2YgdGhlIGNsdXN0ZXIgd2l0aCB0aGUgZ3JpZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5jYWxjdWxhdGVCb3VuZHNfID0gZnVuY3Rpb24oKSB7XG4gIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHRoaXMuY2VudGVyXywgdGhpcy5jZW50ZXJfKTtcbiAgdGhpcy5ib3VuZHNfID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldEV4dGVuZGVkQm91bmRzKGJvdW5kcyk7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIG1hcmtlciBsaWVzIGluIHRoZSBjbHVzdGVycyBib3VuZHMuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIGxpZXMgaW4gdGhlIGJvdW5kcy5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuaXNNYXJrZXJJbkNsdXN0ZXJCb3VuZHMgPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgcmV0dXJuIHRoaXMuYm91bmRzXy5jb250YWlucyhtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWFwIHRoYXQgdGhlIGNsdXN0ZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLk1hcH0gVGhlIG1hcC5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm1hcF87XG59O1xuXG5cbi8qKlxuICogVXBkYXRlcyB0aGUgY2x1c3RlciBpY29uXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLnVwZGF0ZUljb24gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHpvb20gPSB0aGlzLm1hcF8uZ2V0Wm9vbSgpO1xuICB2YXIgbXogPSB0aGlzLm1hcmtlckNsdXN0ZXJlcl8uZ2V0TWF4Wm9vbSgpO1xuXG4gIGlmIChteiAmJiB6b29tID4gbXopIHtcbiAgICAvLyBUaGUgem9vbSBpcyBncmVhdGVyIHRoYW4gb3VyIG1heCB6b29tIHNvIHNob3cgYWxsIHRoZSBtYXJrZXJzIGluIGNsdXN0ZXIuXG4gICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgICBtYXJrZXIuc2V0TWFwKHRoaXMubWFwXyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLm1hcmtlcnNfLmxlbmd0aCA8IHRoaXMubWluQ2x1c3RlclNpemVfKSB7XG4gICAgLy8gTWluIGNsdXN0ZXIgc2l6ZSBub3QgeWV0IHJlYWNoZWQuXG4gICAgdGhpcy5jbHVzdGVySWNvbl8uaGlkZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBudW1TdHlsZXMgPSB0aGlzLm1hcmtlckNsdXN0ZXJlcl8uZ2V0U3R5bGVzKCkubGVuZ3RoO1xuICB2YXIgc3VtcyA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRDYWxjdWxhdG9yKCkodGhpcy5tYXJrZXJzXywgbnVtU3R5bGVzKTtcbiAgdGhpcy5jbHVzdGVySWNvbl8uc2V0Q2VudGVyKHRoaXMuY2VudGVyXyk7XG4gIHRoaXMuY2x1c3Rlckljb25fLnNldFN1bXMoc3Vtcyk7XG4gIHRoaXMuY2x1c3Rlckljb25fLnNob3coKTtcbn07XG5cblxuLyoqXG4gKiBBIGNsdXN0ZXIgaWNvblxuICpcbiAqIEBwYXJhbSB7Q2x1c3Rlcn0gY2x1c3RlciBUaGUgY2x1c3RlciB0byBiZSBhc3NvY2lhdGVkIHdpdGguXG4gKiBAcGFyYW0ge09iamVjdH0gc3R5bGVzIEFuIG9iamVjdCB0aGF0IGhhcyBzdHlsZSBwcm9wZXJ0aWVzOlxuICogICAgICd1cmwnOiAoc3RyaW5nKSBUaGUgaW1hZ2UgdXJsLlxuICogICAgICdoZWlnaHQnOiAobnVtYmVyKSBUaGUgaW1hZ2UgaGVpZ2h0LlxuICogICAgICd3aWR0aCc6IChudW1iZXIpIFRoZSBpbWFnZSB3aWR0aC5cbiAqICAgICAnYW5jaG9yJzogKEFycmF5KSBUaGUgYW5jaG9yIHBvc2l0aW9uIG9mIHRoZSBsYWJlbCB0ZXh0LlxuICogICAgICd0ZXh0Q29sb3InOiAoc3RyaW5nKSBUaGUgdGV4dCBjb2xvci5cbiAqICAgICAndGV4dFNpemUnOiAobnVtYmVyKSBUaGUgdGV4dCBzaXplLlxuICogICAgICdiYWNrZ3JvdW5kUG9zaXRpb246IChzdHJpbmcpIFRoZSBiYWNrZ3JvdW5kIHBvc3RpdGlvbiB4LCB5LlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcGFkZGluZyBPcHRpb25hbCBwYWRkaW5nIHRvIGFwcGx5IHRvIHRoZSBjbHVzdGVyIGljb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3XG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIENsdXN0ZXJJY29uKGNsdXN0ZXIsIHN0eWxlcywgb3B0X3BhZGRpbmcpIHtcbiAgY2x1c3Rlci5nZXRNYXJrZXJDbHVzdGVyZXIoKS5leHRlbmQoQ2x1c3Rlckljb24sIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3KTtcblxuICB0aGlzLnN0eWxlc18gPSBzdHlsZXM7XG4gIHRoaXMucGFkZGluZ18gPSBvcHRfcGFkZGluZyB8fCAwO1xuICB0aGlzLmNsdXN0ZXJfID0gY2x1c3RlcjtcbiAgdGhpcy5jZW50ZXJfID0gbnVsbDtcbiAgdGhpcy5tYXBfID0gY2x1c3Rlci5nZXRNYXAoKTtcbiAgdGhpcy5kaXZfID0gbnVsbDtcbiAgdGhpcy5zdW1zXyA9IG51bGw7XG4gIHRoaXMudmlzaWJsZV8gPSBmYWxzZTtcblxuICB0aGlzLnNldE1hcCh0aGlzLm1hcF8pO1xufVxuXG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNsdXN0ZXJjbGljayBldmVudCBhbmQgem9vbSdzIGlmIHRoZSBvcHRpb24gaXMgc2V0LlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUudHJpZ2dlckNsdXN0ZXJDbGljayA9IGZ1bmN0aW9uKCkge1xuICB2YXIgbWFya2VyQ2x1c3RlcmVyID0gdGhpcy5jbHVzdGVyXy5nZXRNYXJrZXJDbHVzdGVyZXIoKTtcblxuICAvLyBUcmlnZ2VyIHRoZSBjbHVzdGVyY2xpY2sgZXZlbnQuXG4gIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFya2VyQ2x1c3RlcmVyLCAnY2x1c3RlcmNsaWNrJywgdGhpcy5jbHVzdGVyXyk7XG5cbiAgaWYgKG1hcmtlckNsdXN0ZXJlci5pc1pvb21PbkNsaWNrKCkpIHtcbiAgICAvLyBab29tIGludG8gdGhlIGNsdXN0ZXIuXG4gICAgdGhpcy5tYXBfLmZpdEJvdW5kcyh0aGlzLmNsdXN0ZXJfLmdldEJvdW5kcygpKTtcbiAgfVxufTtcblxuXG4vKipcbiAqIEFkZGluZyB0aGUgY2x1c3RlciBpY29uIHRvIHRoZSBkb20uXG4gKiBAaWdub3JlXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5vbkFkZCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRpdl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgaWYgKHRoaXMudmlzaWJsZV8pIHtcbiAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5jc3NUZXh0ID0gdGhpcy5jcmVhdGVDc3MocG9zKTtcbiAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gdGhpcy5zdW1zXy50ZXh0O1xuICB9XG5cbiAgdmFyIHBhbmVzID0gdGhpcy5nZXRQYW5lcygpO1xuICBwYW5lcy5vdmVybGF5TW91c2VUYXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5kaXZfKTtcblxuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHRoaXMuZGl2XywgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgdGhhdC50cmlnZ2VyQ2x1c3RlckNsaWNrKCk7XG4gIH0pO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvc2l0aW9uIHRvIHBsYWNlIHRoZSBkaXYgZGVuZGluZyBvbiB0aGUgbGF0bG5nLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBsYXRsbmcgVGhlIHBvc2l0aW9uIGluIGxhdGxuZy5cbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLlBvaW50fSBUaGUgcG9zaXRpb24gaW4gcGl4ZWxzLlxuICogQHByaXZhdGVcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmdldFBvc0Zyb21MYXRMbmdfID0gZnVuY3Rpb24obGF0bG5nKSB7XG4gIHZhciBwb3MgPSB0aGlzLmdldFByb2plY3Rpb24oKS5mcm9tTGF0TG5nVG9EaXZQaXhlbChsYXRsbmcpO1xuICBwb3MueCAtPSBwYXJzZUludCh0aGlzLndpZHRoXyAvIDIsIDEwKTtcbiAgcG9zLnkgLT0gcGFyc2VJbnQodGhpcy5oZWlnaHRfIC8gMiwgMTApO1xuICByZXR1cm4gcG9zO1xufTtcblxuXG4vKipcbiAqIERyYXcgdGhlIGljb24uXG4gKiBAaWdub3JlXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLnZpc2libGVfKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuZ2V0UG9zRnJvbUxhdExuZ18odGhpcy5jZW50ZXJfKTtcbiAgICB0aGlzLmRpdl8uc3R5bGUudG9wID0gcG9zLnkgKyAncHgnO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5sZWZ0ID0gcG9zLnggKyAncHgnO1xuICB9XG59O1xuXG5cbi8qKlxuICogSGlkZSB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuZGl2Xykge1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG4gIHRoaXMudmlzaWJsZV8gPSBmYWxzZTtcbn07XG5cblxuLyoqXG4gKiBQb3NpdGlvbiBhbmQgc2hvdyB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuZGl2Xykge1xuICAgIHZhciBwb3MgPSB0aGlzLmdldFBvc0Zyb21MYXRMbmdfKHRoaXMuY2VudGVyXyk7XG4gICAgdGhpcy5kaXZfLnN0eWxlLmNzc1RleHQgPSB0aGlzLmNyZWF0ZUNzcyhwb3MpO1xuICAgIHRoaXMuZGl2Xy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gIH1cbiAgdGhpcy52aXNpYmxlXyA9IHRydWU7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlIHRoZSBpY29uIGZyb20gdGhlIG1hcFxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc2V0TWFwKG51bGwpO1xufTtcblxuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBvblJlbW92ZSBpbnRlcmZhY2UuXG4gKiBAaWdub3JlXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5kaXZfICYmIHRoaXMuZGl2Xy5wYXJlbnROb2RlKSB7XG4gICAgdGhpcy5oaWRlKCk7XG4gICAgdGhpcy5kaXZfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kaXZfKTtcbiAgICB0aGlzLmRpdl8gPSBudWxsO1xuICB9XG59O1xuXG5cbi8qKlxuICogU2V0IHRoZSBzdW1zIG9mIHRoZSBpY29uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzdW1zIFRoZSBzdW1zIGNvbnRhaW5pbmc6XG4gKiAgICd0ZXh0JzogKHN0cmluZykgVGhlIHRleHQgdG8gZGlzcGxheSBpbiB0aGUgaWNvbi5cbiAqICAgJ2luZGV4JzogKG51bWJlcikgVGhlIHN0eWxlIGluZGV4IG9mIHRoZSBpY29uLlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuc2V0U3VtcyA9IGZ1bmN0aW9uKHN1bXMpIHtcbiAgdGhpcy5zdW1zXyA9IHN1bXM7XG4gIHRoaXMudGV4dF8gPSBzdW1zLnRleHQ7XG4gIHRoaXMuaW5kZXhfID0gc3Vtcy5pbmRleDtcbiAgaWYgKHRoaXMuZGl2Xykge1xuICAgIHRoaXMuZGl2Xy5pbm5lckhUTUwgPSBzdW1zLnRleHQ7XG4gIH1cblxuICB0aGlzLnVzZVN0eWxlKCk7XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgaWNvbiB0byB0aGUgdGhlIHN0eWxlcy5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnVzZVN0eWxlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpbmRleCA9IE1hdGgubWF4KDAsIHRoaXMuc3Vtc18uaW5kZXggLSAxKTtcbiAgaW5kZXggPSBNYXRoLm1pbih0aGlzLnN0eWxlc18ubGVuZ3RoIC0gMSwgaW5kZXgpO1xuICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlc19baW5kZXhdO1xuICB0aGlzLnVybF8gPSBzdHlsZVsndXJsJ107XG4gIHRoaXMuaGVpZ2h0XyA9IHN0eWxlWydoZWlnaHQnXTtcbiAgdGhpcy53aWR0aF8gPSBzdHlsZVsnd2lkdGgnXTtcbiAgdGhpcy50ZXh0Q29sb3JfID0gc3R5bGVbJ3RleHRDb2xvciddO1xuICB0aGlzLmFuY2hvcl8gPSBzdHlsZVsnYW5jaG9yJ107XG4gIHRoaXMudGV4dFNpemVfID0gc3R5bGVbJ3RleHRTaXplJ107XG4gIHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA9IHN0eWxlWydiYWNrZ3JvdW5kUG9zaXRpb24nXTtcbn07XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBjZW50ZXIgb2YgdGhlIGljb24uXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmd9IGNlbnRlciBUaGUgbGF0bG5nIHRvIHNldCBhcyB0aGUgY2VudGVyLlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24oY2VudGVyKSB7XG4gIHRoaXMuY2VudGVyXyA9IGNlbnRlcjtcbn07XG5cblxuLyoqXG4gKiBDcmVhdGUgdGhlIGNzcyB0ZXh0IGJhc2VkIG9uIHRoZSBwb3NpdGlvbiBvZiB0aGUgaWNvbi5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLlBvaW50fSBwb3MgVGhlIHBvc2l0aW9uLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY3NzIHN0eWxlIHRleHQuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5jcmVhdGVDc3MgPSBmdW5jdGlvbihwb3MpIHtcbiAgdmFyIHN0eWxlID0gW107XG4gIHN0eWxlLnB1c2goJ2JhY2tncm91bmQtaW1hZ2U6dXJsKCcgKyB0aGlzLnVybF8gKyAnKTsnKTtcbiAgdmFyIGJhY2tncm91bmRQb3NpdGlvbiA9IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA/IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA6ICcwIDAnO1xuICBzdHlsZS5wdXNoKCdiYWNrZ3JvdW5kLXBvc2l0aW9uOicgKyBiYWNrZ3JvdW5kUG9zaXRpb24gKyAnOycpO1xuXG4gIGlmICh0eXBlb2YgdGhpcy5hbmNob3JfID09PSAnb2JqZWN0Jykge1xuICAgIGlmICh0eXBlb2YgdGhpcy5hbmNob3JfWzBdID09PSAnbnVtYmVyJyAmJiB0aGlzLmFuY2hvcl9bMF0gPiAwICYmXG4gICAgICAgIHRoaXMuYW5jaG9yX1swXSA8IHRoaXMuaGVpZ2h0Xykge1xuICAgICAgc3R5bGUucHVzaCgnaGVpZ2h0OicgKyAodGhpcy5oZWlnaHRfIC0gdGhpcy5hbmNob3JfWzBdKSArXG4gICAgICAgICAgJ3B4OyBwYWRkaW5nLXRvcDonICsgdGhpcy5hbmNob3JfWzBdICsgJ3B4OycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5wdXNoKCdoZWlnaHQ6JyArIHRoaXMuaGVpZ2h0XyArICdweDsgbGluZS1oZWlnaHQ6JyArIHRoaXMuaGVpZ2h0XyArXG4gICAgICAgICAgJ3B4OycpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMuYW5jaG9yX1sxXSA9PT0gJ251bWJlcicgJiYgdGhpcy5hbmNob3JfWzFdID4gMCAmJlxuICAgICAgICB0aGlzLmFuY2hvcl9bMV0gPCB0aGlzLndpZHRoXykge1xuICAgICAgc3R5bGUucHVzaCgnd2lkdGg6JyArICh0aGlzLndpZHRoXyAtIHRoaXMuYW5jaG9yX1sxXSkgK1xuICAgICAgICAgICdweDsgcGFkZGluZy1sZWZ0OicgKyB0aGlzLmFuY2hvcl9bMV0gKyAncHg7Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLnB1c2goJ3dpZHRoOicgKyB0aGlzLndpZHRoXyArICdweDsgdGV4dC1hbGlnbjpjZW50ZXI7Jyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHN0eWxlLnB1c2goJ2hlaWdodDonICsgdGhpcy5oZWlnaHRfICsgJ3B4OyBsaW5lLWhlaWdodDonICtcbiAgICAgICAgdGhpcy5oZWlnaHRfICsgJ3B4OyB3aWR0aDonICsgdGhpcy53aWR0aF8gKyAncHg7IHRleHQtYWxpZ246Y2VudGVyOycpO1xuICB9XG5cbiAgdmFyIHR4dENvbG9yID0gdGhpcy50ZXh0Q29sb3JfID8gdGhpcy50ZXh0Q29sb3JfIDogJ2JsYWNrJztcbiAgdmFyIHR4dFNpemUgPSB0aGlzLnRleHRTaXplXyA/IHRoaXMudGV4dFNpemVfIDogMTE7XG5cbiAgc3R5bGUucHVzaCgnY3Vyc29yOnBvaW50ZXI7IHRvcDonICsgcG9zLnkgKyAncHg7IGxlZnQ6JyArXG4gICAgICBwb3MueCArICdweDsgY29sb3I6JyArIHR4dENvbG9yICsgJzsgcG9zaXRpb246YWJzb2x1dGU7IGZvbnQtc2l6ZTonICtcbiAgICAgIHR4dFNpemUgKyAncHg7IGZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7IGZvbnQtd2VpZ2h0OmJvbGQnKTtcbiAgcmV0dXJuIHN0eWxlLmpvaW4oJycpO1xufTtcbiIsIihmdW5jdGlvbih3aW5kb3cpe1xuICB2YXIgTGlzdCA9IChmdW5jdGlvbigpe1xuICAgIGZ1bmN0aW9uIExpc3QocGFyYW1zKXtcbiAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICB9O1xuICAgIExpc3QucHJvdG90eXBlID0ge1xuICAgICAgYWRkOiBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24oaXRlbSl7IFxuICAgICAgICB2YXIgaW5kZXhPZiA9IHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgaWYgKGluZGV4T2YgIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaW5kZXhPZiwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmaW5kOiBmdW5jdGlvbihjYWxsYmFjaywgYWN0aW9uKXtcbiAgICAgICAgdmFyIGNhbGxiYWNrUmV0dXJuLFxuICAgICAgICAgICAgaXRlbXMgPSB0aGlzLml0ZW1zLFxuICAgICAgICAgICAgbGVuZ3RoID0gaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF0Y2hlcyA9IFtdLFxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IoOyBpIDwgbGVuZ3RoOyBpKyspe1xuICAgICAgICAgIGNhbGxiYWNrUmV0dXJuID0gY2FsbGJhY2soaXRlbXNbaV0sIGkpO1xuICAgICAgICAgIGlmKGNhbGxiYWNrUmV0dXJuKSB7XG4gICAgICAgICAgICBtYXRjaGVzLnB1c2goaXRlbXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgICBhY3Rpb24uY2FsbCh0aGlzLCBtYXRjaGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHJldHVybiBMaXN0O1xuICB9KCkpO1xuICBMaXN0LmNyZWF0ZSA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgTGlzdChwYXJhbXMpO1xuICB9XG4gIHdpbmRvdy5MaXN0ID0gTGlzdDtcbn0od2luZG93KSk7IiwiKGZ1bmN0aW9uKHdpbmRvdywgZ29vZ2xlLCBMaXN0KSB7XG5cbiAgdmFyIE1hcHN0ZXIgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gTWFwc3RlcihlbGVtZW50LCBvcHRzKSB7XG4gICAgICB0aGlzLmdNYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsZW1lbnQsIG9wdHMpO1xuICAgICAgdGhpcy5tYXJrZXJzID0gTGlzdC5jcmVhdGUoKTtcbiAgICAgIGlmIChvcHRzLmNsdXN0ZXIpIHtcbiAgICAgICAgdGhpcy5tYXJrZXJDbHVzdGVyZXIgPSBuZXcgTWFya2VyQ2x1c3RlcmVyKHRoaXMuZ01hcCwgW10sIG9wdHMuY2x1c3Rlci5vcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLmdlb2NvZGVyKSB7XG4gICAgICAgIHRoaXMuZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgTWFwc3Rlci5wcm90b3R5cGUgPSB7XG4gICAgICB6b29tOiBmdW5jdGlvbihsZXZlbCkge1xuICAgICAgICBpZihsZXZlbCkge1xuICAgICAgICAgIHRoaXMuZ01hcC5zZXRab29tKGxldmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5nTWFwLmdldFpvb20oKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFkZE1hcmtlcjogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB2YXIgbWFya2VyO1xuICAgICAgICB2YXIgaW5mb1dpZG93O1xuICAgICAgICBvcHRzLnBvc2l0aW9uID0ge1xuICAgICAgICAgIGxhdDogb3B0cy5sYXQsXG4gICAgICAgICAgbG5nOiBvcHRzLmxuZ1xuICAgICAgICB9XG4gICAgICAgIG1hcmtlciA9IHRoaXMuX2NyZWF0ZU1hcmtlcihvcHRzKTtcbiAgICAgICAgaWYodGhpcy5tYXJrZXJDbHVzdGVyZXIpIHtcbiAgICAgICAgICB0aGlzLm1hcmtlckNsdXN0ZXJlci5hZGRNYXJrZXIobWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtlcnMuYWRkKG1hcmtlcik7XG4gICAgICAgIGlmIChvcHRzLmV2ZW50cykge1xuICAgICAgICAgIHRoaXMuX2F0dGFjaEV2ZW50cyhtYXJrZXIsIG9wdHMuZXZlbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5jb250ZW50KSB7XG4gICAgICAgICAgdGhpcy5fb24oe1xuICAgICAgICAgICAgb2JqOiBtYXJrZXIsXG4gICAgICAgICAgICBldmVudDogJ2NsaWNrJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihlKSB7ICAgICAgIFxuICAgICAgICAgICAgICBpZiAoIWluZm9XaWRvdyl7XG4gICAgICAgICAgICAgICAgaW5mb1dpZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgICAgICAgICAgICAgY29udGVudDogb3B0cy5jb250ZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgIGlmKCFpbmZvV2lkb3cuZ2V0TWFwKCkpe1xuICAgICAgICAgICAgICAgIGluZm9XaWRvdy5vcGVuKHRoaXMuZ01hcCwgbWFya2VyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvV2lkb3cuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgICB9LFxuICAgICAgc2V0UGFubzogZnVuY3Rpb24oZWxlbWVudCwgb3B0cyl7XG4gICAgICAgIHZhciBwYW5vcmFtYSA9IG5ldyBnb29nbGUubWFwcy5TdHJlZXRWaWV3UGFub3JhbWEoZWxlbWVudCwgb3B0cyk7XG4gICAgICAgIHRoaXMuZ01hcC5zZXRTdHJlZXRWaWV3KHBhbm9yYW1hKTtcbiAgICAgICAgaWYgKG9wdHMuZXZlbnRzKSB7XG4gICAgICAgICAgdGhpcy5fYXR0YWNoRXZlbnRzKHBhbm9yYW1hLCBvcHRzLmV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmaW5kQnk6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtlcnMuZmluZChjYWxsYmFjaylcbiAgICAgIH0sXG4gICAgICByZW1vdmVCeTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLm1hcmtlcnMuZmluZChjYWxsYmFjaywgZnVuY3Rpb24obWFya2Vycykge1xuICAgICAgICAgIG1hcmtlcnMuZm9yRWFjaChmdW5jdGlvbihtYXJrZXIpe1xuICAgICAgICAgICAgaWYoc2VsZi5tYXJrZXJDbHVzdGVyZXIpe1xuICAgICAgICAgICAgICBzZWxmLm1hcmtlckNsdXN0ZXJlci5yZW1vdmVNYXJrZXIobWFya2VyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2VvY29kZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB0aGlzLmdlb2NvZGVyLmdlb2NvZGUoe1xuICAgICAgICAgIGFkZHJlc3M6IG9wdHMuYWRkcmVzc1xuICAgICAgICB9LGZ1bmN0aW9uKHJlc3VsdHMsIHN0YXR1cyl7XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spe1xuICAgICAgICAgICAgb3B0cy5zdWNjZXNzLmNhbGwodGhpcywgcmVzdWx0cywgc3RhdHVzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0cy5lcnJvci5jYWxsKHRoaXMsIHN0YXR1cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBfYXR0YWNoRXZlbnRzOiBmdW5jdGlvbihvYmosIGV2ZW50cyl7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICAgIHNlbGYuX29uKHtcbiAgICAgICAgICAgIG9iajogb2JqLFxuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50Lm5hbWUsXG4gICAgICAgICAgICBjYWxsYmFjazogZXZlbnQuY2FsbGJhY2tcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIF9vbjogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG9wdHMub2JqLCBvcHRzLmV2ZW50LCBmdW5jdGlvbihlKXtcbiAgICAgICAgICBvcHRzLmNhbGxiYWNrLmNhbGwoc2VsZiwgZSwgb3B0cy5vYmopO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBfY3JlYXRlTWFya2VyOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgIG9wdHMubWFwID0gdGhpcy5nTWFwO1xuICAgICAgICByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihvcHRzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE1hcHN0ZXI7XG4gIH0oKSk7XG5cbiAgTWFwc3Rlci5jcmVhdGUgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBNYXBzdGVyKGVsZW1lbnQsIG9wdHMpO1xuICB9O1xuXG4gIHdpbmRvdy5NYXBzdGVyID0gTWFwc3Rlcjtcbn0od2luZG93LCBnb29nbGUsIExpc3QpKTsiLCIoZnVuY3Rpb24od2luZG93LCBnb29nbGUsIG1hcHN0ZXIpe1xuICB2YXIgc3R5bGVzID0gW1xuICAgIHtcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZjVmNWY1XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy5pY29uXCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzYxNjE2MVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5zdHJva2VcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2Y1ZjVmNVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZS5sYW5kX3BhcmNlbFwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2JkYmRiZFwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2lcIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZWVlZWVlXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzc1NzU3NVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJwb2kucGFya1wiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNlNWU1ZTVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pLnBhcmtcIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiM5ZTllOWVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZFwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNmZmZmZmZcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5hcnRlcmlhbFwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzc1NzU3NVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmhpZ2h3YXlcIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjZGFkYWRhXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiIzYxNjE2MVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmxvY2FsXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzLnRleHQuZmlsbFwiLFxuICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiY29sb3JcIjogXCIjOWU5ZTllXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInRyYW5zaXQubGluZVwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNlNWU1ZTVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdC5zdGF0aW9uXCIsXG4gICAgICBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIixcbiAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImNvbG9yXCI6IFwiI2VlZWVlZVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLFxuICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiNjOWM5YzlcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcImZlYXR1cmVUeXBlXCI6IFwid2F0ZXJcIixcbiAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5maWxsXCIsXG4gICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJjb2xvclwiOiBcIiM5ZTllOWVcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfVxuICBdO1xuICBtYXBzdGVyLk1BUF9PUFRJT05TID0ge1xuICAgIGNlbnRlcjoge1xuICAgICAgbGF0OiAzNy43OTEzNTAsXG4gICAgICBsbmc6IC0xMjIuNDM1ODgzICBcbiAgICB9LFxuICAgIHpvb206IDEwLFxuICAgIGRpc2FibGVEZWZhdWx0VUk6IGZhbHNlLFxuICAgIHNjcm9sbHdoZWVsOiB0cnVlLFxuICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLFxuICAgIC8vIG1heFpvb206IDExLFxuICAgIC8vIG1pblpvb206IDksXG4gICAgem9vbUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICBwb3NpdGlvbjogZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkJPVFRPTV9MRUZULFxuICAgICAgc3R5bGU6IGdvb2dsZS5tYXBzLlpvb21Db250cm9sU3R5bGUuREVGQVVMVFxuICAgIH0sXG4gICAgcGFuQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgIHBvc2l0aW9uOiBnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uTEVGVF9CT1RUT01cbiAgICB9LFxuICAgIHN0eWxlczogc3R5bGVzLFxuICAgIGNsdXN0ZXI6IGZhbHNlLFxuICAgIGdlb2NvZGVyOiB0cnVlXG4gIH1cbn0od2luZG93LCBnb29nbGUsIHdpbmRvdy5NYXBzdGVyIHx8ICh3aW5kb3cuTWFwc3RlciA9IHt9KSkpOyIsIihmdW5jdGlvbih3aW5kb3csIGdvb2dsZSwgTWFwc3Rlcil7XG4gICQud2lkZ2V0KFwibWFwc3Rlci5tYXBzdGVyXCIsIHtcbiAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICBvcHRpb25zOiB7IH0sXG5cbiAgICAvLyBUaGUgY29uc3RydWN0b3JcbiAgICBfY3JlYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50WzBdLFxuICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB0aGlzLm1hcCA9IE1hcHN0ZXIuY3JlYXRlKGVsZW1lbnQsIG9wdGlvbnMpXG4gICAgfSxcblxuICAgIC8vIENhbGxlZCB3aGVuIGNyZWF0ZWQsIGFuZCBsYXRlciB3aGVuIGNoYW5naW5nIG9wdGlvbnNcbiAgICBfcmVmcmVzaDogZnVuY3Rpb24oKSB7XG4gICAgICBcbiAgICB9LFxuXG4gICAgYWRkTWFya2VyOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlmKG9wdGlvbnMubG9jYXRpb24pIHtcbiAgICAgICAgdGhpcy5tYXAuZ2VvY29kZSh7XG4gICAgICAgICAgYWRkcmVzczogb3B0aW9ucy5sb2NhdGlvbiwgLy8nR29sZGVuIEdhdGUgQnJpZGdlLCBTYW4gSnJhbmNpc2NvLCBDQSdcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgb3B0aW9ucy5sYXQgPSByZXN1bHQuZ2VvbWV0cnkubG9jYXRpb24ubGF0KCk7XG4gICAgICAgICAgICAgIG9wdGlvbnMubG5nID0gIHJlc3VsdC5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKTtcbiAgICAgICAgICAgICAgc2VsZi5tYXAuYWRkTWFya2VyKG9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0YXR1cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7ICBcbiAgICAgICAgdGhpcy5tYXAuYWRkTWFya2VyKG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZmluZE1hcmtlcjogZnVuY3Rpb24oY2FsbGJhY2spe1xuICAgICAgcmV0dXJuIHRoaXMubWFwLmZpbmRCeShjYWxsYmFjaylcbiAgICB9LFxuICAgIHJlbW92ZU1hcmtlcjogZnVuY3Rpb24oY2FsbGJhY2spe1xuICAgICAgdGhpcy5tYXAucmVtb3ZlQnkoY2FsbGJhY2spO1xuICAgIH0sXG4gICAgZ2V0TWFya2VyczogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB0aGlzLm1hcC5tYXJrZXJzLml0ZW1zO1xuICAgIH0sXG4gICAgc2V0UGFubzogZnVuY3Rpb24oc2VsZWN0b3IsIG9wdHMpe1xuICAgICAgdmFyIGVsZW1lbnRzID0gJChzZWxlY3RvciksXG4gICAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICAkLmVhY2goZWxlbWVudHMsIGZ1bmN0aW9uKGtleSwgZWxlbWVudCl7XG4gICAgICAgIHNlbGYubWFwLnNldFBhbm8oZWxlbWVudCwgb3B0cyk7XG4gICAgICB9KVxuICAgIH0sXG4gICAgLy8gRXZlbnRzIGJvdW5kIHZpYSBfb24gYXJlIHJlbW92ZWQgYXV0b21hdGljYWxseVxuICAgIC8vIHJldmVydCBvdGhlciBtb2RpZmljYXRpb25zIGhlcmVcbiAgICBfZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICBcbiAgICB9LFxuXG4gICAgLy8gX3NldE9wdGlvbnMgaXMgY2FsbGVkIHdpdGggYSBoYXNoIG9mIGFsbCBvcHRpb25zIHRoYXQgYXJlIGNoYW5naW5nXG4gICAgLy8gYWx3YXlzIHJlZnJlc2ggd2hlbiBjaGFuZ2luZyBvcHRpb25zXG4gICAgX3NldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gX3N1cGVyIGFuZCBfc3VwZXJBcHBseSBoYW5kbGUga2VlcGluZyB0aGUgcmlnaHQgdGhpcy1jb250ZXh0XG4gICAgICB0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcbiAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICB9LFxuXG4gICAgLy8gX3NldE9wdGlvbiBpcyBjYWxsZWQgZm9yIGVhY2ggaW5kaXZpZHVhbCBvcHRpb24gdGhhdCBpcyBjaGFuZ2luZ1xuICAgIF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuICAgICAgdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcbiAgICB9XG4gIH0pO1xuXG59KHdpbmRvdywgZ29vZ2xlLCBNYXBzdGVyKSk7IiwiKGZ1bmN0aW9uKHdpbmRvdywgZ29vZ2xlLCAkICl7XG4gIFxuICB2YXIgJG1hcHN0ZXIgPSAkKCcjbWFwLWNhbnZhcycpLm1hcHN0ZXIoTWFwc3Rlci5NQVBfT1BUSU9OUyk7XG4gICRtYXBzdGVyLm1hcHN0ZXIoJ2FkZE1hcmtlcicgLCB7XG4gICAgbGF0OiAzNy43OTEzNTAsXG4gICAgbG5nOiAtMTIyLjQzNTg4MyxcbiAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgaWQ6MSxcbiAgICBldmVudHM6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2NsaWNrJyxcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGUsIG1hcmtlcil7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2cobWFya2VyKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzKVxuICAgICAgICB9XG4gICAgICB9LHtcbiAgICAgICAgbmFtZTogJ2RyYWdlbmQnLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXtcbiAgICAgICAgICBhbGVydCgnZHJhZ2dlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXSxcbiAgICBpY29uOiAnLi4vaW1nL2ljb25zL21hcC1waW4ucG5nJ1xuICB9KTtcbiAgJG1hcHN0ZXIubWFwc3Rlcignc2V0UGFubycsICcjcGlwLXBhbm8nLCB7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIGxhdDogMzcuNzkxMzUwLFxuICAgICAgbG5nOiAtMTIyLjQzNTg4MyxcbiAgICB9LFxuICAgIHBvdjoge1xuICAgICAgaGVhZGluZzogMjAwLCAvLyBob3Jpc29udGFsIGNhbWVyYSB2aWV3IFxuICAgICAgcGl0Y2g6IDAgIC8vIHZlcnRpY2FsIGNhbWVyYSB2aWV3XG4gICAgfSxcbiAgICBldmVudHM6W1xuICAgICAge1xuICAgICAgICBuYW1lOiAncG9zaXRpb25fY2hhbmdlZCcsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2VkIHBvc2l0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdwb3ZfY2hhbmdlZCcsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2VkIHBvdicpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnbGlua3NfY2hhbmdlZCcsXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihlLCBwYW5vcmFtYSl7XG4gICAgICAgICAgY29uc29sZS5sb2cocGFub3JhbWEuZ2V0TGlua3MoKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF1cbiAgfSk7XG4gICRtYXBzdGVyLm1hcHN0ZXIoJ2FkZE1hcmtlcicsIHtcbiAgICBsb2NhdGlvbjogJ0dvbGRlbiBHYXRlIEJyaWRnZSwgU2FuIEpyYW5jaXNjbywgQ0EnXG4gIH0pXG59KHdpbmRvdywgZ29vZ2xlLCBqUXVlcnkpKTsgIl19
